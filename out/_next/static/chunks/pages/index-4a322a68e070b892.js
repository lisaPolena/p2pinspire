(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5405],{48312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9615)}])},62616:function(e,t,n){"use strict";function s(e){let t=JSON.stringify(e,(e,t)=>"bigint"==typeof t?Number(t):t);window.sessionStorage.setItem("user",t)}function i(){let e=window.sessionStorage.getItem("user");return e?JSON.parse(e):{}}function r(){window.sessionStorage.setItem("user","")}n.d(t,{ds:function(){return s},p8:function(){return r},qj:function(){return i}})},9615:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var s=n(85893),i=n(9008),r=n.n(i),a=n(33299),c=n(69077),l=n(67294),o=n(63816),d=n(11163),u=n(98531),f=n(81997),m=n(94720),h=n(2917),x=n(71457),p=n(14225);let j=e=>{let{isOpen:t,closeModal:n,handleCreateUser:i}=e;return(0,s.jsx)(s.Fragment,{children:t&&(0,s.jsx)(x.Z,{action:n,children:(0,s.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 p-4 bg-zinc-800 rounded-t-[40px] z-[14] h-[20%]",children:[(0,s.jsx)("div",{children:(0,s.jsx)("h2",{className:"text-xl text-white",children:"You need an account:"})}),(0,s.jsxs)("div",{className:"flex justify-evenly",children:[(0,s.jsx)(p.z,{colorScheme:"secondary",borderRadius:"50px",variant:"solid",onClick:n,children:"Cancel"}),(0,s.jsx)(p.z,{colorScheme:"primary",borderRadius:"50px",variant:"solid",onClick:i,children:"Create"})]})]})})})};var b=n(62616),g=n(25675),N=n.n(g);function w(){let{address:e,isConnected:t}=(0,c.mA)(),{data:n,status:i}=(0,a.useSession)(),{setUser:x,deleteProfile:p}=(0,h.m)(),g=(0,d.useRouter)(),w=(0,m.p)(),[v,_]=(0,l.useState)(!1),[y,S]=(0,l.useState)(!1),{data:E,status:k,writeAsync:C}=(0,c.GG)({address:"0x".concat("9ff82F92B2D3859278EedE1C5e2BF04a9b0E80e9"),abi:u.Mt,functionName:"createUser"}),{data:B}=(0,c.do)({address:"0x".concat("9ff82F92B2D3859278EedE1C5e2BF04a9b0E80e9"),abi:u.Mt,functionName:"getAllUsers",onSuccess(e){}});async function F(){await C({args:[e]}).then(()=>{_(!1),S(!0),A("Creating user...")}).catch(e=>{_(!1),A("Transaction rejected")})}function A(e,t){w({position:"top",render:()=>(0,s.jsx)(f.F,{text:e,imageHash:t})})}return(0,c.y2)({address:"0x".concat("9ff82F92B2D3859278EedE1C5e2BF04a9b0E80e9"),abi:u.Mt,eventName:"UserCreated",listener(t){let n=t[0].args;n.userAddress===e&&(x({id:Number(n.id),userAddress:n.userAddress}),(0,b.ds)(n),S(!1),g.push("/home"))}}),(0,l.useEffect)(()=>{if(t&&"authenticated"===i&&n){if(B){if(p===e)return;if(B.length>0&&B.find(t=>t.userAddress===e)){let t=B.find(t=>t.userAddress===e);if(t){x(t),(0,b.ds)(t),g.push("/home");return}}}let t=setTimeout(()=>{y||_(!0)},2e3);return()=>{clearTimeout(t)}}},[t,n,B]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(r(),{children:[(0,s.jsx)("title",{children:"Web3 Pinterest"}),(0,s.jsx)("meta",{name:"description",content:"Web3 Pinterest"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)("main",{className:"fixed flex flex-col items-center justify-end h-screen scroll-background",children:(0,s.jsxs)("div",{className:"z-10 flex flex-col h-[40vh] bg-black justify-between w-screen items-center pt-12 pb-8 shadow-index",children:[(0,s.jsx)(N(),{className:"w-24",src:"/assets/logo.png",alt:"Logo",width:100,height:100}),(0,s.jsx)("h2",{children:"Welcome to Web3 Pinterest"}),(0,s.jsx)(o.NL,{accountStatus:"full",label:"Connect"})]})}),(0,s.jsx)(j,{isOpen:v,closeModal:function(){_(!1)},handleCreateUser:F})]})}},14225:function(e,t,n){"use strict";n.d(t,{z:function(){return p}});var s=n(67294),[i,r]=(0,n(55227).k)({strict:!1,name:"ButtonGroupContext"}),a=n(16914),c=n(25432),l=n(85893);function o(e){let{children:t,className:n,...i}=e,r=(0,s.isValidElement)(t)?(0,s.cloneElement)(t,{"aria-hidden":!0,focusable:!1}):t,o=(0,c.cx)("chakra-button__icon",n);return(0,l.jsx)(a.m.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...i,className:o,children:r})}o.displayName="ButtonIcon";var d=n(81136);function u(e){let{label:t,placement:n,spacing:i="0.5rem",children:r=(0,l.jsx)(d.$,{color:"currentColor",width:"1em",height:"1em"}),className:o,__css:u,...f}=e,m=(0,c.cx)("chakra-button__spinner",o),h="start"===n?"marginEnd":"marginStart",x=(0,s.useMemo)(()=>({display:"flex",alignItems:"center",position:t?"relative":"absolute",[h]:t?i:0,fontSize:"1em",lineHeight:"normal",...u}),[u,t,h,i]);return(0,l.jsx)(a.m.div,{className:m,...f,__css:x,children:r})}u.displayName="ButtonSpinner";var f=n(81103),m=n(16554),h=n(27440),x=n(33179),p=(0,m.G)((e,t)=>{let n=r(),i=(0,h.mq)("Button",{...n,...e}),{isDisabled:o=null==n?void 0:n.isDisabled,isLoading:d,isActive:m,children:p,leftIcon:b,rightIcon:g,loadingText:N,iconSpacing:w="0.5rem",type:v,spinner:_,spinnerPlacement:y="start",className:S,as:E,...k}=(0,x.Lr)(e),C=(0,s.useMemo)(()=>{let e={...null==i?void 0:i._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...i,...!!n&&{_focus:e}}},[i,n]),{ref:B,type:F}=function(e){let[t,n]=(0,s.useState)(!e),i=(0,s.useCallback)(e=>{e&&n("BUTTON"===e.tagName)},[]);return{ref:i,type:t?"button":void 0}}(E),A={rightIcon:g,leftIcon:b,iconSpacing:w,children:p};return(0,l.jsxs)(a.m.button,{ref:(0,f.qq)(t,B),as:E,type:null!=v?v:F,"data-active":(0,c.PB)(m),"data-loading":(0,c.PB)(d),__css:C,className:(0,c.cx)("chakra-button",S),...k,disabled:o||d,children:[d&&"start"===y&&(0,l.jsx)(u,{className:"chakra-button__spinner--start",label:N,placement:"start",spacing:w,children:_}),d?N||(0,l.jsx)(a.m.span,{opacity:0,children:(0,l.jsx)(j,{...A})}):(0,l.jsx)(j,{...A}),d&&"end"===y&&(0,l.jsx)(u,{className:"chakra-button__spinner--end",label:N,placement:"end",spacing:w,children:_})]})});function j(e){let{leftIcon:t,rightIcon:n,children:s,iconSpacing:i}=e;return(0,l.jsxs)(l.Fragment,{children:[t&&(0,l.jsx)(o,{marginEnd:i,children:t}),s,n&&(0,l.jsx)(o,{marginStart:i,children:n})]})}p.displayName="Button"}},function(e){e.O(0,[1450,3673,9774,2888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);