(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[229],{94309:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/home",function(){return n(1145)}])},62616:function(e,t,n){"use strict";function r(e){let t=JSON.stringify(e,(e,t)=>"bigint"==typeof t?Number(t):t);window.sessionStorage.setItem("user",t)}function i(){let e=window.sessionStorage.getItem("user");return e?JSON.parse(e):{}}function s(){window.sessionStorage.setItem("user","")}n.d(t,{ds:function(){return r},p8:function(){return s},qj:function(){return i}})},1145:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return C}});var r=n(85893),i=n(9008),s=n.n(i),o=n(51039),a=n(67294),c=n(11163),d=n(33299),u=n(2917),l=n(69077),f=n(97449),p=n(47296),h=n(98531),m=n(94720),x=n(55281),b=n(96854),g=n(95410),w=n(81997),j=n(62616),v=n(2337),N=n(25675),y=n.n(N);function C(){let{address:e,isConnected:t,connector:n}=(0,l.mA)(),{data:i,status:N}=(0,d.useSession)(),C=(0,c.useRouter)(),[D,O]=(0,a.useState)([]),[S,_]=(0,a.useState)([]),{setUser:k,allBoards:E,setAllBoards:A,user:F,loadSavePinTransaction:P,setLoadSavePinTransaction:B}=(0,u.m)(),[I,H]=(0,a.useState)([]),[K,M]=(0,a.useState)(!1),J=(0,m.p)(),{data:R}=(0,l.do)({address:"0x".concat("bb19cbB272cDb3867adAD194ACA58005D419306a"),abi:f.Mt,functionName:"getBoardsByOwner",args:[e],onSuccess(e){H(e)}}),{data:T}=(0,l.do)({address:"0x".concat("55706B2c62cbdda9317343A7290F0bD54e70cCf3"),abi:p.Mt,functionName:"getAllPins",onSuccess(e){_(e)}}),{data:$}=(0,l.do)({address:"0x".concat("55706B2c62cbdda9317343A7290F0bD54e70cCf3"),abi:p.Mt,functionName:"getAllPins",onSuccess(e){_(e)}});(0,l.y2)({address:"0x".concat("bb19cbB272cDb3867adAD194ACA58005D419306a"),abi:f.Mt,eventName:"PinSaved",listener(e){let t=e[0].args;L(Number(t.pinId),t.title,t.description,t.imageHash,Number(t.boardId),t.owner),B(0),function(e,t){var n;let i=null===(n=E.find(e=>e.id===t))||void 0===n?void 0:n.name,s="Pin saved to "+i;J({position:"top",render:()=>(0,r.jsx)(w.F,{text:s,imageHash:e})})}(t.imageHash,Number(t.boardId))}});let{data:q}=(0,l.do)({address:"0x".concat("9ff82F92B2D3859278EedE1C5e2BF04a9b0E80e9"),abi:h.Mt,functionName:"getAllUsers",onSuccess(t){if(!F&&t&&t.length>0&&t.find(t=>t.userAddress===e)){let n=t.find(t=>t.userAddress===e);n&&(k({...n,id:Number(n.id)}),(0,j.ds)(n))}}});(0,a.useEffect)(()=>(t||"unauthenticated"!==N||i||F||C.push("/"),function(){if(R&&$){let t=I.map(e=>e.pins.map(e=>Number(e))).flat();O(S.filter(n=>n.owner!==e&&!t.includes(Number(n.id))))}}(),function(){if(R&&T){let e=[];R.length>0&&(e=I.map(e=>{let t=e.pins.map(e=>e),n=S.filter(e=>t.find(t=>Number(t)===Number(e.id))),r=S.filter(t=>t.boardId===e.id),i=[...n,...r];return{id:Number(e.id),name:e.name,description:e.description,owner:e.owner,pins:i,boardCoverHash:e.boardCoverHash}}).sort((e,t)=>Number(e.id)-Number(t.id))),A(e),(0,g.o6)(e)}}(),n&&n.on("change",z),()=>{n&&n.off("change",z)}),[C,i,e,t,I,N,n,$,F,q]);let z=e=>{let{account:t,chain:n}=e;if(t){(0,g._R)(),M(!0),setTimeout(()=>{M(!1)},2e3);let e="Account changed to "+t.slice(0,4)+"..."+t.slice(38,t.length);J({position:"top",render:()=>(0,r.jsx)(w.F,{text:e})})}else if(n){let e=n.unsupported?"Sry, the network is not supported!":"You changed the network.";J({position:"top",render:()=>(0,r.jsx)(w.F,{text:e})})}},L=(e,t,n,r,i,s)=>{O(t=>t.filter(t=>{let{id:n}=t;return Number(n)!==e}));let o={id:e,title:t,description:n,imageHash:r,boardId:i,owner:s},a=E.map(e=>e.id===i?{...e,pins:[...e.pins,o]}:e);A(a),(0,g.o6)(a)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s(),{children:[(0,r.jsx)("title",{children:"Web3 Pinterest"}),(0,r.jsx)("meta",{name:"description",content:"Web3 Pinterest"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsxs)("main",{className:"h-screen overflow-auto bg-black",children:[(0,r.jsx)("div",{className:"fixed inset-x-0 top-0 grid grid-cols-3 bg-black h-[50px] pt-3 px-2 z-10"}),(0,r.jsx)(v.Z,{columnsCount:2,gutter:"20px",className:"px-4 mt-2 relative top-[50px] mb-32",children:K?[(0,r.jsxs)(x.K,{children:[(0,r.jsx)(b.O,{height:"215px",width:"100%",fadeDuration:4}),(0,r.jsx)(b.O,{height:"15px",width:"70%",fadeDuration:4})]},"0"),(0,r.jsxs)(x.K,{children:[(0,r.jsx)(b.O,{height:"215px",width:"100%",fadeDuration:4}),(0,r.jsx)(b.O,{height:"15px",width:"70%",fadeDuration:4})]},"1"),(0,r.jsxs)(x.K,{children:[(0,r.jsx)(b.O,{height:"215px",width:"100%",fadeDuration:4}),(0,r.jsx)(b.O,{height:"15px",width:"70%",fadeDuration:4})]},"2"),(0,r.jsxs)(x.K,{children:[(0,r.jsx)(b.O,{height:"215px",width:"100%",fadeDuration:4}),(0,r.jsx)(b.O,{height:"15px",width:"70%",fadeDuration:4})]},"3"),(0,r.jsxs)(x.K,{children:[(0,r.jsx)(b.O,{height:"215px",width:"100%",fadeDuration:4}),(0,r.jsx)(b.O,{height:"15px",width:"70%",fadeDuration:4})]},"4")]:D.map(e=>(0,r.jsx)(a.Fragment,{children:P&&P===Number(e.id)?(0,r.jsxs)(x.K,{children:[(0,r.jsx)(b.O,{height:"215px",width:"100%",fadeDuration:4}),(0,r.jsx)(b.O,{height:"15px",width:"70%",fadeDuration:4})]}):(0,r.jsxs)("div",{className:"h-auto",onClick:()=>C.push("/pin/".concat(e.id)),children:[(0,r.jsx)(y(),{src:"https://web3-pinterest.infura-ipfs.io/ipfs/".concat(e.imageHash),alt:e.title,className:"object-cover w-full rounded-2xl max-h-72",width:100,height:100}),(0,r.jsx)("div",{children:(0,r.jsx)("h2",{className:"pt-2 pl-2 text-white font-semibold text-[0.9rem]",children:e.title})})]},e.id)},e.id))})]}),(0,r.jsx)(o.w,{})]})}},2337:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(67294);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var o=function(e){function t(){return e.apply(this,arguments)||this}(n=t).prototype=Object.create(e.prototype),n.prototype.constructor=n,s(n,e);var n,o=t.prototype;return o.getColumns=function(){var e=this.props,t=e.children,n=e.columnsCount,i=Array.from({length:n},function(){return[]});return r.Children.forEach(t,function(e,t){e&&r.isValidElement(e)&&i[t%n].push(e)}),i},o.renderColumns=function(){var e=this.props.gutter;return this.getColumns().map(function(t,n){return r.createElement("div",{key:n,style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:e}},t.map(function(e){return e}))})},o.render=function(){var e=this.props,t=e.gutter,n=e.className,s=e.style;return r.createElement("div",{style:i({display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:t},s),className:n},this.renderColumns())},t}(r.Component);o.propTypes={},o.defaultProps={columnsCount:3,gutter:"0",className:null,style:{}};var a="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,c=function(){var e=(0,r.useState)(!1),t=e[0],n=e[1];return a(function(){n(!0)},[]),t},d=o},96854:function(e,t,n){"use strict";n.d(t,{O:function(){return b}});var r=n(67294),i=n(25432),s=n(16914),o=n(33179),a=n(70917),c=n(16554),d=n(27440),u=n(42006),l=n(85893),f=(0,s.m)("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),p=(0,o.gJ)("skeleton-start-color"),h=(0,o.gJ)("skeleton-end-color"),m=(0,a.F4)({from:{opacity:0},to:{opacity:1}}),x=(0,a.F4)({from:{borderColor:p.reference,background:p.reference},to:{borderColor:h.reference,background:h.reference}}),b=(0,c.G)((e,t)=>{let n={...e,fadeDuration:"number"==typeof e.fadeDuration?e.fadeDuration:.4,speed:"number"==typeof e.speed?e.speed:.8},a=(0,d.mq)("Skeleton",n),c=function(){let e=(0,r.useRef)(!0);return(0,r.useEffect)(()=>{e.current=!1},[]),e.current}(),{startColor:b="",endColor:g="",isLoaded:w,fadeDuration:j,speed:v,className:N,fitContent:y,...C}=(0,o.Lr)(n),[D,O]=(0,u.dQ)("colors",[b,g]),S=function(e){let t=(0,r.useRef)();return(0,r.useEffect)(()=>{t.current=e},[e]),t.current}(w),_=(0,i.cx)("chakra-skeleton",N),k={...D&&{[p.variable]:D},...O&&{[h.variable]:O}};if(w){let e=c||S?"none":`${m} ${j}s`;return(0,l.jsx)(s.m.div,{ref:t,className:_,__css:{animation:e},...C})}return(0,l.jsx)(f,{ref:t,className:_,...C,__css:{width:y?"fit-content":void 0,...a,...k,_dark:{...a._dark,...k},animation:`${v}s linear infinite alternate ${x}`}})});b.displayName="Skeleton"}},function(e){e.O(0,[260,4617,1228,2013,1827,1450,6932,1924,3673,2707,1039,9774,2888,179],function(){return e(e.s=94309)}),_N_E=e.O()}]);