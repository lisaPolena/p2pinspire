(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7582],{31050:function(e,t,r){"use strict";t.Xx=t._w=t.aP=t.KS=t.jQ=void 0,r(31416);let n=r(93350);function i(e){let t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}r(17309),t.jQ=64,t.KS=64,t.aP=32;let s=new Uint8Array(32);s[0]=9;let o=i(),a=i([1]),u=(i([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),i([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222])),c=i([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=i([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]);function h(e,t){for(let r=0;r<16;r++)e[r]=0|t[r]}function f(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-65536*t}e[0]+=t-1+37*(t-1)}function p(e,t,r){let n=~(r-1);for(let r=0;r<16;r++){let i=n&(e[r]^t[r]);e[r]^=i,t[r]^=i}}function d(e,t){let r=i(),n=i();for(let e=0;e<16;e++)n[e]=t[e];f(n),f(n),f(n);for(let e=0;e<2;e++){r[0]=n[0]-65517;for(let e=1;e<15;e++)r[e]=n[e]-65535-(r[e-1]>>16&1),r[e-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let e=r[15]>>16&1;r[14]&=65535,p(n,r,1-e)}for(let t=0;t<16;t++)e[2*t]=255&n[t],e[2*t+1]=n[t]>>8}i([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function g(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function y(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function v(e,t,r){let n,i,s=0,o=0,a=0,u=0,c=0,l=0,h=0,f=0,p=0,d=0,g=0,y=0,v=0,m=0,b=0,D=0,_=0,w=0,E=0,I=0,C=0,S=0,P=0,O=0,x=0,A=0,N=0,R=0,T=0,j=0,U=0,L=r[0],k=r[1],$=r[2],M=r[3],z=r[4],q=r[5],F=r[6],V=r[7],B=r[8],H=r[9],K=r[10],W=r[11],G=r[12],J=r[13],Y=r[14],Z=r[15];s+=(n=t[0])*L,o+=n*k,a+=n*$,u+=n*M,c+=n*z,l+=n*q,h+=n*F,f+=n*V,p+=n*B,d+=n*H,g+=n*K,y+=n*W,v+=n*G,m+=n*J,b+=n*Y,D+=n*Z,o+=(n=t[1])*L,a+=n*k,u+=n*$,c+=n*M,l+=n*z,h+=n*q,f+=n*F,p+=n*V,d+=n*B,g+=n*H,y+=n*K,v+=n*W,m+=n*G,b+=n*J,D+=n*Y,_+=n*Z,a+=(n=t[2])*L,u+=n*k,c+=n*$,l+=n*M,h+=n*z,f+=n*q,p+=n*F,d+=n*V,g+=n*B,y+=n*H,v+=n*K,m+=n*W,b+=n*G,D+=n*J,_+=n*Y,w+=n*Z,u+=(n=t[3])*L,c+=n*k,l+=n*$,h+=n*M,f+=n*z,p+=n*q,d+=n*F,g+=n*V,y+=n*B,v+=n*H,m+=n*K,b+=n*W,D+=n*G,_+=n*J,w+=n*Y,E+=n*Z,c+=(n=t[4])*L,l+=n*k,h+=n*$,f+=n*M,p+=n*z,d+=n*q,g+=n*F,y+=n*V,v+=n*B,m+=n*H,b+=n*K,D+=n*W,_+=n*G,w+=n*J,E+=n*Y,I+=n*Z,l+=(n=t[5])*L,h+=n*k,f+=n*$,p+=n*M,d+=n*z,g+=n*q,y+=n*F,v+=n*V,m+=n*B,b+=n*H,D+=n*K,_+=n*W,w+=n*G,E+=n*J,I+=n*Y,C+=n*Z,h+=(n=t[6])*L,f+=n*k,p+=n*$,d+=n*M,g+=n*z,y+=n*q,v+=n*F,m+=n*V,b+=n*B,D+=n*H,_+=n*K,w+=n*W,E+=n*G,I+=n*J,C+=n*Y,S+=n*Z,f+=(n=t[7])*L,p+=n*k,d+=n*$,g+=n*M,y+=n*z,v+=n*q,m+=n*F,b+=n*V,D+=n*B,_+=n*H,w+=n*K,E+=n*W,I+=n*G,C+=n*J,S+=n*Y,P+=n*Z,p+=(n=t[8])*L,d+=n*k,g+=n*$,y+=n*M,v+=n*z,m+=n*q,b+=n*F,D+=n*V,_+=n*B,w+=n*H,E+=n*K,I+=n*W,C+=n*G,S+=n*J,P+=n*Y,O+=n*Z,d+=(n=t[9])*L,g+=n*k,y+=n*$,v+=n*M,m+=n*z,b+=n*q,D+=n*F,_+=n*V,w+=n*B,E+=n*H,I+=n*K,C+=n*W,S+=n*G,P+=n*J,O+=n*Y,x+=n*Z,g+=(n=t[10])*L,y+=n*k,v+=n*$,m+=n*M,b+=n*z,D+=n*q,_+=n*F,w+=n*V,E+=n*B,I+=n*H,C+=n*K,S+=n*W,P+=n*G,O+=n*J,x+=n*Y,A+=n*Z,y+=(n=t[11])*L,v+=n*k,m+=n*$,b+=n*M,D+=n*z,_+=n*q,w+=n*F,E+=n*V,I+=n*B,C+=n*H,S+=n*K,P+=n*W,O+=n*G,x+=n*J,A+=n*Y,N+=n*Z,v+=(n=t[12])*L,m+=n*k,b+=n*$,D+=n*M,_+=n*z,w+=n*q,E+=n*F,I+=n*V,C+=n*B,S+=n*H,P+=n*K,O+=n*W,x+=n*G,A+=n*J,N+=n*Y,R+=n*Z,m+=(n=t[13])*L,b+=n*k,D+=n*$,_+=n*M,w+=n*z,E+=n*q,I+=n*F,C+=n*V,S+=n*B,P+=n*H,O+=n*K,x+=n*W,A+=n*G,N+=n*J,R+=n*Y,T+=n*Z,b+=(n=t[14])*L,D+=n*k,_+=n*$,w+=n*M,E+=n*z,I+=n*q,C+=n*F,S+=n*V,P+=n*B,O+=n*H,x+=n*K,A+=n*W,N+=n*G,R+=n*J,T+=n*Y,j+=n*Z,D+=(n=t[15])*L,_+=n*k,w+=n*$,E+=n*M,I+=n*z,C+=n*q,S+=n*F,P+=n*V,O+=n*B,x+=n*H,A+=n*K,N+=n*W,R+=n*G,T+=n*J,j+=n*Y,U+=n*Z,s+=38*_,o+=38*w,a+=38*E,u+=38*I,c+=38*C,l+=38*S,h+=38*P,f+=38*O,p+=38*x,d+=38*A,g+=38*N,y+=38*R,v+=38*T,m+=38*j,b+=38*U,i=Math.floor((n=s+(i=1)+65535)/65536),s=n-65536*i,i=Math.floor((n=o+i+65535)/65536),o=n-65536*i,i=Math.floor((n=a+i+65535)/65536),a=n-65536*i,i=Math.floor((n=u+i+65535)/65536),u=n-65536*i,i=Math.floor((n=c+i+65535)/65536),c=n-65536*i,i=Math.floor((n=l+i+65535)/65536),l=n-65536*i,i=Math.floor((n=h+i+65535)/65536),h=n-65536*i,i=Math.floor((n=f+i+65535)/65536),f=n-65536*i,i=Math.floor((n=p+i+65535)/65536),p=n-65536*i,i=Math.floor((n=d+i+65535)/65536),d=n-65536*i,i=Math.floor((n=g+i+65535)/65536),g=n-65536*i,i=Math.floor((n=y+i+65535)/65536),y=n-65536*i,i=Math.floor((n=v+i+65535)/65536),v=n-65536*i,i=Math.floor((n=m+i+65535)/65536),m=n-65536*i,i=Math.floor((n=b+i+65535)/65536),b=n-65536*i,i=Math.floor((n=D+i+65535)/65536),D=n-65536*i,s+=i-1+37*(i-1),i=Math.floor((n=s+(i=1)+65535)/65536),s=n-65536*i,i=Math.floor((n=o+i+65535)/65536),o=n-65536*i,i=Math.floor((n=a+i+65535)/65536),a=n-65536*i,i=Math.floor((n=u+i+65535)/65536),u=n-65536*i,i=Math.floor((n=c+i+65535)/65536),c=n-65536*i,i=Math.floor((n=l+i+65535)/65536),l=n-65536*i,i=Math.floor((n=h+i+65535)/65536),h=n-65536*i,i=Math.floor((n=f+i+65535)/65536),f=n-65536*i,i=Math.floor((n=p+i+65535)/65536),p=n-65536*i,i=Math.floor((n=d+i+65535)/65536),d=n-65536*i,i=Math.floor((n=g+i+65535)/65536),g=n-65536*i,i=Math.floor((n=y+i+65535)/65536),y=n-65536*i,i=Math.floor((n=v+i+65535)/65536),v=n-65536*i,i=Math.floor((n=m+i+65535)/65536),m=n-65536*i,i=Math.floor((n=b+i+65535)/65536),b=n-65536*i,i=Math.floor((n=D+i+65535)/65536),D=n-65536*i,s+=i-1+37*(i-1),e[0]=s,e[1]=o,e[2]=a,e[3]=u,e[4]=c,e[5]=l,e[6]=h,e[7]=f,e[8]=p,e[9]=d,e[10]=g,e[11]=y,e[12]=v,e[13]=m,e[14]=b,e[15]=D}function m(e,t){let r=i(),n=i(),s=i(),o=i(),a=i(),c=i(),l=i(),h=i(),f=i();y(r,e[1],e[0]),y(f,t[1],t[0]),v(r,r,f),g(n,e[0],e[1]),g(f,t[0],t[1]),v(n,n,f),v(s,e[3],t[3]),v(s,s,u),v(o,e[2],t[2]),g(o,o,o),y(a,n,r),y(c,o,s),g(l,o,s),g(h,n,r),v(e[0],a,c),v(e[1],h,l),v(e[2],l,c),v(e[3],a,h)}function b(e,t,r){for(let n=0;n<4;n++)p(e[n],t[n],r)}function D(e,t){let r=i(),n=i(),s=i();(function(e,t){let r;let n=i();for(r=0;r<16;r++)n[r]=t[r];for(r=253;r>=0;r--)v(n,n,n),2!==r&&4!==r&&v(n,n,t);for(r=0;r<16;r++)e[r]=n[r]})(s,t[2]),v(r,t[0],s),v(n,t[1],s),d(e,n),e[31]^=function(e){let t=new Uint8Array(32);return d(t,e),1&t[0]}(r)<<7}function _(e,t){let r=[i(),i(),i(),i()];h(r[0],c),h(r[1],l),h(r[2],a),v(r[3],c,l),function(e,t,r){h(e[0],o),h(e[1],a),h(e[2],a),h(e[3],o);for(let n=255;n>=0;--n){let i=r[n/8|0]>>(7&n)&1;b(e,t,i),m(t,e),m(e,e),b(e,t,i)}}(e,r,t)}t._w=function(e){if(e.length!==t.aP)throw Error(`ed25519: seed must be ${t.aP} bytes`);let r=(0,n.hash)(e);r[0]&=248,r[31]&=127,r[31]|=64;let s=new Uint8Array(32),o=[i(),i(),i(),i()];_(o,r),D(s,o);let a=new Uint8Array(64);return a.set(e),a.set(s,32),{publicKey:s,secretKey:a}};let w=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function E(e,t){let r,n,i,s;for(n=63;n>=32;--n){for(r=0,i=n-32,s=n-12;i<s;++i)t[i]+=r-16*t[n]*w[i-(n-32)],r=Math.floor((t[i]+128)/256),t[i]-=256*r;t[i]+=r,t[n]=0}for(i=0,r=0;i<32;i++)t[i]+=r-(t[31]>>4)*w[i],r=t[i]>>8,t[i]&=255;for(i=0;i<32;i++)t[i]-=r*w[i];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function I(e){let t=new Float64Array(64);for(let r=0;r<64;r++)t[r]=e[r];for(let t=0;t<64;t++)e[t]=0;E(e,t)}t.Xx=function(e,t){let r=new Float64Array(64),s=[i(),i(),i(),i()],o=(0,n.hash)(e.subarray(0,32));o[0]&=248,o[31]&=127,o[31]|=64;let a=new Uint8Array(64);a.set(o.subarray(32),32);let u=new n.SHA512;u.update(a.subarray(32)),u.update(t);let c=u.digest();u.clean(),I(c),_(s,c),D(a,s),u.reset(),u.update(a.subarray(0,32)),u.update(e.subarray(32)),u.update(t);let l=u.digest();I(l);for(let e=0;e<32;e++)r[e]=c[e];for(let e=0;e<32;e++)for(let t=0;t<32;t++)r[e+t]+=l[e]*o[t];return E(a.subarray(32),r),a}},93350:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(98099),i=r(17309);t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var s=function(){function e(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return e.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},e.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},e.prototype.clean=function(){i.wipe(this._buffer),i.wipe(this._tempHi),i.wipe(this._tempLo),this.reset()},e.prototype.update=function(e,r){if(void 0===r&&(r=e.length),this._finished)throw Error("SHA512: can't update because hash was finished.");var n=0;if(this._bytesHashed+=r,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&r>0;)this._buffer[this._bufferLength++]=e[n++],r--;this._bufferLength===this.blockSize&&(a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(r>=this.blockSize&&(n=a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,e,n,r),r%=this.blockSize);r>0;)this._buffer[this._bufferLength++]=e[n++],r--;return this},e.prototype.finish=function(e){if(!this._finished){var t=this._bytesHashed,r=this._bufferLength,i=t%128<112?128:256;this._buffer[r]=128;for(var s=r+1;s<i-8;s++)this._buffer[s]=0;n.writeUint32BE(t/536870912|0,this._buffer,i-8),n.writeUint32BE(t<<3,this._buffer,i-4),a(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,i),this._finished=!0}for(var s=0;s<this.digestLength/8;s++)n.writeUint32BE(this._stateHi[s],e,8*s),n.writeUint32BE(this._stateLo[s],e,8*s+4);return this},e.prototype.digest=function(){var e=new Uint8Array(this.digestLength);return this.finish(e),e},e.prototype.saveState=function(){if(this._finished)throw Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},e.prototype.restoreState=function(e){return this._stateHi.set(e.stateHi),this._stateLo.set(e.stateLo),this._bufferLength=e.bufferLength,e.buffer&&this._buffer.set(e.buffer),this._bytesHashed=e.bytesHashed,this._finished=!1,this},e.prototype.cleanSavedState=function(e){i.wipe(e.stateHi),i.wipe(e.stateLo),e.buffer&&i.wipe(e.buffer),e.bufferLength=0,e.bytesHashed=0},e}();t.SHA512=s;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function a(e,t,r,i,s,a,u){for(var c,l,h,f,p,d,g,y,v=r[0],m=r[1],b=r[2],D=r[3],_=r[4],w=r[5],E=r[6],I=r[7],C=i[0],S=i[1],P=i[2],O=i[3],x=i[4],A=i[5],N=i[6],R=i[7];u>=128;){for(var T=0;T<16;T++){var j=8*T+a;e[T]=n.readUint32BE(s,j),t[T]=n.readUint32BE(s,j+4)}for(var T=0;T<80;T++){var U=v,L=m,k=b,$=D,M=_,z=w,q=E,F=I,V=C,B=S,H=P,K=O,W=x,G=A,J=N,Y=R;if(c=I,p=65535&(l=R),d=l>>>16,g=65535&c,y=c>>>16,c=(_>>>14|x<<18)^(_>>>18|x<<14)^(x>>>9|_<<23),p+=65535&(l=(x>>>14|_<<18)^(x>>>18|_<<14)^(_>>>9|x<<23)),d+=l>>>16,g+=65535&c,y+=c>>>16,c=_&w^~_&E,p+=65535&(l=x&A^~x&N),d+=l>>>16,g+=65535&c,y+=c>>>16,c=o[2*T],p+=65535&(l=o[2*T+1]),d+=l>>>16,g+=65535&c,y+=c>>>16,c=e[T%16],p+=65535&(l=t[T%16]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,h=65535&g|y<<16,f=65535&p|d<<16,c=h,p=65535&(l=f),d=l>>>16,g=65535&c,y=c>>>16,c=(v>>>28|C<<4)^(C>>>2|v<<30)^(C>>>7|v<<25),p+=65535&(l=(C>>>28|v<<4)^(v>>>2|C<<30)^(v>>>7|C<<25)),d+=l>>>16,g+=65535&c,y+=c>>>16,c=v&m^v&b^m&b,p+=65535&(l=C&S^C&P^S&P),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,F=65535&g|y<<16,Y=65535&p|d<<16,c=$,p=65535&(l=K),d=l>>>16,g=65535&c,y=c>>>16,c=h,p+=65535&(l=f),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,$=65535&g|y<<16,K=65535&p|d<<16,m=U,b=L,D=k,_=$,w=M,E=z,I=q,v=F,S=V,P=B,O=H,x=K,A=W,N=G,R=J,C=Y,T%16==15)for(var j=0;j<16;j++)c=e[j],p=65535&(l=t[j]),d=l>>>16,g=65535&c,y=c>>>16,c=e[(j+9)%16],p+=65535&(l=t[(j+9)%16]),d+=l>>>16,g+=65535&c,y+=c>>>16,c=((h=e[(j+1)%16])>>>1|(f=t[(j+1)%16])<<31)^(h>>>8|f<<24)^h>>>7,p+=65535&(l=(f>>>1|h<<31)^(f>>>8|h<<24)^(f>>>7|h<<25)),d+=l>>>16,g+=65535&c,y+=c>>>16,c=((h=e[(j+14)%16])>>>19|(f=t[(j+14)%16])<<13)^(f>>>29|h<<3)^h>>>6,p+=65535&(l=(f>>>19|h<<13)^(h>>>29|f<<3)^(f>>>6|h<<26)),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,e[j]=65535&g|y<<16,t[j]=65535&p|d<<16}c=v,p=65535&(l=C),d=l>>>16,g=65535&c,y=c>>>16,c=r[0],p+=65535&(l=i[0]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[0]=v=65535&g|y<<16,i[0]=C=65535&p|d<<16,c=m,p=65535&(l=S),d=l>>>16,g=65535&c,y=c>>>16,c=r[1],p+=65535&(l=i[1]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[1]=m=65535&g|y<<16,i[1]=S=65535&p|d<<16,c=b,p=65535&(l=P),d=l>>>16,g=65535&c,y=c>>>16,c=r[2],p+=65535&(l=i[2]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[2]=b=65535&g|y<<16,i[2]=P=65535&p|d<<16,c=D,p=65535&(l=O),d=l>>>16,g=65535&c,y=c>>>16,c=r[3],p+=65535&(l=i[3]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[3]=D=65535&g|y<<16,i[3]=O=65535&p|d<<16,c=_,p=65535&(l=x),d=l>>>16,g=65535&c,y=c>>>16,c=r[4],p+=65535&(l=i[4]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[4]=_=65535&g|y<<16,i[4]=x=65535&p|d<<16,c=w,p=65535&(l=A),d=l>>>16,g=65535&c,y=c>>>16,c=r[5],p+=65535&(l=i[5]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[5]=w=65535&g|y<<16,i[5]=A=65535&p|d<<16,c=E,p=65535&(l=N),d=l>>>16,g=65535&c,y=c>>>16,c=r[6],p+=65535&(l=i[6]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[6]=E=65535&g|y<<16,i[6]=N=65535&p|d<<16,c=I,p=65535&(l=R),d=l>>>16,g=65535&c,y=c>>>16,c=r[7],p+=65535&(l=i[7]),d+=l>>>16,g+=65535&c,y+=c>>>16,d+=p>>>16,g+=d>>>16,y+=g>>>16,r[7]=I=65535&g|y<<16,i[7]=R=65535&p|d<<16,a+=128,u-=128}return a}t.hash=function(e){var t=new s;t.update(e);var r=t.digest();return t.clean(),r}},7582:function(e,t,r){"use strict";r.r(t),r.d(t,{EthereumProvider:function(){return ak},OPTIONAL_EVENTS:function(){return aI},OPTIONAL_METHODS:function(){return aw},REQUIRED_EVENTS:function(){return aE},REQUIRED_METHODS:function(){return a_},default:function(){return aL}});var n={};r.r(n),r.d(n,{identity:function(){return em}});var i={};r.r(i),r.d(i,{base2:function(){return eb}});var s={};r.r(s),r.d(s,{base8:function(){return eD}});var o={};r.r(o),r.d(o,{base10:function(){return e_}});var a={};r.r(a),r.d(a,{base16:function(){return ew},base16upper:function(){return eE}});var u={};r.r(u),r.d(u,{base32:function(){return eI},base32hex:function(){return eO},base32hexpad:function(){return eA},base32hexpadupper:function(){return eN},base32hexupper:function(){return ex},base32pad:function(){return eS},base32padupper:function(){return eP},base32upper:function(){return eC},base32z:function(){return eR}});var c={};r.r(c),r.d(c,{base36:function(){return eT},base36upper:function(){return ej}});var l={};r.r(l),r.d(l,{base58btc:function(){return eU},base58flickr:function(){return eL}});var h={};r.r(h),r.d(h,{base64:function(){return ek},base64pad:function(){return e$},base64url:function(){return eM},base64urlpad:function(){return ez}});var f={};r.r(f),r.d(f,{base256emoji:function(){return eB}});var p={};r.r(p),r.d(p,{sha256:function(){return e1},sha512:function(){return e3}});var d={};r.r(d),r.d(d,{identity:function(){return e8}});var g={};r.r(g),r.d(g,{code:function(){return e6},decode:function(){return e9},encode:function(){return e4},name:function(){return e2}});var y={};r.r(y),r.d(y,{code:function(){return tr},decode:function(){return ti},encode:function(){return tn},name:function(){return tt}});var v={};r.r(v),r.d(v,{identity:function(){return tY}});var m={};r.r(m),r.d(m,{base2:function(){return tZ}});var b={};r.r(b),r.d(b,{base8:function(){return tQ}});var D={};r.r(D),r.d(D,{base10:function(){return tX}});var _={};r.r(_),r.d(_,{base16:function(){return t0},base16upper:function(){return t1}});var w={};r.r(w),r.d(w,{base32:function(){return t3},base32hex:function(){return t6},base32hexpad:function(){return t9},base32hexpadupper:function(){return t7},base32hexupper:function(){return t4},base32pad:function(){return t8},base32padupper:function(){return t2},base32upper:function(){return t5},base32z:function(){return re}});var E={};r.r(E),r.d(E,{base36:function(){return rt},base36upper:function(){return rr}});var I={};r.r(I),r.d(I,{base58btc:function(){return rn},base58flickr:function(){return ri}});var C={};r.r(C),r.d(C,{base64:function(){return rs},base64pad:function(){return ro},base64url:function(){return ra},base64urlpad:function(){return ru}});var S={};r.r(S),r.d(S,{base256emoji:function(){return rf}});var P={};r.r(P),r.d(P,{sha256:function(){return rE},sha512:function(){return rI}});var O={};r.r(O),r.d(O,{identity:function(){return rS}});var x={};r.r(x),r.d(x,{code:function(){return rO},decode:function(){return rA},encode:function(){return rx},name:function(){return rP}});var A={};r.r(A),r.d(A,{code:function(){return rj},decode:function(){return rL},encode:function(){return rU},name:function(){return rT}});var N=r(17187),R=r.n(N),T=r(63937),j=r(85150),U=r(90772),L=r(9107),k=r(38200);class $ extends k.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class M extends k.q{constructor(e,t){super(),this.core=e,this.logger=t,this.records=new Map}}class z{constructor(e,t){this.logger=e,this.core=t}}class q extends k.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class F extends k.q{constructor(e){super()}}class V{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}class B extends k.q{constructor(e,t){super(),this.relayer=e,this.logger=t}}class H extends k.q{constructor(e,t){super(),this.core=e,this.logger=t}}class K{constructor(e,t){this.projectId=e,this.logger=t}}class W{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class G{constructor(e){this.client=e}}let J=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),Y=e=>{let t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(e,t)=>{let r="string"==typeof t&&t.match(/^\d+n$/);return r?BigInt(t.substring(0,t.length-1)):t})};var Z=r(31050),Q=r(31416),X=r(66736);let ee="base64url",et="base58btc";function er(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function en(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?er(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}var ei=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===u;)n++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=s-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=a*o[f]>>>0,o[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var d=new Uint8Array(n+(s-p)),g=n;p!==s;)d[g++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,c=new Uint8Array(o);i!==s;){for(var h=t[i],f=0,p=o-1;(0!==h||f<n)&&-1!==p;p--,f++)h+=256*c[p]>>>0,c[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");n=f,i++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var g=u.repeat(r);d<o;++d)g+=e.charAt(c[d]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let es=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},eo=e=>new TextEncoder().encode(e),ea=e=>new TextDecoder().decode(e);class eu{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ec{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return eh(this,e)}}class el{constructor(e){this.decoders=e}or(e){return eh(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let eh=(e,t)=>new el({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class ef{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new eu(e,t,r),this.decoder=new ec(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let ep=({name:e,prefix:t,encode:r,decode:n})=>new ef(e,t,r,n),ed=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=ei(r,t);return ep({prefix:e,name:t,encode:n,decode:e=>es(i(e))})},eg=(e,t,r,n)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let t=0;t<s;++t){let s=i[e[t]];if(void 0===s)throw SyntaxError(`Non-${n} character`);u=u<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw SyntaxError("Unexpected end of data");return o},ey=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},ev=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>ep({prefix:t,name:e,encode:e=>ey(e,n,r),decode:t=>eg(t,n,r,e)}),em=ep({prefix:"\x00",name:"identity",encode:e=>ea(e),decode:e=>eo(e)}),eb=ev({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),eD=ev({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),e_=ed({prefix:"9",name:"base10",alphabet:"0123456789"}),ew=ev({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),eE=ev({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),eI=ev({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),eC=ev({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),eS=ev({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),eP=ev({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eO=ev({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),ex=ev({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eA=ev({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),eN=ev({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eR=ev({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),eT=ed({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ej=ed({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),eU=ed({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),eL=ed({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ek=ev({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),e$=ev({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),eM=ev({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ez=ev({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),eq=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),eF=eq.reduce((e,t,r)=>(e[r]=t,e),[]),eV=eq.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),eB=ep({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=eF[t],"")},decode:function(e){let t=[];for(let r of e){let e=eV[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});function eH(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,eH.bytes=r-n+1,t}function eK(e,t){var r,n=0,t=t||0,i=0,s=t,o=e.length;do{if(s>=o)throw eK.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return eK.bytes=s-t,n}var eW={encode:eH,decode:eK,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let eG=(e,t,r=0)=>(eW.encode(e,t,r),t),eJ=e=>eW.encodingLength(e),eY=(e,t)=>{let r=t.byteLength,n=eJ(e),i=n+eJ(r),s=new Uint8Array(i+r);return eG(e,s,0),eG(r,s,n),s.set(t,i),new eZ(e,r,t,s)};class eZ{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let eQ=({name:e,code:t,encode:r})=>new eX(e,t,r);class eX{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?eY(this.code,t):t.then(e=>eY(this.code,e))}throw Error("Unknown type, must be binary type")}}let e0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),e1=eQ({name:"sha2-256",code:18,encode:e0("SHA-256")}),e3=eQ({name:"sha2-512",code:19,encode:e0("SHA-512")}),e5=e=>eY(0,es(e)),e8={code:0,name:"identity",encode:es,digest:e5},e2="raw",e6=85,e4=e=>es(e),e9=e=>es(e),e7=new TextEncoder,te=new TextDecoder,tt="json",tr=512,tn=e=>e7.encode(JSON.stringify(e)),ti=e=>JSON.parse(te.decode(e));class ts{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:td,byteLength:td,code:tp,version:tp,multihash:tp,bytes:tp,_baseCache:td,asCID:td})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==tc)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==tl)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return ts.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return ts.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Digest.equals(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:n}=this;return 0===r?ta(t,n,e||base58btc.encoder):tu(t,n,e||base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return tg(/^0\.0/,ty),!!(e&&(e[tf]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof ts)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new ts(t,r,n,i||th(t,r,n.bytes))}if(null==e||!0!==e[tf])return null;{let{version:t,multihash:r,code:n}=e,i=Digest.decode(r);return ts.create(t,n,i)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===tc)return new ts(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${tc}) block encoding`);case 1:{let n=th(e,t,r.bytes);return new ts(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return ts.create(0,tc,e)}static createV1(e,t){return ts.create(1,e,t)}static decode(e){let[t,r]=ts.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=ts.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,i,n),o=0===t.version?ts.createV0(s):ts.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=varint.decode(e.subarray(t));return t+=n,r},n=r(),i=tc;if(18===n?(n=0,t=0):1===n&&(i=r()),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,o=r(),a=r(),u=t+a;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u-s,size:u}}static parse(e,t){let[r,n]=to(e,t),i=ts.decode(n);return i._baseCache.set(r,e),i}}let to=(e,t)=>{switch(e[0]){case"Q":{let r=t||base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${e}`)]}case base58btc.prefix:{let r=t||base58btc;return[base58btc.prefix,r.decode(e)]}case base32.prefix:{let r=t||base32;return[base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},ta=(e,t,r)=>{let{prefix:n}=r;if(n!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let i=r.encode(e).slice(1);return t.set(n,i),i}},tu=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let i=r.encode(e);return t.set(n,i),i}},tc=112,tl=18,th=(e,t,r)=>{let n=varint.encodingLength(e),i=n+varint.encodingLength(t),s=new Uint8Array(i+r.byteLength);return varint.encodeTo(e,s,0),varint.encodeTo(t,s,n),s.set(r,i),s},tf=Symbol.for("@ipld/js-cid/CID"),tp={writable:!1,configurable:!1,enumerable:!0},td={writable:!1,enumerable:!1,configurable:!1},tg=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},ty=null,tv={...n,...i,...s,...o,...a,...u,...c,...l,...h,...f};function tm(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}({...p,...d});let tb=tm("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>{let t=new TextEncoder;return t.encode(e.substring(1))}),tD=tm("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=en(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),t_={utf8:tb,"utf-8":tb,hex:tv.base16,latin1:tD,ascii:tD,binary:tD,...tv};function tw(e,t="utf8"){let r=t_[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}function tE(e,t="utf8"){let r=t_[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?er(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}let tI=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t);function tC(e){return tw(tE("string"==typeof e?e:tI(e)||"","utf8"),ee)}function tS(e){let t=tE("K36",et),r="z"+tw(function(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=en(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return er(r)}([t,e]),et);return["did","key",r].join(":")}function tP(e=(0,Q.randomBytes)(32)){return Z._w(e)}async function tO(e,t,r,n,i=(0,X.fromMiliseconds)(Date.now())){var s,o;let a={alg:"EdDSA",typ:"JWT"},u=tS(n.publicKey),c={iss:u,sub:e,aud:t,iat:i,exp:i+r},l=tE([tC((s={header:a,payload:c}).header),tC(s.payload)].join("."),"utf8"),h=Z.Xx(n.secretKey,l);return[tC((o={header:a,payload:c,signature:h}).header),tC(o.payload),tw(o.signature,ee)].join(".")}r(43014);var tx=r(15501),tA=r(512),tN=r(73294),tR=r(57664);function tT(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function tj(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?tT(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function tU(e,t){t||(t=e.reduce((e,t)=>e+t.length,0));let r=tj(t),n=0;for(let t of e)r.set(t,n),n+=t.length;return tT(r)}var tL=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===u;)n++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=s-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=a*o[f]>>>0,o[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var d=new Uint8Array(n+(s-p)),g=n;p!==s;)d[g++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,c=new Uint8Array(o);i!==s;){for(var h=t[i],f=0,p=o-1;(0!==h||f<n)&&-1!==p;p--,f++)h+=256*c[p]>>>0,c[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");n=f,i++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var g=u.repeat(r);d<o;++d)g+=e.charAt(c[d]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let tk=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},t$=e=>new TextEncoder().encode(e),tM=e=>new TextDecoder().decode(e);class tz{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class tq{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return tV(this,e)}}class tF{constructor(e){this.decoders=e}or(e){return tV(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let tV=(e,t)=>new tF({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class tB{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new tz(e,t,r),this.decoder=new tq(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let tH=({name:e,prefix:t,encode:r,decode:n})=>new tB(e,t,r,n),tK=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=tL(r,t);return tH({prefix:e,name:t,encode:n,decode:e=>tk(i(e))})},tW=(e,t,r,n)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let t=0;t<s;++t){let s=i[e[t]];if(void 0===s)throw SyntaxError(`Non-${n} character`);u=u<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw SyntaxError("Unexpected end of data");return o},tG=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},tJ=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>tH({prefix:t,name:e,encode:e=>tG(e,n,r),decode:t=>tW(t,n,r,e)}),tY=tH({prefix:"\x00",name:"identity",encode:e=>tM(e),decode:e=>t$(e)}),tZ=tJ({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),tQ=tJ({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),tX=tK({prefix:"9",name:"base10",alphabet:"0123456789"}),t0=tJ({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),t1=tJ({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),t3=tJ({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),t5=tJ({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),t8=tJ({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),t2=tJ({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),t6=tJ({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),t4=tJ({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),t9=tJ({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),t7=tJ({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),re=tJ({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),rt=tK({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),rr=tK({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),rn=tK({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ri=tK({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),rs=tJ({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ro=tJ({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ra=tJ({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ru=tJ({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),rc=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),rl=rc.reduce((e,t,r)=>(e[r]=t,e),[]),rh=rc.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),rf=tH({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=rl[t],"")},decode:function(e){let t=[];for(let r of e){let e=rh[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});function rp(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,rp.bytes=r-n+1,t}function rd(e,t){var r,n=0,t=t||0,i=0,s=t,o=e.length;do{if(s>=o)throw rd.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return rd.bytes=s-t,n}var rg={encode:rp,decode:rd,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let ry=(e,t,r=0)=>(rg.encode(e,t,r),t),rv=e=>rg.encodingLength(e),rm=(e,t)=>{let r=t.byteLength,n=rv(e),i=n+rv(r),s=new Uint8Array(i+r);return ry(e,s,0),ry(r,s,n),s.set(t,i),new rb(e,r,t,s)};class rb{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let rD=({name:e,code:t,encode:r})=>new r_(e,t,r);class r_{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?rm(this.code,t):t.then(e=>rm(this.code,e))}throw Error("Unknown type, must be binary type")}}let rw=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),rE=rD({name:"sha2-256",code:18,encode:rw("SHA-256")}),rI=rD({name:"sha2-512",code:19,encode:rw("SHA-512")}),rC=e=>rm(0,tk(e)),rS={code:0,name:"identity",encode:tk,digest:rC},rP="raw",rO=85,rx=e=>tk(e),rA=e=>tk(e),rN=new TextEncoder,rR=new TextDecoder,rT="json",rj=512,rU=e=>rN.encode(JSON.stringify(e)),rL=e=>JSON.parse(rR.decode(e));class rk{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this.byteOffset=n.byteOffset,this.byteLength=n.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:rK,byteLength:rK,code:rH,version:rH,multihash:rH,bytes:rH,_baseCache:rK,asCID:rK})}toV0(){if(0===this.version)return this;{let{code:e,multihash:t}=this;if(e!==rq)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==rF)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return rk.createV0(t)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=Digest.create(e,t);return rk.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Digest.equals(this.multihash,e.multihash)}toString(e){let{bytes:t,version:r,_baseCache:n}=this;return 0===r?rM(t,n,e||base58btc.encoder):rz(t,n,e||base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return rW(/^0\.0/,rG),!!(e&&(e[rB]||e.asCID===e))}get toBaseEncodedString(){throw Error("Deprecated, use .toString()")}get codec(){throw Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw Error('"multibaseName" property is deprecated')}get prefix(){throw Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof rk)return e;if(null!=e&&e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new rk(t,r,n,i||rV(t,r,n.bytes))}if(null==e||!0!==e[rB])return null;{let{version:t,multihash:r,code:n}=e,i=Digest.decode(r);return rk.create(t,n,i)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");switch(e){case 0:if(t===rq)return new rk(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${rq}) block encoding`);case 1:{let n=rV(e,t,r.bytes);return new rk(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return rk.create(0,rq,e)}static createV1(e,t){return rk.create(1,e,t)}static decode(e){let[t,r]=rk.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=rk.inspectBytes(e),r=t.size-t.multihashSize,n=coerce(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new Digest.Digest(t.multihashCode,t.digestSize,i,n),o=0===t.version?rk.createV0(s):rk.createV1(t.codec,s);return[o,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=varint.decode(e.subarray(t));return t+=n,r},n=r(),i=rq;if(18===n?(n=0,t=0):1===n&&(i=r()),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,o=r(),a=r(),u=t+a;return{version:n,codec:i,multihashCode:o,digestSize:a,multihashSize:u-s,size:u}}static parse(e,t){let[r,n]=r$(e,t),i=rk.decode(n);return i._baseCache.set(r,e),i}}let r$=(e,t)=>{switch(e[0]){case"Q":{let r=t||base58btc;return[base58btc.prefix,r.decode(`${base58btc.prefix}${e}`)]}case base58btc.prefix:{let r=t||base58btc;return[base58btc.prefix,r.decode(e)]}case base32.prefix:{let r=t||base32;return[base32.prefix,r.decode(e)]}default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},rM=(e,t,r)=>{let{prefix:n}=r;if(n!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let i=r.encode(e).slice(1);return t.set(n,i),i}},rz=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let i=r.encode(e);return t.set(n,i),i}},rq=112,rF=18,rV=(e,t,r)=>{let n=varint.encodingLength(e),i=n+varint.encodingLength(t),s=new Uint8Array(i+r.byteLength);return varint.encodeTo(e,s,0),varint.encodeTo(t,s,n),s.set(r,i),s},rB=Symbol.for("@ipld/js-cid/CID"),rH={writable:!1,configurable:!1,enumerable:!0},rK={writable:!1,enumerable:!1,configurable:!1},rW=(e,t)=>{if(e.test("0.0.0-dev"))console.warn(t);else throw Error(t)},rG=null,rJ={...v,...m,...b,...D,..._,...w,...E,...I,...C,...S};function rY(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}({...P,...O});let rZ=rY("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>{let t=new TextEncoder;return t.encode(e.substring(1))}),rQ=rY("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=tj(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),rX={utf8:rZ,"utf-8":rZ,hex:rJ.base16,latin1:rQ,ascii:rQ,binary:rQ,...rJ};function r0(e,t="utf8"){let r=rX[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?tT(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function r1(e,t="utf8"){let r=rX[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var r3=r(34155),r5=function(e,t,r){if(r||2==arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},r8=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},r2=function(e){this.version=e,this.type="node",this.name="node",this.os=r3.platform},r6=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},r4=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},r9=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},r7=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ne=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],nt=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function nr(e){var t=""!==e&&ne.reduce(function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]},!1);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new r4;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=r5(r5([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length),!0)):i=[];var s=i.join("."),o=function(e){for(var t=0,r=nt.length;t<r;t++){var n=nt[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=r7.exec(e);return a&&a[1]?new r6(r,s,o,a[1]):new r8(r,s,o)}var nn=r(3382),ni=r(99982),ns=r(94543),no=r(60075),na=r(34155);function nu(e,t){return e.includes(":")?[e]:t.chains||[]}let nc="base10",nl="base16",nh="base64pad",nf="utf8";function np(){let e=(0,Q.randomBytes)(32);return r1(e,nl)}function nd(e){let t=(0,tN.vp)(r0(e,nf));return r1(t,nl)}function ng(e){return Number(r1(e,nc))}function ny(e){let t=r0(e,nh),r=t.slice(0,1);if(1===ng(r)){let e=t.slice(1,33),n=t.slice(33,45),i=t.slice(45);return{type:r,sealed:i,iv:n,senderPublicKey:e}}let n=t.slice(1,13),i=t.slice(13);return{type:r,sealed:i,iv:n}}function nv(e){let t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function nm(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}var nb=Object.defineProperty,nD=Object.getOwnPropertySymbols,n_=Object.prototype.hasOwnProperty,nw=Object.prototype.propertyIsEnumerable,nE=(e,t,r)=>t in e?nb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nI=(e,t)=>{for(var r in t||(t={}))n_.call(t,r)&&nE(e,r,t[r]);if(nD)for(var r of nD(t))nw.call(t,r)&&nE(e,r,t[r]);return e};let nC={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"};function nS(){return"u">typeof na&&"u">typeof na.versions&&"u">typeof na.versions.node}function nP(){return!(0,nn.getDocument)()&&!!(0,nn.getNavigator)()&&"ReactNative"===navigator.product}function nO(){return!nS()&&!!(0,nn.getNavigator)()}function nx(){return nP()?nC.reactNative:nS()?nC.node:nO()?nC.browser:nC.unknown}function nA(e,t){return e.filter(e=>t.includes(e)).length===e.length}function nN(e){return Object.fromEntries(e.entries())}function nR(e){return new Map(Object.entries(e))}function nT(e=X.FIVE_MINUTES,t){let r,n,i;let s=(0,X.toMiliseconds)(e||X.FIVE_MINUTES);return{resolve:e=>{i&&r&&(clearTimeout(i),r(e))},reject:e=>{i&&n&&(clearTimeout(i),n(e))},done:()=>new Promise((e,o)=>{i=setTimeout(()=>{o(Error(t))},s),r=e,n=o})}}function nj(e,t,r){return new Promise(async(n,i)=>{let s=setTimeout(()=>i(Error(r)),t);try{let t=await e;n(t)}catch(e){i(e)}clearTimeout(s)})}function nU(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw Error(`Unknown expirer target type: ${e}`)}function nL(e){let[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else if("id"===t&&Number.isInteger(Number(r)))n.id=Number(r);else throw Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return n}function nk(e,t){return(0,X.fromMiliseconds)((t||Date.now())+(0,X.toMiliseconds)(e))}function n$(e){return Date.now()>=(0,X.toMiliseconds)(e)}function nM(e,t){return`${e}${t?`:${t}`:""}`}function nz(e=[],t=[]){return[...new Set([...e,...t])]}async function nq({id:e,topic:t,wcDeepLink:n}){try{if(!n)return;let i="string"==typeof n?JSON.parse(n):n,s=i?.href;if("string"!=typeof s)return;s.endsWith("/")&&(s=s.slice(0,-1));let o=`${s}/wc?requestId=${e}&sessionTopic=${t}`,a=nx();a===nC.browser?o.startsWith("https://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):a===nC.reactNative&&"u">typeof(null==r.g?void 0:r.g.Linking)&&await r.g.Linking.openURL(o)}catch(e){console.error(e)}}function nF(e){return e?.relay||{protocol:"irn"}}function nV(e){let t=no.RELAY_JSONRPC[e];if(typeof t>"u")throw Error(`Relay Protocol not supported: ${e}`);return t}var nB=Object.defineProperty,nH=Object.getOwnPropertySymbols,nK=Object.prototype.hasOwnProperty,nW=Object.prototype.propertyIsEnumerable,nG=(e,t,r)=>t in e?nB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nJ=(e,t)=>{for(var r in t||(t={}))nK.call(t,r)&&nG(e,r,t[r]);if(nH)for(var r of nH(t))nW.call(t,r)&&nG(e,r,t[r]);return e};function nY(e){let t=[];return e.forEach(e=>{let[r,n]=e.split(":");t.push(`${r}:${n}`)}),t}function nZ(e){return e.includes(":")}function nQ(e){return nZ(e)?e.split(":")[0]:e}Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;let nX={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},n0={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function n1(e,t){let{message:r,code:n}=n0[e];return{message:t?`${r} ${t}`:r,code:n}}function n3(e,t){let{message:r,code:n}=nX[e];return{message:t?`${r} ${t}`:r,code:n}}function n5(e,t){return!!Array.isArray(e)&&(!("u">typeof t)||!e.length||e.every(t))}function n8(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function n2(e){return typeof e>"u"}function n6(e,t){return!!(t&&n2(e))||"string"==typeof e&&!!e.trim().length}function n4(e,t){return!!(t&&n2(e))||"number"==typeof e&&!isNaN(e)}function n9(e){return!!(n6(e,!1)&&e.includes(":"))&&2===e.split(":").length}function n7(e){let t=!0;return n5(e)?e.length&&(t=e.every(e=>n6(e,!1))):t=!1,t}function ie(e,t){let r=null;return Object.values(e).forEach(e=>{var n;let i;if(r)return;let s=(n=`${t}, namespace`,i=null,n7(e?.methods)?n7(e?.events)||(i=n3("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):i=n3("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),i);s&&(r=s)}),r}function it(e,t){let r=null;if(e&&n8(e)){let n;let i=ie(e,t);i&&(r=i);let s=(n=null,Object.values(e).forEach(e=>{var r,i;let s;if(n)return;let o=(r=e?.accounts,i=`${t} namespace`,s=null,n5(r)?r.forEach(e=>{s||function(e){if(n6(e,!1)&&e.includes(":")){let t=e.split(":");if(3===t.length){let e=t[0]+":"+t[1];return!!t[2]&&n9(e)}}return!1}(e)||(s=n3("UNSUPPORTED_ACCOUNTS",`${i}, account ${e} should be a string and conform to "namespace:chainId:address" format`))}):s=n3("UNSUPPORTED_ACCOUNTS",`${i}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),s);o&&(n=o)}),n);s&&(r=s)}else r=n1("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function ir(e){return n6(e.protocol,!0)}function ii(e){return"u">typeof e}function is(e,t){return!(!n9(t)||!(function(e){let t=[];return Object.values(e).forEach(e=>{t.push(...nY(e.accounts))}),t})(e).includes(t))}function io(e,t,r){let n=null,i=function(e){let t={};return Object.keys(e).forEach(r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach(n=>{t[n]={methods:e[r].methods,events:e[r].events}})}),t}(e),s=function(e){let t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{let n=nY(e[r].accounts);n?.forEach(n=>{t[n]={accounts:e[r].accounts.filter(e=>e.includes(`${n}:`)),methods:e[r].methods,events:e[r].events}})}}),t}(t),o=Object.keys(i),a=Object.keys(s),u=ia(Object.keys(e)),c=ia(Object.keys(t)),l=u.filter(e=>!c.includes(e));return l.length&&(n=n1("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${l.toString()}
      Received: ${Object.keys(t).toString()}`)),nA(o,a)||(n=n1("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${o.toString()}
      Approved: ${a.toString()}`)),Object.keys(t).forEach(e=>{if(!e.includes(":")||n)return;let i=nY(t[e].accounts);i.includes(e)||(n=n1("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}
        Required: ${e}
        Approved: ${i.toString()}`))}),o.forEach(e=>{n||(nA(i[e].methods,s[e].methods)?nA(i[e].events,s[e].events)||(n=n1("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=n1("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))}),n}function ia(e){return[...new Set(e.map(e=>e.includes(":")?e.split(":")[0]:e))]}var iu=r(46160),ic=r(56186);let il=e=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString()+"n":t),ih=e=>{let t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,(e,t)=>{let r="string"==typeof t&&t.match(/^\d+n$/);return r?BigInt(t.substring(0,t.length-1)):t})},ip=()=>"undefined"!=typeof window,id=e=>e.split("?")[0],ig=void 0!==r.g&&void 0!==r.g.WebSocket?r.g.WebSocket:"undefined"!=typeof window&&void 0!==window.WebSocket?window.WebSocket:r(57026);var iy=class{constructor(e){if(this.url=e,this.events=new N.EventEmitter,this.registering=!1,!(0,ic.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return void 0!==this.socket}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,t)=>{if(void 0===this.socket){t(Error("Connection already closed"));return}this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close()})}async send(e,t){void 0===this.socket&&(this.socket=await this.register());try{this.socket.send("string"==typeof e?e:il(e)||"")}catch(t){this.onError(e.id,t)}}register(e=this.url){if(!(0,ic.isWsUrl)(e))throw Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){let e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((e,t)=>{this.events.once("register_error",e=>{this.resetMaxListeners(),t(e)}),this.events.once("open",()=>{if(this.resetMaxListeners(),void 0===this.socket)return t(Error("WebSocket connection is missing or invalid"));e(this.socket)})})}return this.url=e,this.registering=!0,new Promise((t,r)=>{let n=(0,ic.isReactNative)()?void 0:{rejectUnauthorized:!(0,ic.isLocalhostUrl)(e)},i=new ig(e,[],n);ip()?i.onerror=e=>{r(this.emitError(e.error))}:i.on("error",e=>{r(this.emitError(e))}),i.onopen=()=>{this.onOpen(i),t(i)}})}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(void 0===e.data)return;let t="string"==typeof e.data?function(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return ih(e)}catch(t){return e}}(e.data):e.data;this.events.emit("payload",t)}onError(e,t){let r=this.parseError(t),n=r.message||r.toString(),i=(0,ic.formatJsonRpcError)(e,n);this.events.emit("payload",i)}parseError(e,t=this.url){return(0,ic.parseConnectionError)(e,id(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){let t=this.parseError(Error((null==e?void 0:e.message)||`WebSocket connection failed for host: ${id(this.url)}`));return this.events.emit("register_error",t),t}},iv=r(72307),im=r.n(iv),ib=r(34155),iD=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw TypeError(s+" is ambiguous");r[o]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===u;)n++,t++;for(var s=(e.length-t)*c+1>>>0,o=new Uint8Array(s);e[t];){var l=r[e.charCodeAt(t)];if(255===l)return;for(var h=0,f=s-1;(0!==l||h<i)&&-1!==f;f--,h++)l+=a*o[f]>>>0,o[f]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var d=new Uint8Array(n+(s-p)),g=n;p!==s;)d[g++]=o[p++];return d}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*l+1>>>0,c=new Uint8Array(o);i!==s;){for(var h=t[i],f=0,p=o-1;(0!==h||f<n)&&-1!==p;p--,f++)h+=256*c[p]>>>0,c[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw Error("Non-zero carry");n=f,i++}for(var d=o-n;d!==o&&0===c[d];)d++;for(var g=u.repeat(r);d<o;++d)g+=e.charAt(c[d]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw Error(`Non-${t} character`)}}};let i_=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},iw=e=>new TextEncoder().encode(e),iE=e=>new TextDecoder().decode(e);class iI{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class iC{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return iP(this,e)}}class iS{constructor(e){this.decoders=e}or(e){return iP(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let iP=(e,t)=>new iS({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class iO{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new iI(e,t,r),this.decoder=new iC(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let ix=({name:e,prefix:t,encode:r,decode:n})=>new iO(e,t,r,n),iA=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=iD(r,t);return ix({prefix:e,name:t,encode:n,decode:e=>i_(i(e))})},iN=(e,t,r,n)=>{let i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let t=0;t<s;++t){let s=i[e[t]];if(void 0===s)throw SyntaxError(`Non-${n} character`);u=u<<r|s,(a+=r)>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw SyntaxError("Unexpected end of data");return o},iR=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},iT=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>ix({prefix:t,name:e,encode:e=>iR(e,n,r),decode:t=>iN(t,n,r,e)}),ij=ix({prefix:"\x00",name:"identity",encode:e=>iE(e),decode:e=>iw(e)});var iU=Object.freeze({__proto__:null,identity:ij});let iL=iT({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ik=Object.freeze({__proto__:null,base2:iL});let i$=iT({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var iM=Object.freeze({__proto__:null,base8:i$});let iz=iA({prefix:"9",name:"base10",alphabet:"0123456789"});var iq=Object.freeze({__proto__:null,base10:iz});let iF=iT({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iV=iT({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var iB=Object.freeze({__proto__:null,base16:iF,base16upper:iV});let iH=iT({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iK=iT({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iW=iT({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iG=iT({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),iJ=iT({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),iY=iT({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),iZ=iT({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),iQ=iT({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),iX=iT({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var i0=Object.freeze({__proto__:null,base32:iH,base32upper:iK,base32pad:iW,base32padupper:iG,base32hex:iJ,base32hexupper:iY,base32hexpad:iZ,base32hexpadupper:iQ,base32z:iX});let i1=iA({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i3=iA({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var i5=Object.freeze({__proto__:null,base36:i1,base36upper:i3});let i8=iA({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i2=iA({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var i6=Object.freeze({__proto__:null,base58btc:i8,base58flickr:i2});let i4=iT({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),i9=iT({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),i7=iT({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),se=iT({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var st=Object.freeze({__proto__:null,base64:i4,base64pad:i9,base64url:i7,base64urlpad:se});let sr=Array.from("\uD83D\uDE80\uD83E\uDE90☄\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09☀\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02❤\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09☺\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E✌✨\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D❣\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33✋\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13⭐✅\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6✔\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90☹\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20☝\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B⚽\uD83E\uDD19☕\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81⚡\uD83C\uDF1E\uD83C\uDF88❌✊\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C✈\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74▶➡❓\uD83D\uDC8E\uD83D\uDCB8⬇\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A⚠\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37☎\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51❄\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),sn=sr.reduce((e,t,r)=>(e[r]=t,e),[]),si=sr.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),ss=ix({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=sn[t],"")},decode:function(e){let t=[];for(let r of e){let e=si[r.codePointAt(0)];if(void 0===e)throw Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var so=Object.freeze({__proto__:null,base256emoji:ss});function sa(e,t,r){t=t||[],r=r||0;for(var n=r;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,sa.bytes=r-n+1,t}function su(e,t){var r,n=0,t=t||0,i=0,s=t,o=e.length;do{if(s>=o)throw su.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return su.bytes=s-t,n}var sc={encode:sa,decode:su,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let sl=(e,t,r=0)=>(sc.encode(e,t,r),t),sh=e=>sc.encodingLength(e),sf=(e,t)=>{let r=t.byteLength,n=sh(e),i=n+sh(r),s=new Uint8Array(i+r);return sl(e,s,0),sl(r,s,n),s.set(t,i),new sp(e,r,t,s)};class sp{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let sd=({name:e,code:t,encode:r})=>new sg(e,t,r);class sg{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?sf(this.code,t):t.then(e=>sf(this.code,e))}throw Error("Unknown type, must be binary type")}}let sy=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),sv=sd({name:"sha2-256",code:18,encode:sy("SHA-256")}),sm=sd({name:"sha2-512",code:19,encode:sy("SHA-512")});var sb=Object.freeze({__proto__:null,sha256:sv,sha512:sm});let sD=e=>sf(0,i_(e));var s_=Object.freeze({__proto__:null,identity:{code:0,name:"identity",encode:i_,digest:sD}});new TextEncoder,new TextDecoder;let sw={...iU,...ik,...iM,...iq,...iB,...i0,...i5,...i6,...st,...so};function sE(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function sI(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}({...sb,...s_});let sC=sI("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),sS=sI("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?sE(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),sP={utf8:sC,"utf-8":sC,hex:sw.base16,latin1:sS,ascii:sS,binary:sS,...sw},sO="core",sx=`wc@2:${sO}:`,sA={name:sO,logger:"error"},sN={database:":memory:"},sR="client_ed25519_seed",sT=X.ONE_DAY,sj=X.SIX_HOURS,sU="wss://relay.walletconnect.com",sL="wss://relay.walletconnect.org",sk={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},s$={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},sM=X.ONE_SECOND/2,sz={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},sq=1e3*X.FIVE_SECONDS,sF={wc_pairingDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:X.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:X.ONE_DAY,prompt:!1,tag:0},res:{ttl:X.ONE_DAY,prompt:!1,tag:0}}},sV={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},sB={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},sH="verify-api",sK="https://verify.walletconnect.com";class sW{constructor(e,t){this.core=e,this.logger=t,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=sx,this.init=async()=>{if(!this.initialized){let e=await this.getKeyChain();"u">typeof e&&(this.keychain=e),this.initialized=!0}},this.has=e=>(this.isInitialized(),this.keychain.has(e)),this.set=async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()},this.get=e=>{this.isInitialized();let t=this.keychain.get(e);if(typeof t>"u"){let{message:t}=n1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t},this.del=async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()},this.core=e,this.logger=(0,L.generateChildLogger)(t,this.name)}get context(){return(0,L.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,nN(e))}async getKeyChain(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?nR(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}}class sG{constructor(e,t,r){this.core=e,this.logger=t,this.name="crypto",this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=e=>(this.isInitialized(),this.keychain.has(e)),this.getClientId=async()=>{this.isInitialized();let e=await this.getClientSeed(),t=tP(e);return tS(t.publicKey)},this.generateKeyPair=()=>{this.isInitialized();let e=function(){let e=tR.Au();return{privateKey:r1(e.secretKey,nl),publicKey:r1(e.publicKey,nl)}}();return this.setPrivateKey(e.publicKey,e.privateKey)},this.signJWT=async e=>{this.isInitialized();let t=await this.getClientSeed(),r=tP(t),n=np();return await tO(n,e,sT,r)},this.generateSharedKey=(e,t,r)=>{this.isInitialized();let n=this.getPrivateKey(e),i=function(e,t){let r=tR.gi(r0(e,nl),r0(t,nl)),n=new tA.t(tN.mE,r).expand(32);return r1(n,nl)}(n,t);return this.setSymKey(i,r)},this.setSymKey=async(e,t)=>{this.isInitialized();let r=t||function(e){let t=(0,tN.vp)(r0(e,nl));return r1(t,nl)}(e);return await this.keychain.set(r,e),r},this.deleteKeyPair=async e=>{this.isInitialized(),await this.keychain.del(e)},this.deleteSymKey=async e=>{this.isInitialized(),await this.keychain.del(e)},this.encode=async(e,t,r)=>{this.isInitialized();let n=nv(r),i="string"==typeof t?t:J(t)||"";if(nm(n)){let t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}let s=this.getSymKey(e),{type:o,senderPublicKey:a}=n;return function(e){let t=r0(`${"u">typeof e.type?e.type:0}`,nc);if(1===ng(t)&&typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");let r="u">typeof e.senderPublicKey?r0(e.senderPublicKey,nl):void 0,n="u">typeof e.iv?r0(e.iv,nl):(0,Q.randomBytes)(12),i=new tx.OK(r0(e.symKey,nl)).seal(n,r0(e.message,nf));return function(e){if(1===ng(e.type)){if(typeof e.senderPublicKey>"u")throw Error("Missing sender public key for type 1 envelope");return r1(tU([e.type,e.senderPublicKey,e.iv,e.sealed]),nh)}return r1(tU([e.type,e.iv,e.sealed]),nh)}({type:t,sealed:i,iv:n,senderPublicKey:r})}({type:o,symKey:s,message:i,senderPublicKey:a})},this.decode=async(e,t,r)=>{this.isInitialized();let n=function(e,t){let r=ny(e);return nv({type:ng(r.type),senderPublicKey:"u">typeof r.senderPublicKey?r1(r.senderPublicKey,nl):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(nm(n)){let t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}let i=this.getSymKey(e),s=function(e){let t=new tx.OK(r0(e.symKey,nl)),{sealed:r,iv:n}=ny(e.encoded),i=t.open(n,r);if(null===i)throw Error("Failed to decrypt");return r1(i,nf)}({symKey:i,encoded:t});return function(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return Y(e)}catch(t){return e}}(s)},this.getPayloadType=e=>{let t=ny(e);return ng(t.type)},this.getPayloadSenderPublicKey=e=>{let t=ny(e);return t.senderPublicKey?r1(t.senderPublicKey,nl):void 0},this.core=e,this.logger=(0,L.generateChildLogger)(t,this.name),this.keychain=r||new sW(this.core,this.logger)}get context(){return(0,L.getLoggerContext)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(sR)}catch{e=np(),await this.keychain.set(sR,e)}return function(e,t="utf8"){let r=sP[t];if(!r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?sE(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}}class sJ extends z{constructor(e,t){super(e,t),this.logger=e,this.core=t,this.messages=new Map,this.name="messages",this.version="0.3",this.initialized=!1,this.storagePrefix=sx,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{let e=await this.getRelayerMessages();"u">typeof e&&(this.messages=e),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}},this.set=async(e,t)=>{this.isInitialized();let r=nd(t),n=this.messages.get(e);return typeof n>"u"&&(n={}),"u">typeof n[r]||(n[r]=t,this.messages.set(e,n),await this.persist()),r},this.get=e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t},this.has=(e,t)=>{this.isInitialized();let r=this.get(e),n=nd(t);return"u">typeof r[n]},this.del=async e=>{this.isInitialized(),this.messages.delete(e),await this.persist()},this.logger=(0,L.generateChildLogger)(e,this.name),this.core=t}get context(){return(0,L.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,nN(e))}async getRelayerMessages(){let e=await this.core.storage.getItem(this.storageKey);return"u">typeof e?nR(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}}class sY extends q{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.events=new N.EventEmitter,this.name="publisher",this.queue=new Map,this.publishTimeout=(0,X.toMiliseconds)(X.TEN_SECONDS),this.queueTimeout=(0,X.toMiliseconds)(X.FIVE_SECONDS),this.needsTransportRestart=!1,this.publish=async(e,t,r)=>{this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});try{let n=r?.ttl||sj,i=nF(r),s=r?.prompt||!1,o=r?.tag||0,a=r?.id||(0,ic.getBigIntRpcId)().toString(),u={topic:e,message:t,opts:{ttl:n,relay:i,prompt:s,tag:o,id:a}},c=setTimeout(()=>this.queue.set(a,u),this.queueTimeout);try{await await nj(this.rpcPublish(e,t,n,i,s,o,a),this.publishTimeout),clearTimeout(c),this.relayer.events.emit(sk.publish,u)}catch{this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0;return}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(e),e}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.relayer=e,this.logger=(0,L.generateChildLogger)(t,this.name),this.registerEventListeners()}get context(){return(0,L.getLoggerContext)(this.logger)}rpcPublish(e,t,r,n,i,s,o){var a,u,c,l;let h={method:nV(n.protocol).publish,params:{topic:e,message:t,ttl:r,prompt:i,tag:s},id:o};return n2(null==(a=h.params)?void 0:a.prompt)&&(null==(u=h.params)||delete u.prompt),n2(null==(c=h.params)?void 0:c.tag)&&(null==(l=h.params)||delete l.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:h}),this.relayer.request(h)}onPublish(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{let{topic:t,message:r,opts:n}=e;await this.publish(t,r,n)})}registerEventListeners(){this.relayer.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(sk.connection_stalled);return}this.checkQueue()}),this.relayer.on(sk.message_ack,e=>{this.onPublish(e.id.toString())})}}class sZ{constructor(){this.map=new Map,this.set=(e,t)=>{let r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])},this.get=e=>this.map.get(e)||[],this.exists=(e,t)=>this.get(e).includes(t),this.delete=(e,t)=>{if(typeof t>"u"){this.map.delete(e);return}if(!this.map.has(e))return;let r=this.get(e);if(!this.exists(e,t))return;let n=r.filter(e=>e!==t);if(!n.length){this.map.delete(e);return}this.map.set(e,n)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var sQ=Object.defineProperty,sX=Object.defineProperties,s0=Object.getOwnPropertyDescriptors,s1=Object.getOwnPropertySymbols,s3=Object.prototype.hasOwnProperty,s5=Object.prototype.propertyIsEnumerable,s8=(e,t,r)=>t in e?sQ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,s2=(e,t)=>{for(var r in t||(t={}))s3.call(t,r)&&s8(e,r,t[r]);if(s1)for(var r of s1(t))s5.call(t,r)&&s8(e,r,t[r]);return e},s6=(e,t)=>sX(e,s0(t));class s4 extends B{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,this.subscriptions=new Map,this.topicMap=new sZ,this.events=new N.EventEmitter,this.name="subscription",this.version="0.3",this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=sx,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restart(),this.registerEventListeners(),this.onEnable(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{let r=nF(t),n={topic:e,relay:r};this.pending.set(e,n);let i=await this.rpcSubscribe(e,r);return this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}}),i}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}},this.unsubscribe=async(e,t)=>{await this.restartToComplete(),this.isInitialized(),"u">typeof t?.id?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)},this.isSubscribed=async e=>!!this.topics.includes(e)||await new Promise((t,r)=>{let n=new X.Watch;n.start(this.pendingSubscriptionWatchLabel);let i=setInterval(()=>{!this.pending.has(e)&&this.topics.includes(e)&&(clearInterval(i),n.stop(this.pendingSubscriptionWatchLabel),t(!0)),n.elapsed(this.pendingSubscriptionWatchLabel)>=sq&&(clearInterval(i),n.stop(this.pendingSubscriptionWatchLabel),r(Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,L.generateChildLogger)(t,this.name),this.clientId=""}get context(){return(0,L.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){let r=this.topicMap.get(e);await Promise.all(r.map(async r=>await this.unsubscribeById(e,r,t)))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{let n=nF(r);await this.rpcUnsubscribe(e,t,n);let i=n3("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t){let r={method:nV(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{await await nj(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(sk.connection_stalled)}return nd(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;let t=e[0].relay,r={method:nV(t.protocol).batchSubscribe,params:{topics:e.map(e=>e.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r});try{return await await nj(this.relayer.request(r),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(sk.connection_stalled)}}rpcUnsubscribe(e,t,r){let n={method:nV(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,s6(s2({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach(e=>{this.setSubscription(e.id,s2({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t))}addSubscription(e,t){this.subscriptions.set(e,s2({},t)),this.topicMap.set(t.topic,e),this.events.emit(sz.created,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});let t=this.subscriptions.get(e);if(!t){let{message:t}=n1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});let r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(sz.deleted,s6(s2({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(sz.sync)}async reset(){if(this.cached.length){let e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let t=0;t<e;t++){let e=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(e)}}this.events.emit(sz.resubscribed)}async restore(){try{let e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){let{message:e}=n1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;let t=await this.rpcBatchSubscribe(e);n5(t)&&this.onBatchSubscribe(t.map((t,r)=>s6(s2({},e[r]),{id:t})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(this.relayer.transportExplicitlyClosed)return;let e=[];this.pending.forEach(t=>{e.push(t)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(sk.connect,async()=>{await this.onConnect()}),this.relayer.on(sk.disconnect,()=>{this.onDisconnect()}),this.events.on(sz.created,async e=>{let t=sz.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}),this.events.on(sz.deleted,async e=>{let t=sz.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{let t=setInterval(()=>{this.restartInProgress||(clearInterval(t),e())},this.pollingInterval)})}}var s9=Object.defineProperty,s7=Object.getOwnPropertySymbols,oe=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,or=(e,t,r)=>t in e?s9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,on=(e,t)=>{for(var r in t||(t={}))oe.call(t,r)&&or(e,r,t[r]);if(s7)for(var r of s7(t))ot.call(t,r)&&or(e,r,t[r]);return e};class oi extends F{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new N.EventEmitter,this.name="relayer",this.transportExplicitlyClosed=!1,this.initialized=!1,this.reconnecting=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.request=async e=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(e)}catch(e){throw this.logger.debug("Failed to Publish Request"),this.logger.error(e),e}},this.core=e.core,this.logger="u">typeof e.logger&&"string"!=typeof e.logger?(0,L.generateChildLogger)(e.logger,this.name):(0,L.pino)((0,L.getDefaultLoggerOptions)({level:e.logger||"error"})),this.messages=new sJ(this.logger,e.core),this.subscriber=new s4(this,this.logger),this.publisher=new sY(this,this.logger),this.relayUrl=e?.relayUrl||sU,this.projectId=e.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${sL}...`),await this.restartTransport(sL)}this.registerEventListeners(),this.initialized=!0,setTimeout(async()=>{0===this.subscriber.topics.length&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},1e4)}get context(){return(0,L.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now()})}async subscribe(e,t){var r;this.isInitialized();let n=(null==(r=this.subscriber.topicMap.get(e))?void 0:r[0])||"";return n||(await Promise.all([new Promise(t=>{this.subscriber.once(sz.created,r=>{r.topic===e&&t()})}),new Promise(async r=>{n=await this.subscriber.subscribe(e,t),r()})]),n)}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportClose(){this.transportExplicitlyClosed=!0,this.connected&&(await this.provider.disconnect(),this.events.emit(sk.transport_closed))}async transportOpen(e){if(this.transportExplicitlyClosed=!1,!this.reconnecting){this.relayUrl=e||this.relayUrl,this.reconnecting=!0;try{await Promise.all([new Promise(e=>{this.initialized||e(),this.subscriber.once(sz.resubscribed,()=>{e()})}),await Promise.race([new Promise(async(e,t)=>{await nj(this.provider.connect(),5e3,`Socket stalled when trying to connect to ${this.relayUrl}`).catch(e=>t(e)).then(()=>e()).finally(()=>this.removeListener(sk.transport_closed,this.rejectTransportOpen))}),new Promise(e=>this.once(sk.transport_closed,this.rejectTransportOpen))])])}catch(e){if(this.logger.error(e),!this.isConnectionStalled(e.message))throw e;this.events.emit(sk.transport_closed)}finally{this.reconnecting=!1}}}async restartTransport(e){this.transportExplicitlyClosed||this.reconnecting||(this.relayUrl=e||this.relayUrl,this.connected&&await Promise.all([new Promise(e=>{this.provider.once(s$.disconnect,()=>{e()})}),this.transportClose()]),await this.createProvider(),await this.transportOpen())}isConnectionStalled(e){return this.staleConnectionErrors.some(t=>e.includes(t))}rejectTransportOpen(){throw Error("Attempt to connect to relay via `transportOpen` has stalled. Retrying...")}async createProvider(){let e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new iu.r(new iy(function({protocol:e,version:t,relayUrl:n,sdkVersion:i,auth:s,projectId:o,useOnCloseEvent:a}){var u;let c;let l=n.split("?"),h=function(e,t,n){let i=function(){var e;if(nx()===nC.reactNative&&"u">typeof r.g&&"u">typeof(null==r.g?void 0:r.g.Platform)){let{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}let t=e?nr(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new r9:"undefined"!=typeof navigator?nr(navigator.userAgent):void 0!==r3&&r3.version?new r2(r3.version.slice(1)):null;if(null===t)return"unknown";let n=t.os?t.os.replace(" ","").toLowerCase():"unknown";return"browser"===t.type?[n,t.name,t.version].join("-"):[n,t.version].join("-")}(),s=function(){var e;let t=nx();return t===nC.browser?[t,(null==(e=(0,nn.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),["js",n].join("-"),i,s].join("/")}(e,t,i),f=(u=l[1]||"",c=nI(nI({},c=ns.parse(u)),{auth:s,ua:h,projectId:o,useOnCloseEvent:a||void 0}),u=ns.stringify(c));return l[0]+"?"+f}({sdkVersion:"2.9.0",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(e){let{topic:t,message:r}=e;await this.messages.set(t,r)}async shouldIgnoreMessageEvent(e){let{topic:t,message:r}=e;return!await this.subscriber.isSubscribed(t)||this.messages.has(t,r)}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),(0,ic.isJsonRpcRequest)(e)){if(!e.method.endsWith("_subscription"))return;let t=e.params,{topic:r,message:n,publishedAt:i}=t.data,s={topic:r,message:n,publishedAt:i};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(on({type:"event",event:t.id},s)),this.events.emit(t.id,s),await this.acknowledgePayload(e),await this.onMessageEvent(s)}else(0,ic.isJsonRpcResponse)(e)&&this.events.emit(sk.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(sk.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){let t=(0,ic.formatJsonRpcResult)(e.id,!0);await this.provider.connection.send(t)}registerProviderListeners(){this.provider.on(s$.payload,e=>this.onProviderPayload(e)),this.provider.on(s$.connect,()=>{this.events.emit(sk.connect)}),this.provider.on(s$.disconnect,()=>{this.onProviderDisconnect()}),this.provider.on(s$.error,e=>{this.logger.error(e),this.events.emit(sk.error,e)})}registerEventListeners(){this.events.on(sk.connection_stalled,async()=>{await this.restartTransport()})}onProviderDisconnect(){this.events.emit(sk.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||setTimeout(async()=>{await this.restartTransport()},(0,X.toMiliseconds)(sM))}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}async toEstablishConnection(){if(!this.connected){if(this.connecting)return await new Promise(e=>{let t=setInterval(()=>{this.connected&&(clearInterval(t),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var os=Object.defineProperty,oo=Object.getOwnPropertySymbols,oa=Object.prototype.hasOwnProperty,ou=Object.prototype.propertyIsEnumerable,oc=(e,t,r)=>t in e?os(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ol=(e,t)=>{for(var r in t||(t={}))oa.call(t,r)&&oc(e,r,t[r]);if(oo)for(var r of oo(t))ou.call(t,r)&&oc(e,r,t[r]);return e};class oh extends V{constructor(e,t,r,n=sx,i){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,this.map=new Map,this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=sx,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>{var t;this.getKey&&null!==e&&!n2(e)?this.map.set(this.getKey(e),e):(null==(t=e?.proposer)?void 0:t.publicKey)?this.map.set(e.id,e):e?.topic&&this.map.set(e.topic,e)}),this.cached=[],this.initialized=!0)},this.set=async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())},this.get=e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)),this.getAll=e=>(this.isInitialized(),e?this.values.filter(t=>Object.keys(e).every(r=>im()(t[r],e[r]))):this.values),this.update=async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});let r=ol(ol({},this.getData(e)),t);this.map.set(e,r),await this.persist()},this.delete=async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),await this.persist())},this.logger=(0,L.generateChildLogger)(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return(0,L.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){let t=this.map.get(e);if(!t){let{message:t}=n1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{let e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){let{message:e}=n1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}}class of{constructor(e,t){this.core=e,this.logger=t,this.name="pairing",this.version="0.3",this.events=new(R()),this.initialized=!1,this.storagePrefix=sx,this.ignoredPayloadTypes=[1],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]},this.create=async()=>{var e;this.isInitialized();let t=np(),r=await this.core.crypto.setSymKey(t),n=nk(X.FIVE_MINUTES),i={protocol:"irn"},s=(e={protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i},`${e.protocol}:${e.topic}@${e.version}?`+ns.stringify(nJ({symKey:e.symKey},function(e,t="-"){let r={};return Object.keys(e).forEach(n=>{e[n]&&(r["relay"+t+n]=e[n])}),r}(e.relay))));return await this.pairings.set(r,{topic:r,expiry:n,relay:i,active:!1}),await this.core.relayer.subscribe(r),this.core.expirer.set(r,n),{topic:r,uri:s}},this.pair=async e=>{this.isInitialized(),this.isValidPair(e);let{topic:t,symKey:r,relay:n}=function(e){var t;let r=e.indexOf(":"),n=-1!==e.indexOf("?")?e.indexOf("?"):void 0,i=e.substring(0,r),s=e.substring(r+1,n).split("@"),o="u">typeof n?e.substring(n):"",a=ns.parse(o);return{protocol:i,topic:(t=s[0]).startsWith("//")?t.substring(2):t,version:parseInt(s[1],10),symKey:a.symKey,relay:function(e,t="-"){let r={},n="relay"+t;return Object.keys(e).forEach(t=>{if(t.startsWith(n)){let i=t.replace(n,""),s=e[t];r[i]=s}}),r}(a)}}(e.uri);if(this.pairings.keys.includes(t))throw Error(`Pairing already exists: ${t}`);if(this.core.crypto.hasKeys(t))throw Error(`Keychain already exists: ${t}`);let i=nk(X.FIVE_MINUTES),s={topic:t,relay:n,expiry:i,active:!1};return await this.pairings.set(t,s),await this.core.crypto.setSymKey(r,t),await this.core.relayer.subscribe(t,{relay:n}),this.core.expirer.set(t,i),e.activatePairing&&await this.activate({topic:t}),s},this.activate=async({topic:e})=>{this.isInitialized();let t=nk(X.THIRTY_DAYS);await this.pairings.update(e,{active:!0,expiry:t}),this.core.expirer.set(e,t)},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);let{topic:t}=e;if(this.pairings.keys.includes(t)){let e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=nT();this.events.once(nM("pairing_ping",e),({error:e})=>{e?i(e):n()}),await r()}},this.updateExpiry=async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})},this.updateMetadata=async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",n3("USER_DISCONNECTED")),await this.deletePairing(t))},this.sendRequest=async(e,t,r)=>{let n=(0,ic.formatJsonRpcRequest)(t,r),i=await this.core.crypto.encode(e,n),s=sF[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id},this.sendResult=async(e,t,r)=>{let n=(0,ic.formatJsonRpcResult)(e,r),i=await this.core.crypto.encode(t,n),s=await this.core.history.get(t,e),o=sF[s.request.method].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)},this.sendError=async(e,t,r)=>{let n=(0,ic.formatJsonRpcError)(e,r),i=await this.core.crypto.encode(t,n),s=await this.core.history.get(t,e),o=sF[s.request.method]?sF[s.request.method].res:sF.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)},this.deletePairing=async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,n3("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])},this.cleanup=async()=>{let e=this.pairings.getAll().filter(e=>n$(e.expiry));await Promise.all(e.map(e=>this.deletePairing(e.topic)))},this.onRelayEventRequest=e=>{let{topic:t,payload:r}=e,n=r.method;if(this.pairings.keys.includes(t))switch(n){case"wc_pairingPing":return this.onPairingPingRequest(t,r);case"wc_pairingDelete":return this.onPairingDeleteRequest(t,r);default:return this.onUnknownRpcMethodRequest(t,r)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;if(this.pairings.keys.includes(t))return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)},this.onPairingPingRequest=async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onPairingPingResponse=(e,t)=>{let{id:r}=t;setTimeout(()=>{(0,ic.isJsonRpcResult)(t)?this.events.emit(nM("pairing_ping",r),{}):(0,ic.isJsonRpcError)(t)&&this.events.emit(nM("pairing_ping",r),{error:t.error})},500)},this.onPairingDeleteRequest=async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit("pairing_delete",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodRequest=async(e,t)=>{let{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;let t=n3("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}},this.onUnknownRpcMethodResponse=e=>{this.registeredMethods.includes(e)||this.logger.error(n3("WC_METHOD_UNSUPPORTED",e))},this.isValidPair=e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`pair() params: ${e}`);throw Error(t)}if(!function(e){if(n6(e,!1))try{return"u">typeof new URL(e)}catch{}return!1}(e.uri)){let{message:t}=n1("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw Error(t)}},this.isValidPing=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidDisconnect=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidPairingTopic(t)},this.isValidPairingTopic=async e=>{if(!n6(e,!1)){let{message:t}=n1("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.pairings.keys.includes(e)){let{message:t}=n1("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(n$(this.pairings.get(e).expiry)){await this.deletePairing(e);let{message:t}=n1("EXPIRED",`pairing topic: ${e}`);throw Error(t)}},this.core=e,this.logger=(0,L.generateChildLogger)(t,this.name),this.pairings=new oh(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,L.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.core.relayer.on(sk.message,async e=>{let{topic:t,message:r}=e;if(this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))return;let n=await this.core.crypto.decode(t,r);(0,ic.isJsonRpcRequest)(n)?(this.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):(0,ic.isJsonRpcResponse)(n)&&(await this.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.core.history.delete(t,n.id))})}registerExpirerEvents(){this.core.expirer.on(sB.expired,async e=>{let{topic:t}=nL(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))})}}class op extends M{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.records=new Map,this.events=new N.EventEmitter,this.name="history",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=sx,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.records.set(e.id,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;let n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:nk(X.THIRTY_DAYS)};this.records.set(n.id,n),this.events.emit(sV.created,n)},this.resolve=async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;let t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=(0,ic.isJsonRpcError)(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.events.emit(sV.updated,t))},this.get=async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)),this.delete=(e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach(r=>{r.topic!==e||"u">typeof t&&r.id!==t||(this.records.delete(r.id),this.events.emit(sV.deleted,r))})},this.exists=async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e),this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,L.generateChildLogger)(t,this.name)}get context(){return(0,L.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){let e=[];return this.values.forEach(t=>{if("u">typeof t.response)return;let r={topic:t.topic,request:(0,ic.formatJsonRpcRequest)(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();let t=this.records.get(e);if(!t){let{message:t}=n1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(sV.sync)}async restore(){try{let e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){let{message:e}=n1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(sV.created,e=>{let t=sV.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(sV.updated,e=>{let t=sV.updated;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.events.on(sV.deleted,e=>{let t=sV.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e}),this.persist()}),this.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{(0,X.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}}class od extends H{constructor(e,t){super(e,t),this.core=e,this.logger=t,this.expirations=new Map,this.events=new N.EventEmitter,this.name="expirer",this.version="0.3",this.cached=[],this.initialized=!1,this.storagePrefix=sx,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(e=>this.expirations.set(e.target,e)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=e=>{try{let t=this.formatTarget(e);return"u">typeof this.getExpiration(t)}catch{return!1}},this.set=(e,t)=>{this.isInitialized();let r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(sB.created,{target:r,expiration:n})},this.get=e=>{this.isInitialized();let t=this.formatTarget(e);return this.getExpiration(t)},this.del=e=>{if(this.isInitialized(),this.has(e)){let t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(sB.deleted,{target:t,expiration:r})}},this.on=(e,t)=>{this.events.on(e,t)},this.once=(e,t)=>{this.events.once(e,t)},this.off=(e,t)=>{this.events.off(e,t)},this.removeListener=(e,t)=>{this.events.removeListener(e,t)},this.logger=(0,L.generateChildLogger)(t,this.name)}get context(){return(0,L.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return nU("topic",e);if("number"==typeof e)return nU("id",e);let{message:t}=n1("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(sB.sync)}async restore(){try{let e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){let{message:e}=n1("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){let t=this.expirations.get(e);if(!t){let{message:t}=n1("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),Error(t)}return t}checkExpiry(e,t){let{expiry:r}=t;(0,X.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(sB.expired,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,t)=>this.checkExpiry(t,e))}registerEventListeners(){this.core.heartbeat.on(U.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(sB.created,e=>{let t=sB.created;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(sB.expired,e=>{let t=sB.expired;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}),this.events.on(sB.deleted,e=>{let t=sB.deleted;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}}class og extends K{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,this.name=sH,this.initialized=!1,this.init=async e=>{nP()||!nO()||(this.verifyUrl=e?.verifyUrl||sK,await this.createIframe())},this.register=async e=>{var t;if(this.initialized||await this.init(),this.iframe)try{null==(t=this.iframe.contentWindow)||t.postMessage(e.attestationId,this.verifyUrl),this.logger.info(`postMessage sent: ${e.attestationId} ${this.verifyUrl}`)}catch{}},this.resolve=async e=>{var t;if(this.isDevEnv)return"";this.logger.info(`resolving attestation: ${e.attestationId}`);let r=this.startAbortTimer(X.FIVE_SECONDS),n=await fetch(`${this.verifyUrl}/attestation/${e.attestationId}`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?null==(t=await n.json())?void 0:t.origin:""},this.createIframe=async()=>{try{await Promise.race([new Promise((e,t)=>{if(document.getElementById(sH))return e();let r=document.createElement("iframe");r.setAttribute("id",sH),r.setAttribute("src",`${this.verifyUrl}/${this.projectId}`),r.style.display="none",r.addEventListener("load",()=>{this.initialized=!0,e()}),r.addEventListener("error",e=>{t(e)}),document.body.append(r),this.iframe=r}),new Promise(e=>{setTimeout(()=>e("iframe load timeout"),(0,X.toMiliseconds)(X.ONE_SECOND/2))})])}catch(e){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(e)}},this.logger=(0,L.generateChildLogger)(t,this.name),this.verifyUrl=sK,this.abortController=new AbortController,this.isDevEnv=nS()&&ib.env.IS_VITEST}get context(){return(0,L.getLoggerContext)(this.logger)}startAbortTimer(e){return setTimeout(()=>this.abortController.abort(),(0,X.toMiliseconds)(e))}}var oy=Object.defineProperty,ov=Object.getOwnPropertySymbols,om=Object.prototype.hasOwnProperty,ob=Object.prototype.propertyIsEnumerable,oD=(e,t,r)=>t in e?oy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o_=(e,t)=>{for(var r in t||(t={}))om.call(t,r)&&oD(e,r,t[r]);if(ov)for(var r of ov(t))ob.call(t,r)&&oD(e,r,t[r]);return e};class ow extends ${constructor(e){super(e),this.protocol="wc",this.version=2,this.name=sO,this.events=new N.EventEmitter,this.initialized=!1,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||sU;let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,L.pino)((0,L.getDefaultLoggerOptions)({level:e?.logger||sA.logger}));this.logger=(0,L.generateChildLogger)(t,this.name),this.heartbeat=new U.HeartBeat,this.crypto=new sG(this,this.logger,e?.keychain),this.history=new op(this,this.logger),this.expirer=new od(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new j.ZP(o_(o_({},sN),e?.storageOptions)),this.relayer=new oi({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new of(this,this.logger),this.verify=new og(this.projectId||"",this.logger)}static async init(e){let t=new ow(e);await t.initialize();let r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,L.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}let oE="client",oI=`wc@2:${oE}:`,oC={name:oE,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},oS="Proposal expired",oP=X.SEVEN_DAYS,oO={wc_sessionPropose:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1104},res:{ttl:X.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1106},res:{ttl:X.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:X.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:X.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:X.ONE_DAY,prompt:!1,tag:1112},res:{ttl:X.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:X.THIRTY_SECONDS,prompt:!1,tag:1115}}},ox={min:X.FIVE_MINUTES,max:X.SEVEN_DAYS},oA=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var oN=Object.defineProperty,oR=Object.defineProperties,oT=Object.getOwnPropertyDescriptors,oj=Object.getOwnPropertySymbols,oU=Object.prototype.hasOwnProperty,oL=Object.prototype.propertyIsEnumerable,ok=(e,t,r)=>t in e?oN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o$=(e,t)=>{for(var r in t||(t={}))oU.call(t,r)&&ok(e,r,t[r]);if(oj)for(var r of oj(t))oL.call(t,r)&&ok(e,r,t[r]);return e},oM=(e,t)=>oR(e,oT(t));class oz extends G{constructor(e){super(e),this.name="engine",this.events=new(R()),this.initialized=!1,this.ignoredPayloadTypes=[1],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(oO)}),this.initialized=!0)},this.connect=async e=>{this.isInitialized();let t=oM(o$({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);let{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,relays:o}=t,a=r,u,c=!1;if(a&&(c=this.client.core.pairing.pairings.get(a).active),!a||!c){let{topic:e,uri:t}=await this.client.core.pairing.create();a=e,u=t}let l=await this.client.core.crypto.generateKeyPair(),h=o$({requiredNamespaces:n,optionalNamespaces:i,relays:o??[{protocol:"irn"}],proposer:{publicKey:l,metadata:this.client.metadata}},s&&{sessionProperties:s}),{reject:f,resolve:p,done:d}=nT(X.FIVE_MINUTES,oS);if(this.events.once(nM("session_connect"),async({error:e,session:t})=>{if(e)f(e);else if(t){t.self.publicKey=l;let e=oM(o$({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces});await this.client.session.set(t.topic,e),await this.setExpiry(t.topic,t.expiry),a&&await this.client.core.pairing.updateMetadata({topic:a,metadata:t.peer.metadata}),p(e)}}),!a){let{message:e}=n1("NO_MATCHING_KEY",`connect() pairing topic: ${a}`);throw Error(e)}let g=await this.sendRequest(a,"wc_sessionPropose",h),y=nk(X.FIVE_MINUTES);return await this.setProposal(g,o$({id:g,expiry:y},h)),{uri:u,approval:d}},this.pair=async e=>(this.isInitialized(),await this.client.core.pairing.pair(e)),this.approve=async e=>{this.isInitialized(),await this.isValidApprove(e);let{id:t,relayProtocol:r,namespaces:n,sessionProperties:i}=e,s=this.client.proposal.get(t),{pairingTopic:o,proposer:a,requiredNamespaces:u,optionalNamespaces:c}=s;o=o||"",n8(u)||(u=function(e,t){let r=it(e,t);if(r)throw Error(r.message);let n={};for(let[t,r]of Object.entries(e))n[t]={methods:r.methods,events:r.events,chains:r.accounts.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)};return n}(n,"approve()"));let l=await this.client.core.crypto.generateKeyPair(),h=a.publicKey,f=await this.client.core.crypto.generateSharedKey(l,h);o&&t&&(await this.client.core.pairing.updateMetadata({topic:o,metadata:a.metadata}),await this.sendResult(t,o,{relay:{protocol:r??"irn"},responderPublicKey:l}),await this.client.proposal.delete(t,n3("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:o}));let p=o$({relay:{protocol:r??"irn"},namespaces:n,requiredNamespaces:u,optionalNamespaces:c,pairingTopic:o,controller:{publicKey:l,metadata:this.client.metadata},expiry:nk(oP)},i&&{sessionProperties:i});await this.client.core.relayer.subscribe(f),await this.sendRequest(f,"wc_sessionSettle",p);let d=oM(o$({},p),{topic:f,pairingTopic:o,acknowledged:!1,self:p.controller,peer:{publicKey:a.publicKey,metadata:a.metadata},controller:l});return await this.client.session.set(f,d),await this.setExpiry(f,nk(oP)),{topic:f,acknowledged:()=>new Promise(e=>setTimeout(()=>e(this.client.session.get(f)),500))}},this.reject=async e=>{this.isInitialized(),await this.isValidReject(e);let{id:t,reason:r}=e,{pairingTopic:n}=this.client.proposal.get(t);n&&(await this.sendError(t,n,r),await this.client.proposal.delete(t,n3("USER_DISCONNECTED")))},this.update=async e=>{this.isInitialized(),await this.isValidUpdate(e);let{topic:t,namespaces:r}=e,n=await this.sendRequest(t,"wc_sessionUpdate",{namespaces:r}),{done:i,resolve:s,reject:o}=nT();return this.events.once(nM("session_update",n),({error:e})=>{e?o(e):s()}),await this.client.session.update(t,{namespaces:r}),{acknowledged:i}},this.extend=async e=>{this.isInitialized(),await this.isValidExtend(e);let{topic:t}=e,r=await this.sendRequest(t,"wc_sessionExtend",{}),{done:n,resolve:i,reject:s}=nT();return this.events.once(nM("session_extend",r),({error:e})=>{e?s(e):i()}),await this.setExpiry(t,nk(oP)),{acknowledged:n}},this.request=async e=>{this.isInitialized(),await this.isValidRequest(e);let{chainId:t,request:r,topic:n,expiry:i}=e,s=await this.sendRequest(n,"wc_sessionRequest",{request:r,chainId:t},i),{done:o,resolve:a,reject:u}=nT(i);this.events.once(nM("session_request",s),({error:e,result:t})=>{e?u(e):a(t)}),this.client.events.emit("session_request_sent",{topic:n,request:r,chainId:t,id:s});let c=await this.client.core.storage.getItem("WALLETCONNECT_DEEPLINK_CHOICE");return nq({id:s,topic:n,wcDeepLink:c}),await o()},this.respond=async e=>{this.isInitialized(),await this.isValidRespond(e);let{topic:t,response:r}=e,{id:n}=r;(0,ic.isJsonRpcResult)(r)?await this.sendResult(n,t,r.result):(0,ic.isJsonRpcError)(r)&&await this.sendError(n,t,r.error),this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0})},this.ping=async e=>{this.isInitialized(),await this.isValidPing(e);let{topic:t}=e;if(this.client.session.keys.includes(t)){let e=await this.sendRequest(t,"wc_sessionPing",{}),{done:r,resolve:n,reject:i}=nT();this.events.once(nM("session_ping",e),({error:e})=>{e?i(e):n()}),await r()}else this.client.core.pairing.pairings.keys.includes(t)&&await this.client.core.pairing.ping({topic:t})},this.emit=async e=>{this.isInitialized(),await this.isValidEmit(e);let{topic:t,event:r,chainId:n}=e;await this.sendRequest(t,"wc_sessionEvent",{event:r,chainId:n})},this.disconnect=async e=>{this.isInitialized(),await this.isValidDisconnect(e);let{topic:t}=e;if(this.client.session.keys.includes(t)){let e;let r=(0,ic.getBigIntRpcId)().toString(),n=t=>{t?.id.toString()===r&&(this.client.core.relayer.events.removeListener(sk.message_ack,n),e())};await Promise.all([new Promise(t=>{e=t,this.client.core.relayer.on(sk.message_ack,n)}),this.sendRequest(t,"wc_sessionDelete",n3("USER_DISCONNECTED"),void 0,r)]),await this.deleteSession(t)}else await this.client.core.pairing.disconnect({topic:t})},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(t=>(function(e,t){let{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r),s=!0;return!!nA(i,n)&&(n.forEach(t=>{let{accounts:n,methods:i,events:o}=e.namespaces[t],a=nY(n),u=r[t];nA(nu(t,u),a)&&nA(u.methods,i)&&nA(u.events,o)||(s=!1)}),s)})(t,e))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{let t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic});if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(e=>this.client.core.pairing.disconnect({topic:e.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}},this.deleteSession=async(e,t)=>{let{self:r}=this.client.session.get(e);await this.client.core.relayer.unsubscribe(e),this.client.session.delete(e,n3("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(r.publicKey)&&await this.client.core.crypto.deleteKeyPair(r.publicKey),this.client.core.crypto.keychain.has(e)&&await this.client.core.crypto.deleteSymKey(e),t||this.client.core.expirer.del(e)},this.deleteProposal=async(e,t)=>{await Promise.all([this.client.proposal.delete(e,n3("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)])},this.deletePendingSessionRequest=async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,t)=>{this.client.session.keys.includes(e)&&await this.client.session.update(e,{expiry:t}),this.client.core.expirer.set(e,t)},this.setProposal=async(e,t)=>{await this.client.proposal.set(e,t),this.client.core.expirer.set(e,t.expiry)},this.setPendingSessionRequest=async e=>{let t=oO.wc_sessionRequest.req.ttl,{id:r,topic:n,params:i}=e;await this.client.pendingRequest.set(r,{id:r,topic:n,params:i}),t&&this.client.core.expirer.set(r,nk(t))},this.sendRequest=async(e,t,r,n,i)=>{let s=(0,ic.formatJsonRpcRequest)(t,r);if(nO()&&oA.includes(t)){let e=nd(JSON.stringify(s));await this.client.core.verify.register({attestationId:e})}let o=await this.client.core.crypto.encode(e,s),a=oO[t].req;return n&&(a.ttl=n),i&&(a.id=i),this.client.core.history.set(e,s),this.client.core.relayer.publish(e,o,a),s.id},this.sendResult=async(e,t,r)=>{let n=(0,ic.formatJsonRpcResult)(e,r),i=await this.client.core.crypto.encode(t,n),s=await this.client.core.history.get(t,e),o=oO[s.request.method].res;this.client.core.relayer.publish(t,i,o),await this.client.core.history.resolve(n)},this.sendError=async(e,t,r)=>{let n=(0,ic.formatJsonRpcError)(e,r),i=await this.client.core.crypto.encode(t,n),s=await this.client.core.history.get(t,e),o=oO[s.request.method].res;this.client.core.relayer.publish(t,i,o),await this.client.core.history.resolve(n)},this.cleanup=async()=>{let e=[],t=[];this.client.session.getAll().forEach(t=>{n$(t.expiry)&&e.push(t.topic)}),this.client.proposal.getAll().forEach(e=>{n$(e.expiry)&&t.push(e.id)}),await Promise.all([...e.map(e=>this.deleteSession(e)),...t.map(e=>this.deleteProposal(e))])},this.onRelayEventRequest=e=>{let{topic:t,payload:r}=e,n=r.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeRequest(t,r);case"wc_sessionSettle":return this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return this.onSessionExtendRequest(t,r);case"wc_sessionPing":return this.onSessionPingRequest(t,r);case"wc_sessionDelete":return this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return this.onSessionRequest(t,r);case"wc_sessionEvent":return this.onSessionEventRequest(t,r);default:return this.client.logger.info(`Unsupported request method ${n}`)}},this.onRelayEventResponse=async e=>{let{topic:t,payload:r}=e,n=(await this.client.core.history.get(t,r.id)).request.method;switch(n){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${n}`)}},this.onRelayEventUnknownPayload=e=>{let{topic:t}=e,{message:r}=n1("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw Error(r)},this.onSessionProposeRequest=async(e,t)=>{let{params:r,id:n}=t;try{this.isValidConnect(o$({},t.params));let i=nk(X.FIVE_MINUTES),s=o$({id:n,pairingTopic:e,expiry:i},r);await this.setProposal(n,s);let o=nd(JSON.stringify(t)),a=await this.getVerifyContext(o,s.proposer.metadata);this.client.events.emit("session_proposal",{id:n,params:s,verifyContext:a})}catch(t){await this.sendError(n,e,t),this.client.logger.error(t)}},this.onSessionProposeResponse=async(e,t)=>{let{id:r}=t;if((0,ic.isJsonRpcResult)(t)){let{result:n}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:n});let i=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:i});let s=i.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:s});let o=n.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:o});let a=await this.client.core.crypto.generateSharedKey(s,o);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:a});let u=await this.client.core.relayer.subscribe(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:u}),await this.client.core.pairing.activate({topic:e})}else(0,ic.isJsonRpcError)(t)&&(await this.client.proposal.delete(r,n3("USER_DISCONNECTED")),this.events.emit(nM("session_connect"),{error:t.error}))},this.onSessionSettleRequest=async(e,t)=>{let{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);let{relay:r,controller:i,expiry:s,namespaces:o,requiredNamespaces:a,optionalNamespaces:u,sessionProperties:c,pairingTopic:l}=t.params,h=o$({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:l,requiredNamespaces:a,optionalNamespaces:u,controller:i.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},c&&{sessionProperties:c});await this.sendResult(t.id,e,!0),this.events.emit(nM("session_connect"),{session:h}),this.cleanupDuplicatePairings(h)}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionSettleResponse=async(e,t)=>{let{id:r}=t;(0,ic.isJsonRpcResult)(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(nM("session_approve",r),{})):(0,ic.isJsonRpcError)(t)&&(await this.client.session.delete(e,n3("USER_DISCONNECTED")),this.events.emit(nM("session_approve",r),{error:t.error}))},this.onSessionUpdateRequest=async(e,t)=>{let{params:r,id:n}=t;try{this.isValidUpdate(o$({topic:e},r)),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult(n,e,!0),this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(t){await this.sendError(n,e,t),this.client.logger.error(t)}},this.onSessionUpdateResponse=(e,t)=>{let{id:r}=t;(0,ic.isJsonRpcResult)(t)?this.events.emit(nM("session_update",r),{}):(0,ic.isJsonRpcError)(t)&&this.events.emit(nM("session_update",r),{error:t.error})},this.onSessionExtendRequest=async(e,t)=>{let{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,nk(oP)),await this.sendResult(r,e,!0),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionExtendResponse=(e,t)=>{let{id:r}=t;(0,ic.isJsonRpcResult)(t)?this.events.emit(nM("session_extend",r),{}):(0,ic.isJsonRpcError)(t)&&this.events.emit(nM("session_extend",r),{error:t.error})},this.onSessionPingRequest=async(e,t)=>{let{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionPingResponse=(e,t)=>{let{id:r}=t;setTimeout(()=>{(0,ic.isJsonRpcResult)(t)?this.events.emit(nM("session_ping",r),{}):(0,ic.isJsonRpcError)(t)&&this.events.emit(nM("session_ping",r),{error:t.error})},500)},this.onSessionDeleteRequest=async(e,t)=>{let{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),await Promise.all([new Promise(t=>{this.client.core.relayer.once(sk.publish,async()=>{t(await this.deleteSession(e))})}),this.sendResult(r,e,!0)]),this.client.events.emit("session_delete",{id:r,topic:e})}catch(e){this.client.logger.error(e)}},this.onSessionRequest=async(e,t)=>{let{id:r,params:n}=t;try{this.isValidRequest(o$({topic:e},n)),await this.setPendingSessionRequest({id:r,topic:e,params:n});let i=nd(JSON.stringify(t)),s=this.client.session.get(e),o=await this.getVerifyContext(i,s.peer.metadata);this.client.events.emit("session_request",{id:r,topic:e,params:n,verifyContext:o})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.onSessionRequestResponse=(e,t)=>{let{id:r}=t;(0,ic.isJsonRpcResult)(t)?this.events.emit(nM("session_request",r),{result:t.result}):(0,ic.isJsonRpcError)(t)&&this.events.emit(nM("session_request",r),{error:t.error})},this.onSessionEventRequest=async(e,t)=>{let{id:r,params:n}=t;try{this.isValidEmit(o$({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n})}catch(t){await this.sendError(r,e,t),this.client.logger.error(t)}},this.isValidConnect=async e=>{let t;if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw Error(t)}let{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,relays:o}=e;if(n2(r)||await this.isValidPairingTopic(r),t=!1,o?o&&n5(o)&&o.length&&o.forEach(e=>{t=ir(e)}):t=!0,!t){let{message:e}=n1("MISSING_OR_INVALID",`connect() relays: ${o}`);throw Error(e)}n2(n)||0===n8(n)||this.validateNamespaces(n,"requiredNamespaces"),n2(i)||0===n8(i)||this.validateNamespaces(i,"optionalNamespaces"),n2(s)||this.validateSessionProps(s,"sessionProperties")},this.validateNamespaces=(e,t)=>{let r=function(e,t,r){let n=null;if(e&&n8(e)){let i;let s=ie(e,t);s&&(n=s);let o=(i=null,Object.entries(e).forEach(([e,n])=>{var s,o;let a;if(i)return;let u=(s=nu(e,n),o=`${t} ${r}`,a=null,n5(s)&&s.length?s.forEach(e=>{a||n9(e)||(a=n3("UNSUPPORTED_CHAINS",`${o}, chain ${e} should be a string and conform to "namespace:chainId" format`))}):n9(e)||(a=n3("UNSUPPORTED_CHAINS",`${o}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),a);u&&(i=u)}),i);o&&(n=o)}else n=n1("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw Error(r.message)},this.isValidApprove=async e=>{if(!ii(e))throw Error(n1("MISSING_OR_INVALID",`approve() params: ${e}`).message);let{id:t,namespaces:r,relayProtocol:n,sessionProperties:i}=e;await this.isValidProposalId(t);let s=this.client.proposal.get(t),o=it(r,"approve()");if(o)throw Error(o.message);let a=io(s.requiredNamespaces,r,"approve()");if(a)throw Error(a.message);if(!n6(n,!0)){let{message:e}=n1("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw Error(e)}n2(i)||this.validateSessionProps(i,"sessionProperties")},this.isValidReject=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`reject() params: ${e}`);throw Error(t)}let{id:t,reason:r}=e;if(await this.isValidProposalId(t),!r||"object"!=typeof r||!r.code||!n4(r.code,!1)||!r.message||!n6(r.message,!1)){let{message:e}=n1("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw Error(e)}},this.isValidSessionSettleRequest=e=>{let t;if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw Error(t)}let{relay:r,controller:n,namespaces:i,expiry:s}=e;if(!ir(r)){let{message:e}=n1("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw Error(e)}let o=(t=null,n6(n?.publicKey,!1)||(t=n1("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t);if(o)throw Error(o.message);let a=it(i,"onSessionSettleRequest()");if(a)throw Error(a.message);if(n$(s)){let{message:e}=n1("EXPIRED","onSessionSettleRequest()");throw Error(e)}},this.isValidUpdate=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`update() params: ${e}`);throw Error(t)}let{topic:t,namespaces:r}=e;await this.isValidSessionTopic(t);let n=this.client.session.get(t),i=it(r,"update()");if(i)throw Error(i.message);let s=io(n.requiredNamespaces,r,"update()");if(s)throw Error(s.message)},this.isValidExtend=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`extend() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionTopic(t)},this.isValidRequest=async e=>{var t;if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`request() params: ${e}`);throw Error(t)}let{topic:r,request:n,chainId:i,expiry:s}=e;await this.isValidSessionTopic(r);let{namespaces:o}=this.client.session.get(r);if(!is(o,i)){let{message:e}=n1("MISSING_OR_INVALID",`request() chainId: ${i}`);throw Error(e)}if(n2(n)||!n6(n.method,!1)){let{message:e}=n1("MISSING_OR_INVALID",`request() ${JSON.stringify(n)}`);throw Error(e)}if(!(n6(t=n.method,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{nY(e.accounts).includes(t)&&r.push(...e.methods)}),r})(o,i).includes(t))){let{message:e}=n1("MISSING_OR_INVALID",`request() method: ${n.method}`);throw Error(e)}if(s&&(!n4(s,!1)||!(s<=ox.max)||!(s>=ox.min))){let{message:e}=n1("MISSING_OR_INVALID",`request() expiry: ${s}. Expiry must be a number (in seconds) between ${ox.min} and ${ox.max}`);throw Error(e)}},this.isValidRespond=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`respond() params: ${e}`);throw Error(t)}let{topic:t,response:r}=e;if(await this.isValidSessionTopic(t),n2(r)||n2(r.result)&&n2(r.error)||!n4(r.id,!1)||!n6(r.jsonrpc,!1)){let{message:e}=n1("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(r)}`);throw Error(e)}},this.isValidPing=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`ping() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.isValidEmit=async e=>{var t;if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`emit() params: ${e}`);throw Error(t)}let{topic:r,event:n,chainId:i}=e;await this.isValidSessionTopic(r);let{namespaces:s}=this.client.session.get(r);if(!is(s,i)){let{message:e}=n1("MISSING_OR_INVALID",`emit() chainId: ${i}`);throw Error(e)}if(n2(n)||!n6(n.name,!1)){let{message:e}=n1("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw Error(e)}if(!(n6(t=n.name,!1)&&(function(e,t){let r=[];return Object.values(e).forEach(e=>{nY(e.accounts).includes(t)&&r.push(...e.events)}),r})(s,i).includes(t))){let{message:e}=n1("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(n)}`);throw Error(e)}},this.isValidDisconnect=async e=>{if(!ii(e)){let{message:t}=n1("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw Error(t)}let{topic:t}=e;await this.isValidSessionOrPairingTopic(t)},this.getVerifyContext=async(e,t)=>{let r={verified:{verifyUrl:t.verifyUrl||"",validation:"UNKNOWN",origin:t.url||""}};try{let n=await this.client.core.verify.resolve({attestationId:e,verifyUrl:t.verifyUrl});n&&(r.verified.origin=n,r.verified.validation=n===t.url?"VALID":"INVALID")}catch(e){this.client.logger.error(e)}return this.client.logger.info(`Verify context: ${JSON.stringify(r)}`),r},this.validateSessionProps=(e,t)=>{Object.values(e).forEach(e=>{if(!n6(e,!1)){let{message:r}=n1("MISSING_OR_INVALID",`${t} must be in Record<string, string> format. Received: ${JSON.stringify(e)}`);throw Error(r)}})}}isInitialized(){if(!this.initialized){let{message:e}=n1("NOT_INITIALIZED",this.name);throw Error(e)}}registerRelayerEvents(){this.client.core.relayer.on(sk.message,async e=>{let{topic:t,message:r}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(r)))return;let n=await this.client.core.crypto.decode(t,r);(0,ic.isJsonRpcRequest)(n)?(this.client.core.history.set(t,n),this.onRelayEventRequest({topic:t,payload:n})):(0,ic.isJsonRpcResponse)(n)?(await this.client.core.history.resolve(n),await this.onRelayEventResponse({topic:t,payload:n}),this.client.core.history.delete(t,n.id)):this.onRelayEventUnknownPayload({topic:t,payload:n})})}registerExpirerEvents(){this.client.core.expirer.on(sB.expired,async e=>{let{topic:t,id:r}=nL(e.target);if(r&&this.client.pendingRequest.keys.includes(r))return await this.deletePendingSessionRequest(r,n1("EXPIRED"),!0);t?this.client.session.keys.includes(t)&&(await this.deleteSession(t,!0),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r}))})}isValidPairingTopic(e){if(!n6(e,!1)){let{message:t}=n1("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){let{message:t}=n1("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw Error(t)}if(n$(this.client.core.pairing.pairings.get(e).expiry)){let{message:t}=n1("EXPIRED",`pairing topic: ${e}`);throw Error(t)}}async isValidSessionTopic(e){if(!n6(e,!1)){let{message:t}=n1("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw Error(t)}if(!this.client.session.keys.includes(e)){let{message:t}=n1("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw Error(t)}if(n$(this.client.session.get(e).expiry)){await this.deleteSession(e);let{message:t}=n1("EXPIRED",`session topic: ${e}`);throw Error(t)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(n6(e,!1)){let{message:t}=n1("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw Error(t)}else{let{message:t}=n1("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw Error(t)}}async isValidProposalId(e){if("number"!=typeof e){let{message:t}=n1("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw Error(t)}if(!this.client.proposal.keys.includes(e)){let{message:t}=n1("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw Error(t)}if(n$(this.client.proposal.get(e).expiry)){await this.deleteProposal(e);let{message:t}=n1("EXPIRED",`proposal id: ${e}`);throw Error(t)}}}class oq extends oh{constructor(e,t){super(e,t,"proposal",oI),this.core=e,this.logger=t}}class oF extends oh{constructor(e,t){super(e,t,"session",oI),this.core=e,this.logger=t}}class oV extends oh{constructor(e,t){super(e,t,"request",oI,e=>e.id),this.core=e,this.logger=t}}class oB extends W{constructor(e){super(e),this.protocol="wc",this.version=2,this.name=oC.name,this.events=new N.EventEmitter,this.on=(e,t)=>this.events.on(e,t),this.once=(e,t)=>this.events.once(e,t),this.off=(e,t)=>this.events.off(e,t),this.removeListener=(e,t)=>this.events.removeListener(e,t),this.removeAllListeners=e=>this.events.removeAllListeners(e),this.connect=async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}},this.pair=async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}},this.approve=async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}},this.reject=async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}},this.update=async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}},this.extend=async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}},this.request=async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}},this.respond=async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}},this.ping=async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}},this.emit=async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}},this.disconnect=async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}},this.find=e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}},this.name=e?.name||oC.name,this.metadata=e?.metadata||(0,ni.D)()||{name:"",description:"",url:"",icons:[""]};let t="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,L.pino)((0,L.getDefaultLoggerOptions)({level:e?.logger||oC.logger}));this.core=e?.core||new ow(e),this.logger=(0,L.generateChildLogger)(t,this.name),this.session=new oF(this.core,this.logger),this.proposal=new oq(this.core,this.logger),this.pendingRequest=new oV(this.core,this.logger),this.engine=new oz(this)}static async init(e){let t=new oB(e);return await t.initialize(),t}get context(){return(0,L.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var oH=r(2077);let oK="error",oW="wc@2:universal_provider:",oG={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var oJ="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof r.g?r.g:"u">typeof self?self:{},oY={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */!function(e,t){(function(){var r,n="Expected a function",i="__lodash_hash_undefined__",s="__lodash_placeholder__",o=1/0,a=0/0,u=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],c="[object Arguments]",l="[object Array]",h="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Function]",g="[object GeneratorFunction]",y="[object Map]",v="[object Number]",m="[object Object]",b="[object Promise]",D="[object RegExp]",_="[object Set]",w="[object String]",E="[object Symbol]",I="[object WeakMap]",C="[object ArrayBuffer]",S="[object DataView]",P="[object Float32Array]",O="[object Float64Array]",x="[object Int8Array]",A="[object Int16Array]",N="[object Int32Array]",R="[object Uint8Array]",T="[object Uint8ClampedArray]",j="[object Uint16Array]",U="[object Uint32Array]",L=/\b__p \+= '';/g,k=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,M=/&(?:amp|lt|gt|quot|#39);/g,z=/[&<>"']/g,q=RegExp(M.source),F=RegExp(z.source),V=/<%-([\s\S]+?)%>/g,B=/<%([\s\S]+?)%>/g,H=/<%=([\s\S]+?)%>/g,K=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/,G=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J=/[\\^$.*+?()[\]{}|]/g,Y=RegExp(J.source),Z=/^\s+/,Q=/\s/,X=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ee=/\{\n\/\* \[wrapped with (.+)\] \*/,et=/,? & /,er=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,ei=/\\(\\)?/g,es=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,eo=/\w*$/,ea=/^[-+]0x[0-9a-f]+$/i,eu=/^0b[01]+$/i,ec=/^\[object .+?Constructor\]$/,el=/^0o[0-7]+$/i,eh=/^(?:0|[1-9]\d*)$/,ef=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ep=/($^)/,ed=/['\n\r\u2028\u2029\\]/g,eg="\ud800-\udfff",ey="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",ev="\\u2700-\\u27bf",em="a-z\\xdf-\\xf6\\xf8-\\xff",eb="A-Z\\xc0-\\xd6\\xd8-\\xde",eD="\\ufe0e\\ufe0f",e_="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ew="['’]",eE="["+e_+"]",eI="["+ey+"]",eC="["+em+"]",eS="[^"+eg+e_+"\\d+"+ev+em+eb+"]",eP="\ud83c[\udffb-\udfff]",eO="[^"+eg+"]",ex="(?:\ud83c[\udde6-\uddff]){2}",eA="[\ud800-\udbff][\udc00-\udfff]",eN="["+eb+"]",eR="\\u200d",eT="(?:"+eC+"|"+eS+")",ej="(?:"+ew+"(?:d|ll|m|re|s|t|ve))?",eU="(?:"+ew+"(?:D|LL|M|RE|S|T|VE))?",eL="(?:"+eI+"|"+eP+")?",ek="["+eD+"]?",e$="(?:"+eR+"(?:"+[eO,ex,eA].join("|")+")"+ek+eL+")*",eM=ek+eL+e$,ez="(?:"+["["+ev+"]",ex,eA].join("|")+")"+eM,eq="(?:"+[eO+eI+"?",eI,ex,eA,"["+eg+"]"].join("|")+")",eF=RegExp(ew,"g"),eV=RegExp(eI,"g"),eB=RegExp(eP+"(?="+eP+")|"+eq+eM,"g"),eH=RegExp([eN+"?"+eC+"+"+ej+"(?="+[eE,eN,"$"].join("|")+")","(?:"+eN+"|"+eS+")+"+eU+"(?="+[eE,eN+eT,"$"].join("|")+")",eN+"?"+eT+"+"+ej,eN+"+"+eU,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",ez].join("|"),"g"),eK=RegExp("["+eR+eg+ey+eD+"]"),eW=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eG=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],eJ=-1,eY={};eY[P]=eY[O]=eY[x]=eY[A]=eY[N]=eY[R]=eY[T]=eY[j]=eY[U]=!0,eY[c]=eY[l]=eY[C]=eY[h]=eY[S]=eY[f]=eY[p]=eY[d]=eY[y]=eY[v]=eY[m]=eY[D]=eY[_]=eY[w]=eY[I]=!1;var eZ={};eZ[c]=eZ[l]=eZ[C]=eZ[S]=eZ[h]=eZ[f]=eZ[P]=eZ[O]=eZ[x]=eZ[A]=eZ[N]=eZ[y]=eZ[v]=eZ[m]=eZ[D]=eZ[_]=eZ[w]=eZ[E]=eZ[R]=eZ[T]=eZ[j]=eZ[U]=!0,eZ[p]=eZ[d]=eZ[I]=!1;var eQ={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},eX=parseFloat,e0=parseInt,e1="object"==typeof oJ&&oJ&&oJ.Object===Object&&oJ,e3="object"==typeof self&&self&&self.Object===Object&&self,e5=e1||e3||Function("return this")(),e8=t&&!t.nodeType&&t,e2=e8&&e&&!e.nodeType&&e,e6=e2&&e2.exports===e8,e4=e6&&e1.process,e9=function(){try{return e2&&e2.require&&e2.require("util").types||e4&&e4.binding&&e4.binding("util")}catch{}}(),e7=e9&&e9.isArrayBuffer,te=e9&&e9.isDate,tt=e9&&e9.isMap,tr=e9&&e9.isRegExp,tn=e9&&e9.isSet,ti=e9&&e9.isTypedArray;function ts(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function to(e,t,r,n){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(n,o,r(o),e)}return n}function ta(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function tu(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function tc(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function tl(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}function th(e,t){return!!(null==e?0:e.length)&&t_(e,t,0)>-1}function tf(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}function tp(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function td(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}function tg(e,t,r,n){var i=-1,s=null==e?0:e.length;for(n&&s&&(r=e[++i]);++i<s;)r=t(r,e[i],i,e);return r}function ty(e,t,r,n){var i=null==e?0:e.length;for(n&&i&&(r=e[--i]);i--;)r=t(r,e[i],i,e);return r}function tv(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var tm=tC("length");function tb(e,t,r){var n;return r(e,function(e,r,i){if(t(e,r,i))return n=r,!1}),n}function tD(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return -1}function t_(e,t,r){return t==t?function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return -1}(e,t,r):tD(e,tE,r)}function tw(e,t,r,n){for(var i=r-1,s=e.length;++i<s;)if(n(e[i],t))return i;return -1}function tE(e){return e!=e}function tI(e,t){var r=null==e?0:e.length;return r?tO(e,t)/r:a}function tC(e){return function(t){return null==t?r:t[e]}}function tS(e){return function(t){return null==e?r:e[t]}}function tP(e,t,r,n,i){return i(e,function(e,i,s){r=n?(n=!1,e):t(r,e,i,s)}),r}function tO(e,t){for(var n,i=-1,s=e.length;++i<s;){var o=t(e[i]);o!==r&&(n=n===r?o:n+o)}return n}function tx(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function tA(e){return e&&e.slice(0,tK(e)+1).replace(Z,"")}function tN(e){return function(t){return e(t)}}function tR(e,t){return tp(t,function(t){return e[t]})}function tT(e,t){return e.has(t)}function tj(e,t){for(var r=-1,n=e.length;++r<n&&t_(t,e[r],0)>-1;);return r}function tU(e,t){for(var r=e.length;r--&&t_(t,e[r],0)>-1;);return r}var tL=tS({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),tk=tS({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function t$(e){return"\\"+eQ[e]}function tM(e){return eK.test(e)}function tz(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function tq(e,t){return function(r){return e(t(r))}}function tF(e,t){for(var r=-1,n=e.length,i=0,o=[];++r<n;){var a=e[r];(a===t||a===s)&&(e[r]=s,o[i++]=r)}return o}function tV(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}function tB(e){return tM(e)?function(e){for(var t=eB.lastIndex=0;eB.test(e);)++t;return t}(e):tm(e)}function tH(e){return tM(e)?e.match(eB)||[]:e.split("")}function tK(e){for(var t=e.length;t--&&Q.test(e.charAt(t)););return t}var tW=tS({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),tG=function e(t){var Q,eg,ey,ev,em=(t=null==t?e5:tG.defaults(e5.Object(),t,tG.pick(e5,eG))).Array,eb=t.Date,eD=t.Error,e_=t.Function,ew=t.Math,eE=t.Object,eI=t.RegExp,eC=t.String,eS=t.TypeError,eP=em.prototype,eO=e_.prototype,ex=eE.prototype,eA=t["__core-js_shared__"],eN=eO.toString,eR=ex.hasOwnProperty,eT=0,ej=(Q=/[^.]+$/.exec(eA&&eA.keys&&eA.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"",eU=ex.toString,eL=eN.call(eE),ek=e5._,e$=eI("^"+eN.call(eR).replace(J,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),eM=e6?t.Buffer:r,ez=t.Symbol,eq=t.Uint8Array,eB=eM?eM.allocUnsafe:r,eK=tq(eE.getPrototypeOf,eE),eQ=eE.create,e1=ex.propertyIsEnumerable,e3=eP.splice,e8=ez?ez.isConcatSpreadable:r,e2=ez?ez.iterator:r,e4=ez?ez.toStringTag:r,e9=function(){try{var e=ib(eE,"defineProperty");return e({},"",{}),e}catch{}}(),tm=t.clearTimeout!==e5.clearTimeout&&t.clearTimeout,tS=eb&&eb.now!==e5.Date.now&&eb.now,tJ=t.setTimeout!==e5.setTimeout&&t.setTimeout,tY=ew.ceil,tZ=ew.floor,tQ=eE.getOwnPropertySymbols,tX=eM?eM.isBuffer:r,t0=t.isFinite,t1=eP.join,t3=tq(eE.keys,eE),t5=ew.max,t8=ew.min,t2=eb.now,t6=t.parseInt,t4=ew.random,t9=eP.reverse,t7=ib(t,"DataView"),re=ib(t,"Map"),rt=ib(t,"Promise"),rr=ib(t,"Set"),rn=ib(t,"WeakMap"),ri=ib(eE,"create"),rs=rn&&new rn,ro={},ra=iB(t7),ru=iB(re),rc=iB(rt),rl=iB(rr),rh=iB(rn),rf=ez?ez.prototype:r,rp=rf?rf.valueOf:r,rd=rf?rf.toString:r;function rg(e){if(sZ(e)&&!sz(e)&&!(e instanceof rb)){if(e instanceof rm)return e;if(eR.call(e,"__wrapped__"))return iH(e)}return new rm(e)}var ry=function(){function e(){}return function(t){if(!sY(t))return{};if(eQ)return eQ(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function rv(){}function rm(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function rb(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function rD(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function r_(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rw(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function rE(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new rw;++t<r;)this.add(e[t])}function rI(e){var t=this.__data__=new r_(e);this.size=t.size}function rC(e,t){var r=sz(e),n=!r&&sM(e),i=!r&&!n&&sB(e),s=!r&&!n&&!i&&s2(e),o=r||n||i||s,a=o?tx(e.length,eC):[],u=a.length;for(var c in e)(t||eR.call(e,c))&&!(o&&("length"==c||i&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||iS(c,u)))&&a.push(c);return a}function rS(e){var t=e.length;return t?e[nf(0,t-1)]:r}function rP(e,t){return iq(nH(e),rL(t,0,e.length))}function rO(e){return iq(nH(e))}function rx(e,t,n){(n===r||sL(e[t],n))&&(n!==r||t in e)||rj(e,t,n)}function rA(e,t,n){var i=e[t];eR.call(e,t)&&sL(i,n)&&(n!==r||t in e)||rj(e,t,n)}function rN(e,t){for(var r=e.length;r--;)if(sL(e[r][0],t))return r;return -1}function rR(e,t,r,n){return rq(e,function(e,i,s){t(n,e,r(e),s)}),n}function rT(e,t){return e&&nK(t,ov(t),e)}function rj(e,t,r){"__proto__"==t&&e9?e9(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function rU(e,t){for(var n=-1,i=t.length,s=em(i),o=null==e;++n<i;)s[n]=o?r:of(e,t[n]);return s}function rL(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function rk(e,t,n,i,s,o){var a,u=1&t,l=2&t;if(n&&(a=s?n(e,i,s,o):n(e)),a!==r)return a;if(!sY(e))return e;var p=sz(e);if(p){if(b=e.length,I=new e.constructor(b),b&&"string"==typeof e[0]&&eR.call(e,"index")&&(I.index=e.index,I.input=e.input),a=I,!u)return nH(e,a)}else{var b,I,L,k,$,M=iw(e),z=M==d||M==g;if(sB(e))return nM(e,u);if(M==m||M==c||z&&!s){if(a=l||z?{}:iI(e),!u)return l?(L=($=a)&&nK(e,om(e),$),nK(e,i_(e),L)):(k=rT(a,e),nK(e,iD(e),k))}else{if(!eZ[M])return s?e:{};a=function(e,t,r){var n,i,s=e.constructor;switch(t){case C:return nz(e);case h:case f:return new s(+e);case S:return n=r?nz(e.buffer):e.buffer,new e.constructor(n,e.byteOffset,e.byteLength);case P:case O:case x:case A:case N:case R:case T:case j:case U:return nq(e,r);case y:return new s;case v:case w:return new s(e);case D:return(i=new e.constructor(e.source,eo.exec(e))).lastIndex=e.lastIndex,i;case _:return new s;case E:return rp?eE(rp.call(e)):{}}}(e,M,u)}}o||(o=new rI);var q=o.get(e);if(q)return q;o.set(e,a),s3(e)?e.forEach(function(r){a.add(rk(r,t,n,r,e,o))}):sQ(e)&&e.forEach(function(r,i){a.set(i,rk(r,t,n,i,e,o))});var F=p?r:(4&t?l?ih:il:l?om:ov)(e);return ta(F||e,function(r,i){F&&(r=e[i=r]),rA(a,i,rk(r,t,n,i,e,o))}),a}function r$(e,t,n){var i=n.length;if(null==e)return!i;for(e=eE(e);i--;){var s=n[i],o=t[s],a=e[s];if(a===r&&!(s in e)||!o(a))return!1}return!0}function rM(e,t,i){if("function"!=typeof e)throw new eS(n);return ik(function(){e.apply(r,i)},t)}function rz(e,t,r,n){var i=-1,s=th,o=!0,a=e.length,u=[],c=t.length;if(!a)return u;r&&(t=tp(t,tN(r))),n?(s=tf,o=!1):t.length>=200&&(s=tT,o=!1,t=new rE(t));e:for(;++i<a;){var l=e[i],h=null==r?l:r(l);if(l=n||0!==l?l:0,o&&h==h){for(var f=c;f--;)if(t[f]===h)continue e;u.push(l)}else s(t,h,n)||u.push(l)}return u}rg.templateSettings={escape:V,evaluate:B,interpolate:H,variable:"",imports:{_:rg}},rg.prototype=rv.prototype,rg.prototype.constructor=rg,rm.prototype=ry(rv.prototype),rm.prototype.constructor=rm,rb.prototype=ry(rv.prototype),rb.prototype.constructor=rb,rD.prototype.clear=function(){this.__data__=ri?ri(null):{},this.size=0},rD.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},rD.prototype.get=function(e){var t=this.__data__;if(ri){var n=t[e];return n===i?r:n}return eR.call(t,e)?t[e]:r},rD.prototype.has=function(e){var t=this.__data__;return ri?t[e]!==r:eR.call(t,e)},rD.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=ri&&t===r?i:t,this},r_.prototype.clear=function(){this.__data__=[],this.size=0},r_.prototype.delete=function(e){var t=this.__data__,r=rN(t,e);return!(r<0)&&(r==t.length-1?t.pop():e3.call(t,r,1),--this.size,!0)},r_.prototype.get=function(e){var t=this.__data__,n=rN(t,e);return n<0?r:t[n][1]},r_.prototype.has=function(e){return rN(this.__data__,e)>-1},r_.prototype.set=function(e,t){var r=this.__data__,n=rN(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},rw.prototype.clear=function(){this.size=0,this.__data__={hash:new rD,map:new(re||r_),string:new rD}},rw.prototype.delete=function(e){var t=iv(this,e).delete(e);return this.size-=t?1:0,t},rw.prototype.get=function(e){return iv(this,e).get(e)},rw.prototype.has=function(e){return iv(this,e).has(e)},rw.prototype.set=function(e,t){var r=iv(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},rE.prototype.add=rE.prototype.push=function(e){return this.__data__.set(e,i),this},rE.prototype.has=function(e){return this.__data__.has(e)},rI.prototype.clear=function(){this.__data__=new r_,this.size=0},rI.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},rI.prototype.get=function(e){return this.__data__.get(e)},rI.prototype.has=function(e){return this.__data__.has(e)},rI.prototype.set=function(e,t){var r=this.__data__;if(r instanceof r_){var n=r.__data__;if(!re||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new rw(n)}return r.set(e,t),this.size=r.size,this};var rq=nJ(rJ),rF=nJ(rY,!0);function rV(e,t){var r=!0;return rq(e,function(e,n,i){return r=!!t(e,n,i)}),r}function rB(e,t,n){for(var i=-1,s=e.length;++i<s;){var o=e[i],a=t(o);if(null!=a&&(u===r?a==a&&!s8(a):n(a,u)))var u=a,c=o}return c}function rH(e,t){var r=[];return rq(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}function rK(e,t,r,n,i){var s=-1,o=e.length;for(r||(r=iC),i||(i=[]);++s<o;){var a=e[s];t>0&&r(a)?t>1?rK(a,t-1,r,n,i):td(i,a):n||(i[i.length]=a)}return i}var rW=nY(),rG=nY(!0);function rJ(e,t){return e&&rW(e,t,ov)}function rY(e,t){return e&&rG(e,t,ov)}function rZ(e,t){return tl(t,function(t){return sW(e[t])})}function rQ(e,t){t=nL(t,e);for(var n=0,i=t.length;null!=e&&n<i;)e=e[iV(t[n++])];return n&&n==i?e:r}function rX(e,t,r){var n=t(e);return sz(e)?n:td(n,r(e))}function r0(e){return null==e?e===r?"[object Undefined]":"[object Null]":e4&&e4 in eE(e)?function(e){var t=eR.call(e,e4),n=e[e4];try{e[e4]=r;var i=!0}catch{}var s=eU.call(e);return i&&(t?e[e4]=n:delete e[e4]),s}(e):eU.call(e)}function r1(e,t){return e>t}function r3(e,t){return null!=e&&eR.call(e,t)}function r5(e,t){return null!=e&&t in eE(e)}function r8(e,t,n){for(var i=n?tf:th,s=e[0].length,o=e.length,a=o,u=em(o),c=1/0,l=[];a--;){var h=e[a];a&&t&&(h=tp(h,tN(t))),c=t8(h.length,c),u[a]=!n&&(t||s>=120&&h.length>=120)?new rE(a&&h):r}h=e[0];var f=-1,p=u[0];e:for(;++f<s&&l.length<c;){var d=h[f],g=t?t(d):d;if(d=n||0!==d?d:0,!(p?tT(p,g):i(l,g,n))){for(a=o;--a;){var y=u[a];if(!(y?tT(y,g):i(e[a],g,n)))continue e}p&&p.push(g),l.push(d)}}return l}function r2(e,t,n){t=nL(t,e);var i=null==(e=ij(e,t))?e:e[iV(i3(t))];return null==i?r:ts(i,e,n)}function r6(e){return sZ(e)&&r0(e)==c}function r4(e,t,n,i,s){return e===t||(null!=e&&null!=t&&(sZ(e)||sZ(t))?function(e,t,n,i,s,o){var a=sz(e),u=sz(t),d=a?l:iw(e),g=u?l:iw(t);d=d==c?m:d,g=g==c?m:g;var b=d==m,I=g==m,P=d==g;if(P&&sB(e)){if(!sB(t))return!1;a=!0,b=!1}if(P&&!b)return o||(o=new rI),a||s2(e)?iu(e,t,n,i,s,o):function(e,t,r,n,i,s,o){switch(r){case S:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case C:return!(e.byteLength!=t.byteLength||!s(new eq(e),new eq(t)));case h:case f:case v:return sL(+e,+t);case p:return e.name==t.name&&e.message==t.message;case D:case w:return e==t+"";case y:var a=tz;case _:var u=1&n;if(a||(a=tV),e.size!=t.size&&!u)break;var c=o.get(e);if(c)return c==t;n|=2,o.set(e,t);var l=iu(a(e),a(t),n,i,s,o);return o.delete(e),l;case E:if(rp)return rp.call(e)==rp.call(t)}return!1}(e,t,d,n,i,s,o);if(!(1&n)){var O=b&&eR.call(e,"__wrapped__"),x=I&&eR.call(t,"__wrapped__");if(O||x){var A=O?e.value():e,N=x?t.value():t;return o||(o=new rI),s(A,N,n,i,o)}}return!!P&&(o||(o=new rI),function(e,t,n,i,s,o){var a=1&n,u=il(e),c=u.length;if(c!=il(t).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in t:eR.call(t,h)))return!1}var f=o.get(e),p=o.get(t);if(f&&p)return f==t&&p==e;var d=!0;o.set(e,t),o.set(t,e);for(var g=a;++l<c;){var y=e[h=u[l]],v=t[h];if(i)var m=a?i(v,y,h,t,e,o):i(y,v,h,e,t,o);if(!(m===r?y===v||s(y,v,n,i,o):m)){d=!1;break}g||(g="constructor"==h)}if(d&&!g){var b=e.constructor,D=t.constructor;b!=D&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof D&&D instanceof D)&&(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,i,s,o))}(e,t,n,i,r4,s):e!=e&&t!=t)}function r9(e,t,n,i){var s=n.length,o=s,a=!i;if(null==e)return!o;for(e=eE(e);s--;){var u=n[s];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++s<o;){var c=(u=n[s])[0],l=e[c],h=u[1];if(a&&u[2]){if(l===r&&!(c in e))return!1}else{var f=new rI;if(i)var p=i(l,h,c,e,t,f);if(!(p===r?r4(h,l,3,i,f):p))return!1}}return!0}function r7(e){return!(!sY(e)||ej&&ej in e)&&(sW(e)?e$:ec).test(iB(e))}function ne(e){return"function"==typeof e?e:null==e?oV:"object"==typeof e?sz(e)?ns(e[0],e[1]):ni(e):oQ(e)}function nt(e){if(!iN(e))return t3(e);var t=[];for(var r in eE(e))eR.call(e,r)&&"constructor"!=r&&t.push(r);return t}function nr(e,t){return e<t}function nn(e,t){var r=-1,n=sF(e)?em(e.length):[];return rq(e,function(e,i,s){n[++r]=t(e,i,s)}),n}function ni(e){var t=im(e);return 1==t.length&&t[0][2]?iR(t[0][0],t[0][1]):function(r){return r===e||r9(r,e,t)}}function ns(e,t){var n;return iO(e)&&(n=t)==n&&!sY(n)?iR(iV(e),t):function(n){var i=of(n,e);return i===r&&i===t?op(n,e):r4(t,i,3)}}function no(e,t,n,i,s){e!==t&&rW(t,function(o,a){if(s||(s=new rI),sY(o))!function(e,t,n,i,s,o,a){var u=iU(e,n),c=iU(t,n),l=a.get(c);if(l){rx(e,n,l);return}var h=o?o(u,c,n+"",e,t,a):r,f=h===r;if(f){var p=sz(c),d=!p&&sB(c),g=!p&&!d&&s2(c);h=c,p||d||g?sz(u)?h=u:sV(u)?h=nH(u):d?(f=!1,h=nM(c,!0)):g?(f=!1,h=nq(c,!0)):h=[]:s0(c)||sM(c)?(h=u,sM(u)?h=on(u):(!sY(u)||sW(u))&&(h=iI(c))):f=!1}f&&(a.set(c,h),s(h,c,i,o,a),a.delete(c)),rx(e,n,h)}(e,t,a,n,no,i,s);else{var u=i?i(iU(e,a),o,a+"",e,t,s):r;u===r&&(u=o),rx(e,a,u)}},om)}function na(e,t){var n=e.length;if(n)return iS(t+=t<0?n:0,n)?e[t]:r}function nu(e,t,r){t=t.length?tp(t,function(e){return sz(e)?function(t){return rQ(t,1===e.length?e[0]:e)}:e}):[oV];var n=-1;return t=tp(t,tN(iy())),function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(nn(e,function(e,r,i){return{criteria:tp(t,function(t){return t(e)}),index:++n,value:e}}),function(e,t){return function(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,o=i.length,a=r.length;++n<o;){var u=nF(i[n],s[n]);if(u){if(n>=a)return u;return u*("desc"==r[n]?-1:1)}}return e.index-t.index}(e,t,r)})}function nc(e,t,r){for(var n=-1,i=t.length,s={};++n<i;){var o=t[n],a=rQ(e,o);r(a,o)&&nv(s,nL(o,e),a)}return s}function nl(e,t,r,n){var i=n?tw:t_,s=-1,o=t.length,a=e;for(e===t&&(t=nH(t)),r&&(a=tp(e,tN(r)));++s<o;)for(var u=0,c=t[s],l=r?r(c):c;(u=i(a,l,u,n))>-1;)a!==e&&e3.call(a,u,1),e3.call(e,u,1);return e}function nh(e,t){for(var r=e?t.length:0,n=r-1;r--;){var i=t[r];if(r==n||i!==s){var s=i;iS(i)?e3.call(e,i,1):nO(e,i)}}return e}function nf(e,t){return e+tZ(t4()*(t-e+1))}function np(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do t%2&&(r+=e),(t=tZ(t/2))&&(e+=e);while(t);return r}function nd(e,t){return i$(iT(e,t,oV),e+"")}function ng(e){return rS(oS(e))}function ny(e,t){var r=oS(e);return iq(r,rL(t,0,r.length))}function nv(e,t,n,i){if(!sY(e))return e;t=nL(t,e);for(var s=-1,o=t.length,a=o-1,u=e;null!=u&&++s<o;){var c=iV(t[s]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)break;if(s!=a){var h=u[c];(l=i?i(h,c,u):r)===r&&(l=sY(h)?h:iS(t[s+1])?[]:{})}rA(u,c,l),u=u[c]}return e}var nm=rs?function(e,t){return rs.set(e,t),e}:oV;function nb(e){return iq(oS(e))}function nD(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=em(i);++n<i;)s[n]=e[n+t];return s}function n_(e,t){var r;return rq(e,function(e,n,i){return!(r=t(e,n,i))}),!!r}function nw(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;n<i;){var s=n+i>>>1,o=e[s];null!==o&&!s8(o)&&(r?o<=t:o<t)?n=s+1:i=s}return i}return nE(e,t,oV,r)}function nE(e,t,n,i){var s=0,o=null==e?0:e.length;if(0===o)return 0;t=n(t);for(var a=t!=t,u=null===t,c=s8(t),l=t===r;s<o;){var h=tZ((s+o)/2),f=n(e[h]),p=f!==r,d=null===f,g=f==f,y=s8(f);if(a)var v=i||g;else v=l?g&&(i||p):u?g&&p&&(i||!d):c?g&&p&&!d&&(i||!y):!d&&!y&&(i?f<=t:f<t);v?s=h+1:o=h}return t8(o,4294967294)}function nI(e,t){for(var r=-1,n=e.length,i=0,s=[];++r<n;){var o=e[r],a=t?t(o):o;if(!r||!sL(a,u)){var u=a;s[i++]=0===o?0:o}}return s}function nC(e){return"number"==typeof e?e:s8(e)?a:+e}function nS(e){if("string"==typeof e)return e;if(sz(e))return tp(e,nS)+"";if(s8(e))return rd?rd.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}function nP(e,t,r){var n=-1,i=th,s=e.length,o=!0,a=[],u=a;if(r)o=!1,i=tf;else if(s>=200){var c=t?null:it(e);if(c)return tV(c);o=!1,i=tT,u=new rE}else u=t?[]:a;e:for(;++n<s;){var l=e[n],h=t?t(l):l;if(l=r||0!==l?l:0,o&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue e;t&&u.push(h),a.push(l)}else i(u,h,r)||(u!==a&&u.push(h),a.push(l))}return a}function nO(e,t){return t=nL(t,e),null==(e=ij(e,t))||delete e[iV(i3(t))]}function nx(e,t,r,n){return nv(e,t,r(rQ(e,t)),n)}function nA(e,t,r,n){for(var i=e.length,s=n?i:-1;(n?s--:++s<i)&&t(e[s],s,e););return r?nD(e,n?0:s,n?s+1:i):nD(e,n?s+1:0,n?i:s)}function nN(e,t){var r=e;return r instanceof rb&&(r=r.value()),tg(t,function(e,t){return t.func.apply(t.thisArg,td([e],t.args))},r)}function nR(e,t,r){var n=e.length;if(n<2)return n?nP(e[0]):[];for(var i=-1,s=em(n);++i<n;)for(var o=e[i],a=-1;++a<n;)a!=i&&(s[i]=rz(s[i]||o,e[a],t,r));return nP(rK(s,1),t,r)}function nT(e,t,n){for(var i=-1,s=e.length,o=t.length,a={};++i<s;){var u=i<o?t[i]:r;n(a,e[i],u)}return a}function nj(e){return sV(e)?e:[]}function nU(e){return"function"==typeof e?e:oV}function nL(e,t){return sz(e)?e:iO(e,t)?[e]:iF(oi(e))}function nk(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:nD(e,t,n)}var n$=tm||function(e){return e5.clearTimeout(e)};function nM(e,t){if(t)return e.slice();var r=e.length,n=eB?eB(r):new e.constructor(r);return e.copy(n),n}function nz(e){var t=new e.constructor(e.byteLength);return new eq(t).set(new eq(e)),t}function nq(e,t){var r=t?nz(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function nF(e,t){if(e!==t){var n=e!==r,i=null===e,s=e==e,o=s8(e),a=t!==r,u=null===t,c=t==t,l=s8(t);if(!u&&!l&&!o&&e>t||o&&a&&c&&!u&&!l||i&&a&&c||!n&&c||!s)return 1;if(!i&&!o&&!l&&e<t||l&&n&&s&&!i&&!o||u&&n&&s||!a&&s||!c)return -1}return 0}function nV(e,t,r,n){for(var i=-1,s=e.length,o=r.length,a=-1,u=t.length,c=t5(s-o,0),l=em(u+c),h=!n;++a<u;)l[a]=t[a];for(;++i<o;)(h||i<s)&&(l[r[i]]=e[i]);for(;c--;)l[a++]=e[i++];return l}function nB(e,t,r,n){for(var i=-1,s=e.length,o=-1,a=r.length,u=-1,c=t.length,l=t5(s-a,0),h=em(l+c),f=!n;++i<l;)h[i]=e[i];for(var p=i;++u<c;)h[p+u]=t[u];for(;++o<a;)(f||i<s)&&(h[p+r[o]]=e[i++]);return h}function nH(e,t){var r=-1,n=e.length;for(t||(t=em(n));++r<n;)t[r]=e[r];return t}function nK(e,t,n,i){var s=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var u=t[o],c=i?i(n[u],e[u],u,n,e):r;c===r&&(c=e[u]),s?rj(n,u,c):rA(n,u,c)}return n}function nW(e,t){return function(r,n){var i=sz(r)?to:rR,s=t?t():{};return i(r,e,iy(n,2),s)}}function nG(e){return nd(function(t,n){var i=-1,s=n.length,o=s>1?n[s-1]:r,a=s>2?n[2]:r;for(o=e.length>3&&"function"==typeof o?(s--,o):r,a&&iP(n[0],n[1],a)&&(o=s<3?r:o,s=1),t=eE(t);++i<s;){var u=n[i];u&&e(t,u,i,o)}return t})}function nJ(e,t){return function(r,n){if(null==r)return r;if(!sF(r))return e(r,n);for(var i=r.length,s=t?i:-1,o=eE(r);(t?s--:++s<i)&&!1!==n(o[s],s,o););return r}}function nY(e){return function(t,r,n){for(var i=-1,s=eE(t),o=n(t),a=o.length;a--;){var u=o[e?a:++i];if(!1===r(s[u],u,s))break}return t}}function nZ(e){return function(t){var n=tM(t=oi(t))?tH(t):r,i=n?n[0]:t.charAt(0),s=n?nk(n,1).join(""):t.slice(1);return i[e]()+s}}function nQ(e){return function(t){return tg(ok(ox(t).replace(eF,"")),e,"")}}function nX(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=ry(e.prototype),n=e.apply(r,t);return sY(n)?n:r}}function n0(e){return function(t,n,i){var s=eE(t);if(!sF(t)){var o=iy(n,3);t=ov(t),n=function(e){return o(s[e],e,s)}}var a=e(t,n,i);return a>-1?s[o?t[a]:a]:r}}function n1(e){return ic(function(t){var i=t.length,s=i,o=rm.prototype.thru;for(e&&t.reverse();s--;){var a=t[s];if("function"!=typeof a)throw new eS(n);if(o&&!u&&"wrapper"==id(a))var u=new rm([],!0)}for(s=u?s:i;++s<i;){var c=id(a=t[s]),l="wrapper"==c?ip(a):r;u=l&&ix(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[id(l[0])].apply(u,l[3]):1==a.length&&ix(a)?u[c]():u.thru(a)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&sz(r))return u.plant(r).value();for(var n=0,s=i?t[n].apply(this,e):r;++n<i;)s=t[n].call(this,s);return s}})}function n3(e,t,n,i,s,o,a,u,c,l){var h=128&t,f=1&t,p=2&t,d=24&t,g=512&t,y=p?r:nX(e);return function v(){for(var m=arguments.length,b=em(m),D=m;D--;)b[D]=arguments[D];if(d)var _=ig(v),w=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(b,_);if(i&&(b=nV(b,i,s,d)),o&&(b=nB(b,o,a,d)),m-=w,d&&m<l){var E=tF(b,_);return n7(e,t,n3,v.placeholder,n,b,E,u,c,l-m)}var I=f?n:this,C=p?I[e]:e;return m=b.length,u?b=function(e,t){for(var n=e.length,i=t8(t.length,n),s=nH(e);i--;){var o=t[i];e[i]=iS(o,n)?s[o]:r}return e}(b,u):g&&m>1&&b.reverse(),h&&c<m&&(b.length=c),this&&this!==e5&&this instanceof v&&(C=y||nX(C)),C.apply(I,b)}}function n5(e,t){return function(r,n){var i,s;return i=t(n),s={},rJ(r,function(t,r,n){e(s,i(t),r,n)}),s}}function n8(e,t){return function(n,i){var s;if(n===r&&i===r)return t;if(n!==r&&(s=n),i!==r){if(s===r)return i;"string"==typeof n||"string"==typeof i?(n=nS(n),i=nS(i)):(n=nC(n),i=nC(i)),s=e(n,i)}return s}}function n2(e){return ic(function(t){return t=tp(t,tN(iy())),nd(function(r){var n=this;return e(t,function(e){return ts(e,n,r)})})})}function n6(e,t){var n=(t=t===r?" ":nS(t)).length;if(n<2)return n?np(t,e):t;var i=np(t,tY(e/tB(t)));return tM(t)?nk(tH(i),0,e).join(""):i.slice(0,e)}function n4(e){return function(t,n,i){return i&&"number"!=typeof i&&iP(t,n,i)&&(n=i=r),t=s7(t),n===r?(n=t,t=0):n=s7(n),i=i===r?t<n?1:-1:s7(i),function(e,t,r,n){for(var i=-1,s=t5(tY((t-e)/(r||1)),0),o=em(s);s--;)o[n?s:++i]=e,e+=r;return o}(t,n,i,e)}}function n9(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=or(t),r=or(r)),e(t,r)}}function n7(e,t,n,i,s,o,a,u,c,l){var h=8&t;t|=h?32:64,4&(t&=~(h?64:32))||(t&=-4);var f=[e,t,s,h?o:r,h?a:r,h?r:o,h?r:a,u,c,l],p=n.apply(r,f);return ix(e)&&iL(p,f),p.placeholder=i,iM(p,e,t)}function ie(e){var t=ew[e];return function(e,r){if(e=or(e),(r=null==r?0:t8(oe(r),292))&&t0(e)){var n=(oi(e)+"e").split("e");return+((n=(oi(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var it=rr&&1/tV(new rr([,-0]))[1]==o?function(e){return new rr(e)}:oG;function ir(e){return function(t){var r,n,i=iw(t);return i==y?tz(t):i==_?(r=-1,n=Array(t.size),t.forEach(function(e){n[++r]=[e,e]}),n):tp(e(t),function(e){return[e,t[e]]})}}function ii(e,t,i,o,a,u,c,l){var h=2&t;if(!h&&"function"!=typeof e)throw new eS(n);var f=o?o.length:0;if(f||(t&=-97,o=a=r),c=c===r?c:t5(oe(c),0),l=l===r?l:oe(l),f-=a?a.length:0,64&t){var p=o,d=a;o=a=r}var g=h?r:ip(e),y=[e,t,i,o,a,p,d,u,c,l];if(g&&function(e,t){var r=e[1],n=t[1],i=r|n,o=i<131,a=128==n&&8==r||128==n&&256==r&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(o||a){1&n&&(e[2]=t[2],i|=1&r?0:4);var u=t[3];if(u){var c=e[3];e[3]=c?nV(c,u,t[4]):u,e[4]=c?tF(e[3],s):t[4]}(u=t[5])&&(c=e[5],e[5]=c?nB(c,u,t[6]):u,e[6]=c?tF(e[5],s):t[6]),(u=t[7])&&(e[7]=u),128&n&&(e[8]=null==e[8]?t[8]:t8(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}}(y,g),e=y[0],t=y[1],i=y[2],o=y[3],a=y[4],(l=y[9]=y[9]===r?h?0:e.length:t5(y[9]-f,0))||!(24&t)||(t&=-25),t&&1!=t)8==t||16==t?(v=e,m=t,b=l,D=nX(v),R=function e(){for(var t=arguments.length,n=em(t),i=t,s=ig(e);i--;)n[i]=arguments[i];var o=t<3&&n[0]!==s&&n[t-1]!==s?[]:tF(n,s);return(t-=o.length)<b?n7(v,m,n3,e.placeholder,r,n,o,r,r,b-t):ts(this&&this!==e5&&this instanceof e?D:v,this,n)}):32!=t&&33!=t||a.length?R=n3.apply(r,y):(_=e,w=t,E=i,I=o,C=1&w,S=nX(_),R=function e(){for(var t=-1,r=arguments.length,n=-1,i=I.length,s=em(i+r),o=this&&this!==e5&&this instanceof e?S:_;++n<i;)s[n]=I[n];for(;r--;)s[n++]=arguments[++t];return ts(o,C?E:this,s)});else var v,m,b,D,_,w,E,I,C,S,P,O,x,A,N,R=(P=e,O=t,x=i,A=1&O,N=nX(P),function e(){return(this&&this!==e5&&this instanceof e?N:P).apply(A?x:this,arguments)});return iM((g?nm:iL)(R,y),e,t)}function is(e,t,n,i){return e===r||sL(e,ex[n])&&!eR.call(i,n)?t:e}function io(e,t,n,i,s,o){return sY(e)&&sY(t)&&(o.set(t,e),no(e,t,r,io,o),o.delete(t)),e}function ia(e){return s0(e)?r:e}function iu(e,t,n,i,s,o){var a=1&n,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var l=o.get(e),h=o.get(t);if(l&&h)return l==t&&h==e;var f=-1,p=!0,d=2&n?new rE:r;for(o.set(e,t),o.set(t,e);++f<u;){var g=e[f],y=t[f];if(i)var v=a?i(y,g,f,t,e,o):i(g,y,f,e,t,o);if(v!==r){if(v)continue;p=!1;break}if(d){if(!tv(t,function(e,t){if(!tT(d,t)&&(g===e||s(g,e,n,i,o)))return d.push(t)})){p=!1;break}}else if(!(g===y||s(g,y,n,i,o))){p=!1;break}}return o.delete(e),o.delete(t),p}function ic(e){return i$(iT(e,r,iZ),e+"")}function il(e){return rX(e,ov,iD)}function ih(e){return rX(e,om,i_)}var ip=rs?function(e){return rs.get(e)}:oG;function id(e){for(var t=e.name+"",r=ro[t],n=eR.call(ro,t)?r.length:0;n--;){var i=r[n],s=i.func;if(null==s||s==e)return i.name}return t}function ig(e){return(eR.call(rg,"placeholder")?rg:e).placeholder}function iy(){var e=rg.iteratee||oB;return e=e===oB?ne:e,arguments.length?e(arguments[0],arguments[1]):e}function iv(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function im(e){for(var t=ov(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,i==i&&!sY(i)]}return t}function ib(e,t){var n=null==e?r:e[t];return r7(n)?n:r}var iD=tQ?function(e){return null==e?[]:tl(tQ(e=eE(e)),function(t){return e1.call(e,t)})}:o1,i_=tQ?function(e){for(var t=[];e;)td(t,iD(e)),e=eK(e);return t}:o1,iw=r0;function iE(e,t,r){t=nL(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=iV(t[n]);if(!(s=null!=e&&r(e,o)))break;e=e[o]}return s||++n!=i?s:!!(i=null==e?0:e.length)&&sJ(i)&&iS(o,i)&&(sz(e)||sM(e))}function iI(e){return"function"!=typeof e.constructor||iN(e)?{}:ry(eK(e))}function iC(e){return sz(e)||sM(e)||!!(e8&&e&&e[e8])}function iS(e,t){var r=typeof e;return!!(t=t??9007199254740991)&&("number"==r||"symbol"!=r&&eh.test(e))&&e>-1&&e%1==0&&e<t}function iP(e,t,r){if(!sY(r))return!1;var n=typeof t;return("number"==n?!!(sF(r)&&iS(t,r.length)):"string"==n&&t in r)&&sL(r[t],e)}function iO(e,t){if(sz(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||s8(e))||W.test(e)||!K.test(e)||null!=t&&e in eE(t)}function ix(e){var t=id(e),r=rg[t];if("function"!=typeof r||!(t in rb.prototype))return!1;if(e===r)return!0;var n=ip(r);return!!n&&e===n[0]}(t7&&iw(new t7(new ArrayBuffer(1)))!=S||re&&iw(new re)!=y||rt&&iw(rt.resolve())!=b||rr&&iw(new rr)!=_||rn&&iw(new rn)!=I)&&(iw=function(e){var t=r0(e),n=t==m?e.constructor:r,i=n?iB(n):"";if(i)switch(i){case ra:return S;case ru:return y;case rc:return b;case rl:return _;case rh:return I}return t});var iA=eA?sW:o3;function iN(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||ex;return e===r}function iR(e,t){return function(n){return null!=n&&n[e]===t&&(t!==r||e in eE(n))}}function iT(e,t,n){return t=t5(t===r?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=t5(r.length-t,0),o=em(s);++i<s;)o[i]=r[t+i];i=-1;for(var a=em(t+1);++i<t;)a[i]=r[i];return a[t]=n(o),ts(e,this,a)}}function ij(e,t){return t.length<2?e:rQ(e,nD(t,0,-1))}function iU(e,t){if(!("constructor"===t&&"function"==typeof e[t])&&"__proto__"!=t)return e[t]}var iL=iz(nm),ik=tJ||function(e,t){return e5.setTimeout(e,t)},i$=iz(e9?function(e,t){return e9(e,"toString",{configurable:!0,enumerable:!1,value:oz(t),writable:!0})}:oV);function iM(e,t,r){var n,i,s=t+"";return i$(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(X,`{
/* [wrapped with `+t+`] */
`)}(s,(n=(i=s.match(ee))?i[1].split(et):[],ta(u,function(e){var t="_."+e[0];r&e[1]&&!th(n,t)&&n.push(t)}),n.sort())))}function iz(e){var t=0,n=0;return function(){var i=t2(),s=16-(i-n);if(n=i,s>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function iq(e,t){var n=-1,i=e.length,s=i-1;for(t=t===r?i:t;++n<t;){var o=nf(n,s),a=e[o];e[o]=e[n],e[n]=a}return e.length=t,e}var iF=(ey=(eg=sA(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(G,function(e,r,n,i){t.push(n?i.replace(ei,"$1"):r||e)}),t},function(e){return 500===ey.size&&ey.clear(),e})).cache,eg);function iV(e){if("string"==typeof e||s8(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function iB(e){if(null!=e){try{return eN.call(e)}catch{}try{return e+""}catch{}}return""}function iH(e){if(e instanceof rb)return e.clone();var t=new rm(e.__wrapped__,e.__chain__);return t.__actions__=nH(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var iK=nd(function(e,t){return sV(e)?rz(e,rK(t,1,sV,!0)):[]}),iW=nd(function(e,t){var n=i3(t);return sV(n)&&(n=r),sV(e)?rz(e,rK(t,1,sV,!0),iy(n,2)):[]}),iG=nd(function(e,t){var n=i3(t);return sV(n)&&(n=r),sV(e)?rz(e,rK(t,1,sV,!0),r,n):[]});function iJ(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var i=null==r?0:oe(r);return i<0&&(i=t5(n+i,0)),tD(e,iy(t,3),i)}function iY(e,t,n){var i=null==e?0:e.length;if(!i)return -1;var s=i-1;return n!==r&&(s=oe(n),s=n<0?t5(i+s,0):t8(s,i-1)),tD(e,iy(t,3),s,!0)}function iZ(e){return(null==e?0:e.length)?rK(e,1):[]}function iQ(e){return e&&e.length?e[0]:r}var iX=nd(function(e){var t=tp(e,nj);return t.length&&t[0]===e[0]?r8(t):[]}),i0=nd(function(e){var t=i3(e),n=tp(e,nj);return t===i3(n)?t=r:n.pop(),n.length&&n[0]===e[0]?r8(n,iy(t,2)):[]}),i1=nd(function(e){var t=i3(e),n=tp(e,nj);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?r8(n,r,t):[]});function i3(e){var t=null==e?0:e.length;return t?e[t-1]:r}var i5=nd(i8);function i8(e,t){return e&&e.length&&t&&t.length?nl(e,t):e}var i2=ic(function(e,t){var r=null==e?0:e.length,n=rU(e,t);return nh(e,tp(t,function(e){return iS(e,r)?+e:e}).sort(nF)),n});function i6(e){return null==e?e:t9.call(e)}var i4=nd(function(e){return nP(rK(e,1,sV,!0))}),i9=nd(function(e){var t=i3(e);return sV(t)&&(t=r),nP(rK(e,1,sV,!0),iy(t,2))}),i7=nd(function(e){var t=i3(e);return t="function"==typeof t?t:r,nP(rK(e,1,sV,!0),r,t)});function se(e){if(!(e&&e.length))return[];var t=0;return e=tl(e,function(e){if(sV(e))return t=t5(e.length,t),!0}),tx(t,function(t){return tp(e,tC(t))})}function st(e,t){if(!(e&&e.length))return[];var n=se(e);return null==t?n:tp(n,function(e){return ts(t,r,e)})}var sr=nd(function(e,t){return sV(e)?rz(e,t):[]}),sn=nd(function(e){return nR(tl(e,sV))}),si=nd(function(e){var t=i3(e);return sV(t)&&(t=r),nR(tl(e,sV),iy(t,2))}),ss=nd(function(e){var t=i3(e);return t="function"==typeof t?t:r,nR(tl(e,sV),r,t)}),so=nd(se),sa=nd(function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,st(e,n)});function su(e){var t=rg(e);return t.__chain__=!0,t}function sc(e,t){return t(e)}var sl=ic(function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,s=function(t){return rU(t,e)};return!(t>1)&&!this.__actions__.length&&i instanceof rb&&iS(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:sc,args:[s],thisArg:r}),new rm(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(r),e})):this.thru(s)}),sh=nW(function(e,t,r){eR.call(e,r)?++e[r]:rj(e,r,1)}),sf=n0(iJ),sp=n0(iY);function sd(e,t){return(sz(e)?ta:rq)(e,iy(t,3))}function sg(e,t){return(sz(e)?tu:rF)(e,iy(t,3))}var sy=nW(function(e,t,r){eR.call(e,r)?e[r].push(t):rj(e,r,[t])}),sv=nd(function(e,t,r){var n=-1,i="function"==typeof t,s=sF(e)?em(e.length):[];return rq(e,function(e){s[++n]=i?ts(t,e,r):r2(e,t,r)}),s}),sm=nW(function(e,t,r){rj(e,r,t)});function sb(e,t){return(sz(e)?tp:nn)(e,iy(t,3))}var sD=nW(function(e,t,r){e[r?0:1].push(t)},function(){return[[],[]]}),s_=nd(function(e,t){if(null==e)return[];var r=t.length;return r>1&&iP(e,t[0],t[1])?t=[]:r>2&&iP(t[0],t[1],t[2])&&(t=[t[0]]),nu(e,rK(t,1),[])}),sw=tS||function(){return e5.Date.now()};function sE(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,ii(e,128,r,r,r,r,t)}function sI(e,t){var i;if("function"!=typeof t)throw new eS(n);return e=oe(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=r),i}}var sC=nd(function(e,t,r){var n=1;if(r.length){var i=tF(r,ig(sC));n|=32}return ii(e,n,t,r,i)}),sS=nd(function(e,t,r){var n=3;if(r.length){var i=tF(r,ig(sS));n|=32}return ii(t,n,e,r,i)});function sP(e,t,i){var s,o,a,u,c,l,h=0,f=!1,p=!1,d=!0;if("function"!=typeof e)throw new eS(n);function g(t){var n=s,i=o;return s=o=r,h=t,u=e.apply(i,n)}function y(e){var n=e-l,i=e-h;return l===r||n>=t||n<0||p&&i>=a}function v(){var e,r,n,i=sw();if(y(i))return m(i);c=ik(v,(e=i-l,r=i-h,n=t-e,p?t8(n,a-r):n))}function m(e){return c=r,d&&s?g(e):(s=o=r,u)}function b(){var e,n=sw(),i=y(n);if(s=arguments,o=this,l=n,i){if(c===r)return h=e=l,c=ik(v,t),f?g(e):u;if(p)return n$(c),c=ik(v,t),g(l)}return c===r&&(c=ik(v,t)),u}return t=or(t)||0,sY(i)&&(f=!!i.leading,a=(p="maxWait"in i)?t5(or(i.maxWait)||0,t):a,d="trailing"in i?!!i.trailing:d),b.cancel=function(){c!==r&&n$(c),h=0,s=l=o=c=r},b.flush=function(){return c===r?u:m(sw())},b}var sO=nd(function(e,t){return rM(e,1,t)}),sx=nd(function(e,t,r){return rM(e,or(t)||0,r)});function sA(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new eS(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(sA.Cache||rw),r}function sN(e){if("function"!=typeof e)throw new eS(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}sA.Cache=rw;var sR=nd(function(e,t){var r=(t=1==t.length&&sz(t[0])?tp(t[0],tN(iy())):tp(rK(t,1),tN(iy()))).length;return nd(function(n){for(var i=-1,s=t8(n.length,r);++i<s;)n[i]=t[i].call(this,n[i]);return ts(e,this,n)})}),sT=nd(function(e,t){var n=tF(t,ig(sT));return ii(e,32,r,t,n)}),sj=nd(function(e,t){var n=tF(t,ig(sj));return ii(e,64,r,t,n)}),sU=ic(function(e,t){return ii(e,256,r,r,r,t)});function sL(e,t){return e===t||e!=e&&t!=t}var sk=n9(r1),s$=n9(function(e,t){return e>=t}),sM=r6(function(){return arguments}())?r6:function(e){return sZ(e)&&eR.call(e,"callee")&&!e1.call(e,"callee")},sz=em.isArray,sq=e7?tN(e7):function(e){return sZ(e)&&r0(e)==C};function sF(e){return null!=e&&sJ(e.length)&&!sW(e)}function sV(e){return sZ(e)&&sF(e)}var sB=tX||o3,sH=te?tN(te):function(e){return sZ(e)&&r0(e)==f};function sK(e){if(!sZ(e))return!1;var t=r0(e);return t==p||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!s0(e)}function sW(e){if(!sY(e))return!1;var t=r0(e);return t==d||t==g||"[object AsyncFunction]"==t||"[object Proxy]"==t}function sG(e){return"number"==typeof e&&e==oe(e)}function sJ(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function sY(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function sZ(e){return null!=e&&"object"==typeof e}var sQ=tt?tN(tt):function(e){return sZ(e)&&iw(e)==y};function sX(e){return"number"==typeof e||sZ(e)&&r0(e)==v}function s0(e){if(!sZ(e)||r0(e)!=m)return!1;var t=eK(e);if(null===t)return!0;var r=eR.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&eN.call(r)==eL}var s1=tr?tN(tr):function(e){return sZ(e)&&r0(e)==D},s3=tn?tN(tn):function(e){return sZ(e)&&iw(e)==_};function s5(e){return"string"==typeof e||!sz(e)&&sZ(e)&&r0(e)==w}function s8(e){return"symbol"==typeof e||sZ(e)&&r0(e)==E}var s2=ti?tN(ti):function(e){return sZ(e)&&sJ(e.length)&&!!eY[r0(e)]},s6=n9(nr),s4=n9(function(e,t){return e<=t});function s9(e){if(!e)return[];if(sF(e))return s5(e)?tH(e):nH(e);if(e2&&e[e2])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[e2]());var t=iw(e);return(t==y?tz:t==_?tV:oS)(e)}function s7(e){return e?(e=or(e))===o||e===-o?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}function oe(e){var t=s7(e),r=t%1;return t==t?r?t-r:t:0}function ot(e){return e?rL(oe(e),0,4294967295):0}function or(e){if("number"==typeof e)return e;if(s8(e))return a;if(sY(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=sY(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=tA(e);var r=eu.test(e);return r||el.test(e)?e0(e.slice(2),r?2:8):ea.test(e)?a:+e}function on(e){return nK(e,om(e))}function oi(e){return null==e?"":nS(e)}var os=nG(function(e,t){if(iN(t)||sF(t)){nK(t,ov(t),e);return}for(var r in t)eR.call(t,r)&&rA(e,r,t[r])}),oo=nG(function(e,t){nK(t,om(t),e)}),oa=nG(function(e,t,r,n){nK(t,om(t),e,n)}),ou=nG(function(e,t,r,n){nK(t,ov(t),e,n)}),oc=ic(rU),ol=nd(function(e,t){e=eE(e);var n=-1,i=t.length,s=i>2?t[2]:r;for(s&&iP(t[0],t[1],s)&&(i=1);++n<i;)for(var o=t[n],a=om(o),u=-1,c=a.length;++u<c;){var l=a[u],h=e[l];(h===r||sL(h,ex[l])&&!eR.call(e,l))&&(e[l]=o[l])}return e}),oh=nd(function(e){return e.push(r,io),ts(oD,r,e)});function of(e,t,n){var i=null==e?r:rQ(e,t);return i===r?n:i}function op(e,t){return null!=e&&iE(e,t,r5)}var od=n5(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eU.call(t)),e[t]=r},oz(oV)),og=n5(function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=eU.call(t)),eR.call(e,t)?e[t].push(r):e[t]=[r]},iy),oy=nd(r2);function ov(e){return sF(e)?rC(e):nt(e)}function om(e){return sF(e)?rC(e,!0):function(e){if(!sY(e))return function(e){var t=[];if(null!=e)for(var r in eE(e))t.push(r);return t}(e);var t=iN(e),r=[];for(var n in e)"constructor"==n&&(t||!eR.call(e,n))||r.push(n);return r}(e)}var ob=nG(function(e,t,r){no(e,t,r)}),oD=nG(function(e,t,r,n){no(e,t,r,n)}),o_=ic(function(e,t){var r={};if(null==e)return r;var n=!1;t=tp(t,function(t){return t=nL(t,e),n||(n=t.length>1),t}),nK(e,ih(e),r),n&&(r=rk(r,7,ia));for(var i=t.length;i--;)nO(r,t[i]);return r}),ow=ic(function(e,t){return null==e?{}:nc(e,t,function(t,r){return op(e,r)})});function oE(e,t){if(null==e)return{};var r=tp(ih(e),function(e){return[e]});return t=iy(t),nc(e,r,function(e,r){return t(e,r[0])})}var oI=ir(ov),oC=ir(om);function oS(e){return null==e?[]:tR(e,ov(e))}var oP=nQ(function(e,t,r){return t=t.toLowerCase(),e+(r?oO(t):t)});function oO(e){return oL(oi(e).toLowerCase())}function ox(e){return(e=oi(e))&&e.replace(ef,tL).replace(eV,"")}var oA=nQ(function(e,t,r){return e+(r?"-":"")+t.toLowerCase()}),oN=nQ(function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}),oR=nZ("toLowerCase"),oT=nQ(function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}),oj=nQ(function(e,t,r){return e+(r?" ":"")+oL(t)}),oU=nQ(function(e,t,r){return e+(r?" ":"")+t.toUpperCase()}),oL=nZ("toUpperCase");function ok(e,t,n){var i;return e=oi(e),(t=n?r:t)===r?(i=e,eW.test(i))?e.match(eH)||[]:e.match(er)||[]:e.match(t)||[]}var o$=nd(function(e,t){try{return ts(e,r,t)}catch(e){return sK(e)?e:new eD(e)}}),oM=ic(function(e,t){return ta(t,function(t){rj(e,t=iV(t),sC(e[t],e))}),e});function oz(e){return function(){return e}}var oq=n1(),oF=n1(!0);function oV(e){return e}function oB(e){return ne("function"==typeof e?e:rk(e,1))}var oH=nd(function(e,t){return function(r){return r2(r,e,t)}}),oK=nd(function(e,t){return function(r){return r2(e,r,t)}});function oW(e,t,r){var n=ov(t),i=rZ(t,n);null!=r||sY(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=rZ(t,ov(t)));var s=!(sY(r)&&"chain"in r)||!!r.chain,o=sW(e);return ta(i,function(r){var n=t[r];e[r]=n,o&&(e.prototype[r]=function(){var t=this.__chain__;if(s||t){var r=e(this.__wrapped__);return(r.__actions__=nH(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,td([this.value()],arguments))})}),e}function oG(){}var oJ=n2(tp),oY=n2(tc),oZ=n2(tv);function oQ(e){return iO(e)?tC(iV(e)):function(t){return rQ(t,e)}}var oX=n4(),o0=n4(!0);function o1(){return[]}function o3(){return!1}var o5=n8(function(e,t){return e+t},0),o8=ie("ceil"),o2=n8(function(e,t){return e/t},1),o6=ie("floor"),o4=n8(function(e,t){return e*t},1),o9=ie("round"),o7=n8(function(e,t){return e-t},0);return rg.after=function(e,t){if("function"!=typeof t)throw new eS(n);return e=oe(e),function(){if(--e<1)return t.apply(this,arguments)}},rg.ary=sE,rg.assign=os,rg.assignIn=oo,rg.assignInWith=oa,rg.assignWith=ou,rg.at=oc,rg.before=sI,rg.bind=sC,rg.bindAll=oM,rg.bindKey=sS,rg.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return sz(e)?e:[e]},rg.chain=su,rg.chunk=function(e,t,n){t=(n?iP(e,t,n):t===r)?1:t5(oe(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var s=0,o=0,a=em(tY(i/t));s<i;)a[o++]=nD(e,s,s+=t);return a},rg.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,i=[];++t<r;){var s=e[t];s&&(i[n++]=s)}return i},rg.concat=function(){var e=arguments.length;if(!e)return[];for(var t=em(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return td(sz(r)?nH(r):[r],rK(t,1))},rg.cond=function(e){var t=null==e?0:e.length,r=iy();return e=t?tp(e,function(e){if("function"!=typeof e[1])throw new eS(n);return[r(e[0]),e[1]]}):[],nd(function(r){for(var n=-1;++n<t;){var i=e[n];if(ts(i[0],this,r))return ts(i[1],this,r)}})},rg.conforms=function(e){var t,r;return r=ov(t=rk(e,1)),function(e){return r$(e,t,r)}},rg.constant=oz,rg.countBy=sh,rg.create=function(e,t){var r=ry(e);return null==t?r:rT(r,t)},rg.curry=function e(t,n,i){n=i?r:n;var s=ii(t,8,r,r,r,r,r,n);return s.placeholder=e.placeholder,s},rg.curryRight=function e(t,n,i){n=i?r:n;var s=ii(t,16,r,r,r,r,r,n);return s.placeholder=e.placeholder,s},rg.debounce=sP,rg.defaults=ol,rg.defaultsDeep=oh,rg.defer=sO,rg.delay=sx,rg.difference=iK,rg.differenceBy=iW,rg.differenceWith=iG,rg.drop=function(e,t,n){var i=null==e?0:e.length;return i?nD(e,(t=n||t===r?1:oe(t))<0?0:t,i):[]},rg.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?nD(e,0,(t=i-(t=n||t===r?1:oe(t)))<0?0:t):[]},rg.dropRightWhile=function(e,t){return e&&e.length?nA(e,iy(t,3),!0,!0):[]},rg.dropWhile=function(e,t){return e&&e.length?nA(e,iy(t,3),!0):[]},rg.fill=function(e,t,n,i){var s=null==e?0:e.length;return s?(n&&"number"!=typeof n&&iP(e,t,n)&&(n=0,i=s),function(e,t,n,i){var s=e.length;for((n=oe(n))<0&&(n=-n>s?0:s+n),(i=i===r||i>s?s:oe(i))<0&&(i+=s),i=n>i?0:ot(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},rg.filter=function(e,t){return(sz(e)?tl:rH)(e,iy(t,3))},rg.flatMap=function(e,t){return rK(sb(e,t),1)},rg.flatMapDeep=function(e,t){return rK(sb(e,t),o)},rg.flatMapDepth=function(e,t,n){return n=n===r?1:oe(n),rK(sb(e,t),n)},rg.flatten=iZ,rg.flattenDeep=function(e){return(null==e?0:e.length)?rK(e,o):[]},rg.flattenDepth=function(e,t){return(null==e?0:e.length)?rK(e,t=t===r?1:oe(t)):[]},rg.flip=function(e){return ii(e,512)},rg.flow=oq,rg.flowRight=oF,rg.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var i=e[t];n[i[0]]=i[1]}return n},rg.functions=function(e){return null==e?[]:rZ(e,ov(e))},rg.functionsIn=function(e){return null==e?[]:rZ(e,om(e))},rg.groupBy=sy,rg.initial=function(e){return(null==e?0:e.length)?nD(e,0,-1):[]},rg.intersection=iX,rg.intersectionBy=i0,rg.intersectionWith=i1,rg.invert=od,rg.invertBy=og,rg.invokeMap=sv,rg.iteratee=oB,rg.keyBy=sm,rg.keys=ov,rg.keysIn=om,rg.map=sb,rg.mapKeys=function(e,t){var r={};return t=iy(t,3),rJ(e,function(e,n,i){rj(r,t(e,n,i),e)}),r},rg.mapValues=function(e,t){var r={};return t=iy(t,3),rJ(e,function(e,n,i){rj(r,n,t(e,n,i))}),r},rg.matches=function(e){return ni(rk(e,1))},rg.matchesProperty=function(e,t){return ns(e,rk(t,1))},rg.memoize=sA,rg.merge=ob,rg.mergeWith=oD,rg.method=oH,rg.methodOf=oK,rg.mixin=oW,rg.negate=sN,rg.nthArg=function(e){return e=oe(e),nd(function(t){return na(t,e)})},rg.omit=o_,rg.omitBy=function(e,t){return oE(e,sN(iy(t)))},rg.once=function(e){return sI(2,e)},rg.orderBy=function(e,t,n,i){return null==e?[]:(sz(t)||(t=null==t?[]:[t]),sz(n=i?r:n)||(n=null==n?[]:[n]),nu(e,t,n))},rg.over=oJ,rg.overArgs=sR,rg.overEvery=oY,rg.overSome=oZ,rg.partial=sT,rg.partialRight=sj,rg.partition=sD,rg.pick=ow,rg.pickBy=oE,rg.property=oQ,rg.propertyOf=function(e){return function(t){return null==e?r:rQ(e,t)}},rg.pull=i5,rg.pullAll=i8,rg.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?nl(e,t,iy(r,2)):e},rg.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?nl(e,t,r,n):e},rg.pullAt=i2,rg.range=oX,rg.rangeRight=o0,rg.rearg=sU,rg.reject=function(e,t){return(sz(e)?tl:rH)(e,sN(iy(t,3)))},rg.remove=function(e,t){var r=[];if(!(e&&e.length))return r;var n=-1,i=[],s=e.length;for(t=iy(t,3);++n<s;){var o=e[n];t(o,n,e)&&(r.push(o),i.push(n))}return nh(e,i),r},rg.rest=function(e,t){if("function"!=typeof e)throw new eS(n);return nd(e,t=t===r?t:oe(t))},rg.reverse=i6,rg.sampleSize=function(e,t,n){return t=(n?iP(e,t,n):t===r)?1:oe(t),(sz(e)?rP:ny)(e,t)},rg.set=function(e,t,r){return null==e?e:nv(e,t,r)},rg.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:nv(e,t,n,i)},rg.shuffle=function(e){return(sz(e)?rO:nb)(e)},rg.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&iP(e,t,n)?(t=0,n=i):(t=null==t?0:oe(t),n=n===r?i:oe(n)),nD(e,t,n)):[]},rg.sortBy=s_,rg.sortedUniq=function(e){return e&&e.length?nI(e):[]},rg.sortedUniqBy=function(e,t){return e&&e.length?nI(e,iy(t,2)):[]},rg.split=function(e,t,n){return n&&"number"!=typeof n&&iP(e,t,n)&&(t=n=r),(n=n===r?4294967295:n>>>0)?(e=oi(e))&&("string"==typeof t||null!=t&&!s1(t))&&!(t=nS(t))&&tM(e)?nk(tH(e),0,n):e.split(t,n):[]},rg.spread=function(e,t){if("function"!=typeof e)throw new eS(n);return t=null==t?0:t5(oe(t),0),nd(function(r){var n=r[t],i=nk(r,0,t);return n&&td(i,n),ts(e,this,i)})},rg.tail=function(e){var t=null==e?0:e.length;return t?nD(e,1,t):[]},rg.take=function(e,t,n){return e&&e.length?nD(e,0,(t=n||t===r?1:oe(t))<0?0:t):[]},rg.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?nD(e,(t=i-(t=n||t===r?1:oe(t)))<0?0:t,i):[]},rg.takeRightWhile=function(e,t){return e&&e.length?nA(e,iy(t,3),!1,!0):[]},rg.takeWhile=function(e,t){return e&&e.length?nA(e,iy(t,3)):[]},rg.tap=function(e,t){return t(e),e},rg.throttle=function(e,t,r){var i=!0,s=!0;if("function"!=typeof e)throw new eS(n);return sY(r)&&(i="leading"in r?!!r.leading:i,s="trailing"in r?!!r.trailing:s),sP(e,t,{leading:i,maxWait:t,trailing:s})},rg.thru=sc,rg.toArray=s9,rg.toPairs=oI,rg.toPairsIn=oC,rg.toPath=function(e){return sz(e)?tp(e,iV):s8(e)?[e]:nH(iF(oi(e)))},rg.toPlainObject=on,rg.transform=function(e,t,r){var n=sz(e),i=n||sB(e)||s2(e);if(t=iy(t,4),null==r){var s=e&&e.constructor;r=i?n?new s:[]:sY(e)&&sW(s)?ry(eK(e)):{}}return(i?ta:rJ)(e,function(e,n,i){return t(r,e,n,i)}),r},rg.unary=function(e){return sE(e,1)},rg.union=i4,rg.unionBy=i9,rg.unionWith=i7,rg.uniq=function(e){return e&&e.length?nP(e):[]},rg.uniqBy=function(e,t){return e&&e.length?nP(e,iy(t,2)):[]},rg.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?nP(e,r,t):[]},rg.unset=function(e,t){return null==e||nO(e,t)},rg.unzip=se,rg.unzipWith=st,rg.update=function(e,t,r){return null==e?e:nx(e,t,nU(r))},rg.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:nx(e,t,nU(n),i)},rg.values=oS,rg.valuesIn=function(e){return null==e?[]:tR(e,om(e))},rg.without=sr,rg.words=ok,rg.wrap=function(e,t){return sT(nU(t),e)},rg.xor=sn,rg.xorBy=si,rg.xorWith=ss,rg.zip=so,rg.zipObject=function(e,t){return nT(e||[],t||[],rA)},rg.zipObjectDeep=function(e,t){return nT(e||[],t||[],nv)},rg.zipWith=sa,rg.entries=oI,rg.entriesIn=oC,rg.extend=oo,rg.extendWith=oa,oW(rg,rg),rg.add=o5,rg.attempt=o$,rg.camelCase=oP,rg.capitalize=oO,rg.ceil=o8,rg.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=or(n))==n?n:0),t!==r&&(t=(t=or(t))==t?t:0),rL(or(e),t,n)},rg.clone=function(e){return rk(e,4)},rg.cloneDeep=function(e){return rk(e,5)},rg.cloneDeepWith=function(e,t){return rk(e,5,t="function"==typeof t?t:r)},rg.cloneWith=function(e,t){return rk(e,4,t="function"==typeof t?t:r)},rg.conformsTo=function(e,t){return null==t||r$(e,t,ov(t))},rg.deburr=ox,rg.defaultTo=function(e,t){return null==e||e!=e?t:e},rg.divide=o2,rg.endsWith=function(e,t,n){e=oi(e),t=nS(t);var i=e.length,s=n=n===r?i:rL(oe(n),0,i);return(n-=t.length)>=0&&e.slice(n,s)==t},rg.eq=sL,rg.escape=function(e){return(e=oi(e))&&F.test(e)?e.replace(z,tk):e},rg.escapeRegExp=function(e){return(e=oi(e))&&Y.test(e)?e.replace(J,"\\$&"):e},rg.every=function(e,t,n){var i=sz(e)?tc:rV;return n&&iP(e,t,n)&&(t=r),i(e,iy(t,3))},rg.find=sf,rg.findIndex=iJ,rg.findKey=function(e,t){return tb(e,iy(t,3),rJ)},rg.findLast=sp,rg.findLastIndex=iY,rg.findLastKey=function(e,t){return tb(e,iy(t,3),rY)},rg.floor=o6,rg.forEach=sd,rg.forEachRight=sg,rg.forIn=function(e,t){return null==e?e:rW(e,iy(t,3),om)},rg.forInRight=function(e,t){return null==e?e:rG(e,iy(t,3),om)},rg.forOwn=function(e,t){return e&&rJ(e,iy(t,3))},rg.forOwnRight=function(e,t){return e&&rY(e,iy(t,3))},rg.get=of,rg.gt=sk,rg.gte=s$,rg.has=function(e,t){return null!=e&&iE(e,t,r3)},rg.hasIn=op,rg.head=iQ,rg.identity=oV,rg.includes=function(e,t,r,n){e=sF(e)?e:oS(e),r=r&&!n?oe(r):0;var i=e.length;return r<0&&(r=t5(i+r,0)),s5(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&t_(e,t,r)>-1},rg.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return -1;var i=null==r?0:oe(r);return i<0&&(i=t5(n+i,0)),t_(e,t,i)},rg.inRange=function(e,t,n){var i,s,o;return t=s7(t),n===r?(n=t,t=0):n=s7(n),(i=e=or(e))>=t8(s=t,o=n)&&i<t5(s,o)},rg.invoke=oy,rg.isArguments=sM,rg.isArray=sz,rg.isArrayBuffer=sq,rg.isArrayLike=sF,rg.isArrayLikeObject=sV,rg.isBoolean=function(e){return!0===e||!1===e||sZ(e)&&r0(e)==h},rg.isBuffer=sB,rg.isDate=sH,rg.isElement=function(e){return sZ(e)&&1===e.nodeType&&!s0(e)},rg.isEmpty=function(e){if(null==e)return!0;if(sF(e)&&(sz(e)||"string"==typeof e||"function"==typeof e.splice||sB(e)||s2(e)||sM(e)))return!e.length;var t=iw(e);if(t==y||t==_)return!e.size;if(iN(e))return!nt(e).length;for(var r in e)if(eR.call(e,r))return!1;return!0},rg.isEqual=function(e,t){return r4(e,t)},rg.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?r4(e,t,r,n):!!i},rg.isError=sK,rg.isFinite=function(e){return"number"==typeof e&&t0(e)},rg.isFunction=sW,rg.isInteger=sG,rg.isLength=sJ,rg.isMap=sQ,rg.isMatch=function(e,t){return e===t||r9(e,t,im(t))},rg.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,r9(e,t,im(t),n)},rg.isNaN=function(e){return sX(e)&&e!=+e},rg.isNative=function(e){if(iA(e))throw new eD("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return r7(e)},rg.isNil=function(e){return null==e},rg.isNull=function(e){return null===e},rg.isNumber=sX,rg.isObject=sY,rg.isObjectLike=sZ,rg.isPlainObject=s0,rg.isRegExp=s1,rg.isSafeInteger=function(e){return sG(e)&&e>=-9007199254740991&&e<=9007199254740991},rg.isSet=s3,rg.isString=s5,rg.isSymbol=s8,rg.isTypedArray=s2,rg.isUndefined=function(e){return e===r},rg.isWeakMap=function(e){return sZ(e)&&iw(e)==I},rg.isWeakSet=function(e){return sZ(e)&&"[object WeakSet]"==r0(e)},rg.join=function(e,t){return null==e?"":t1.call(e,t)},rg.kebabCase=oA,rg.last=i3,rg.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return -1;var s=i;return n!==r&&(s=(s=oe(n))<0?t5(i+s,0):t8(s,i-1)),t==t?function(e,t,r){for(var n=r+1;n--&&e[n]!==t;);return n}(e,t,s):tD(e,tE,s,!0)},rg.lowerCase=oN,rg.lowerFirst=oR,rg.lt=s6,rg.lte=s4,rg.max=function(e){return e&&e.length?rB(e,oV,r1):r},rg.maxBy=function(e,t){return e&&e.length?rB(e,iy(t,2),r1):r},rg.mean=function(e){return tI(e,oV)},rg.meanBy=function(e,t){return tI(e,iy(t,2))},rg.min=function(e){return e&&e.length?rB(e,oV,nr):r},rg.minBy=function(e,t){return e&&e.length?rB(e,iy(t,2),nr):r},rg.stubArray=o1,rg.stubFalse=o3,rg.stubObject=function(){return{}},rg.stubString=function(){return""},rg.stubTrue=function(){return!0},rg.multiply=o4,rg.nth=function(e,t){return e&&e.length?na(e,oe(t)):r},rg.noConflict=function(){return e5._===this&&(e5._=ek),this},rg.noop=oG,rg.now=sw,rg.pad=function(e,t,r){e=oi(e);var n=(t=oe(t))?tB(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return n6(tZ(i),r)+e+n6(tY(i),r)},rg.padEnd=function(e,t,r){e=oi(e);var n=(t=oe(t))?tB(e):0;return t&&n<t?e+n6(t-n,r):e},rg.padStart=function(e,t,r){e=oi(e);var n=(t=oe(t))?tB(e):0;return t&&n<t?n6(t-n,r)+e:e},rg.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),t6(oi(e).replace(Z,""),t||0)},rg.random=function(e,t,n){if(n&&"boolean"!=typeof n&&iP(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=s7(e),t===r?(t=e,e=0):t=s7(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var s=t4();return t8(e+s*(t-e+eX("1e-"+((s+"").length-1))),t)}return nf(e,t)},rg.reduce=function(e,t,r){var n=sz(e)?tg:tP,i=arguments.length<3;return n(e,iy(t,4),r,i,rq)},rg.reduceRight=function(e,t,r){var n=sz(e)?ty:tP,i=arguments.length<3;return n(e,iy(t,4),r,i,rF)},rg.repeat=function(e,t,n){return t=(n?iP(e,t,n):t===r)?1:oe(t),np(oi(e),t)},rg.replace=function(){var e=arguments,t=oi(e[0]);return e.length<3?t:t.replace(e[1],e[2])},rg.result=function(e,t,n){t=nL(t,e);var i=-1,s=t.length;for(s||(s=1,e=r);++i<s;){var o=null==e?r:e[iV(t[i])];o===r&&(i=s,o=n),e=sW(o)?o.call(e):o}return e},rg.round=o9,rg.runInContext=e,rg.sample=function(e){return(sz(e)?rS:ng)(e)},rg.size=function(e){if(null==e)return 0;if(sF(e))return s5(e)?tB(e):e.length;var t=iw(e);return t==y||t==_?e.size:nt(e).length},rg.snakeCase=oT,rg.some=function(e,t,n){var i=sz(e)?tv:n_;return n&&iP(e,t,n)&&(t=r),i(e,iy(t,3))},rg.sortedIndex=function(e,t){return nw(e,t)},rg.sortedIndexBy=function(e,t,r){return nE(e,t,iy(r,2))},rg.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=nw(e,t);if(n<r&&sL(e[n],t))return n}return -1},rg.sortedLastIndex=function(e,t){return nw(e,t,!0)},rg.sortedLastIndexBy=function(e,t,r){return nE(e,t,iy(r,2),!0)},rg.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=nw(e,t,!0)-1;if(sL(e[r],t))return r}return -1},rg.startCase=oj,rg.startsWith=function(e,t,r){return e=oi(e),r=null==r?0:rL(oe(r),0,e.length),t=nS(t),e.slice(r,r+t.length)==t},rg.subtract=o7,rg.sum=function(e){return e&&e.length?tO(e,oV):0},rg.sumBy=function(e,t){return e&&e.length?tO(e,iy(t,2)):0},rg.template=function(e,t,n){var i=rg.templateSettings;n&&iP(e,t,n)&&(t=r),e=oi(e),t=oa({},t,i,is);var s,o,a=oa({},t.imports,i.imports,is),u=ov(a),c=tR(a,u),l=0,h=t.interpolate||ep,f="__p += '",p=eI((t.escape||ep).source+"|"+h.source+"|"+(h===H?es:ep).source+"|"+(t.evaluate||ep).source+"|$","g"),d="//# sourceURL="+(eR.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++eJ+"]")+`
`;e.replace(p,function(t,r,n,i,a,u){return n||(n=i),f+=e.slice(l,u).replace(ed,t$),r&&(s=!0,f+=`' +
__e(`+r+`) +
'`),a&&(o=!0,f+=`';
`+a+`;
__p += '`),n&&(f+=`' +
((__t = (`+n+`)) == null ? '' : __t) +
'`),l=u+t.length,t}),f+=`';
`;var g=eR.call(t,"variable")&&t.variable;if(g){if(en.test(g))throw new eD("Invalid `variable` option passed into `_.template`")}else f=`with (obj) {
`+f+`
}
`;f=(o?f.replace(L,""):f).replace(k,"$1").replace($,"$1;"),f="function("+(g||"obj")+`) {
`+(g?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+f+`return __p
}`;var y=o$(function(){return e_(u,d+"return "+f).apply(r,c)});if(y.source=f,sK(y))throw y;return y},rg.times=function(e,t){if((e=oe(e))<1||e>9007199254740991)return[];var r=4294967295,n=t8(e,4294967295);t=iy(t),e-=4294967295;for(var i=tx(n,t);++r<e;)t(r);return i},rg.toFinite=s7,rg.toInteger=oe,rg.toLength=ot,rg.toLower=function(e){return oi(e).toLowerCase()},rg.toNumber=or,rg.toSafeInteger=function(e){return e?rL(oe(e),-9007199254740991,9007199254740991):0===e?e:0},rg.toString=oi,rg.toUpper=function(e){return oi(e).toUpperCase()},rg.trim=function(e,t,n){if((e=oi(e))&&(n||t===r))return tA(e);if(!e||!(t=nS(t)))return e;var i=tH(e),s=tH(t),o=tj(i,s),a=tU(i,s)+1;return nk(i,o,a).join("")},rg.trimEnd=function(e,t,n){if((e=oi(e))&&(n||t===r))return e.slice(0,tK(e)+1);if(!e||!(t=nS(t)))return e;var i=tH(e),s=tU(i,tH(t))+1;return nk(i,0,s).join("")},rg.trimStart=function(e,t,n){if((e=oi(e))&&(n||t===r))return e.replace(Z,"");if(!e||!(t=nS(t)))return e;var i=tH(e),s=tj(i,tH(t));return nk(i,s).join("")},rg.truncate=function(e,t){var n=30,i="...";if(sY(t)){var s="separator"in t?t.separator:s;n="length"in t?oe(t.length):n,i="omission"in t?nS(t.omission):i}var o=(e=oi(e)).length;if(tM(e)){var a=tH(e);o=a.length}if(n>=o)return e;var u=n-tB(i);if(u<1)return i;var c=a?nk(a,0,u).join(""):e.slice(0,u);if(s===r)return c+i;if(a&&(u+=c.length-u),s1(s)){if(e.slice(u).search(s)){var l,h=c;for(s.global||(s=eI(s.source,oi(eo.exec(s))+"g")),s.lastIndex=0;l=s.exec(h);)var f=l.index;c=c.slice(0,f===r?u:f)}}else if(e.indexOf(nS(s),u)!=u){var p=c.lastIndexOf(s);p>-1&&(c=c.slice(0,p))}return c+i},rg.unescape=function(e){return(e=oi(e))&&q.test(e)?e.replace(M,tW):e},rg.uniqueId=function(e){var t=++eT;return oi(e)+t},rg.upperCase=oU,rg.upperFirst=oL,rg.each=sd,rg.eachRight=sg,rg.first=iQ,oW(rg,(ev={},rJ(rg,function(e,t){eR.call(rg.prototype,t)||(ev[t]=e)}),ev),{chain:!1}),rg.VERSION="4.17.21",ta(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){rg[e].placeholder=rg}),ta(["drop","take"],function(e,t){rb.prototype[e]=function(n){n=n===r?1:t5(oe(n),0);var i=this.__filtered__&&!t?new rb(this):this.clone();return i.__filtered__?i.__takeCount__=t8(n,i.__takeCount__):i.__views__.push({size:t8(n,4294967295),type:e+(i.__dir__<0?"Right":"")}),i},rb.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),ta(["filter","map","takeWhile"],function(e,t){var r=t+1,n=1==r||3==r;rb.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:iy(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}}),ta(["head","last"],function(e,t){var r="take"+(t?"Right":"");rb.prototype[e]=function(){return this[r](1).value()[0]}}),ta(["initial","tail"],function(e,t){var r="drop"+(t?"":"Right");rb.prototype[e]=function(){return this.__filtered__?new rb(this):this[r](1)}}),rb.prototype.compact=function(){return this.filter(oV)},rb.prototype.find=function(e){return this.filter(e).head()},rb.prototype.findLast=function(e){return this.reverse().find(e)},rb.prototype.invokeMap=nd(function(e,t){return"function"==typeof e?new rb(this):this.map(function(r){return r2(r,e,t)})}),rb.prototype.reject=function(e){return this.filter(sN(iy(e)))},rb.prototype.slice=function(e,t){e=oe(e);var n=this;return n.__filtered__&&(e>0||t<0)?new rb(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=oe(t))<0?n.dropRight(-t):n.take(t-e)),n)},rb.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},rb.prototype.toArray=function(){return this.take(4294967295)},rJ(rb.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),s=rg[i?"take"+("last"==t?"Right":""):t],o=i||/^find/.test(t);s&&(rg.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,u=t instanceof rb,c=a[0],l=u||sz(t),h=function(e){var t=s.apply(rg,td([e],a));return i&&f?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=o&&!f,g=u&&!p;if(!o&&l){t=g?t:new rb(this);var y=e.apply(t,a);return y.__actions__.push({func:sc,args:[h],thisArg:r}),new rm(y,f)}return d&&g?e.apply(this,a):(y=this.thru(h),d?i?y.value()[0]:y.value():y)})}),ta(["pop","push","shift","sort","splice","unshift"],function(e){var t=eP[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);rg.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(sz(i)?i:[],e)}return this[r](function(r){return t.apply(sz(r)?r:[],e)})}}),rJ(rb.prototype,function(e,t){var r=rg[t];if(r){var n=r.name+"";eR.call(ro,n)||(ro[n]=[]),ro[n].push({name:t,func:r})}}),ro[n3(r,2).name]=[{name:"wrapper",func:r}],rb.prototype.clone=function(){var e=new rb(this.__wrapped__);return e.__actions__=nH(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nH(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nH(this.__views__),e},rb.prototype.reverse=function(){if(this.__filtered__){var e=new rb(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},rb.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=sz(e),n=t<0,i=r?e.length:0,s=function(e,t,r){for(var n=-1,i=r.length;++n<i;){var s=r[n],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=t8(t,e+o);break;case"takeRight":e=t5(e,t-o)}}return{start:e,end:t}}(0,i,this.__views__),o=s.start,a=s.end,u=a-o,c=n?a:o-1,l=this.__iteratees__,h=l.length,f=0,p=t8(u,this.__takeCount__);if(!r||!n&&i==u&&p==u)return nN(e,this.__actions__);var d=[];e:for(;u--&&f<p;){c+=t;for(var g=-1,y=e[c];++g<h;){var v=l[g],m=v.iteratee,b=v.type,D=m(y);if(2==b)y=D;else if(!D){if(1==b)continue e;break e}}d[f++]=y}return d},rg.prototype.at=sl,rg.prototype.chain=function(){return su(this)},rg.prototype.commit=function(){return new rm(this.value(),this.__chain__)},rg.prototype.next=function(){this.__values__===r&&(this.__values__=s9(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}},rg.prototype.plant=function(e){for(var t,n=this;n instanceof rv;){var i=iH(n);i.__index__=0,i.__values__=r,t?s.__wrapped__=i:t=i;var s=i;n=n.__wrapped__}return s.__wrapped__=e,t},rg.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof rb){var t=e;return this.__actions__.length&&(t=new rb(this)),(t=t.reverse()).__actions__.push({func:sc,args:[i6],thisArg:r}),new rm(t,this.__chain__)}return this.thru(i6)},rg.prototype.toJSON=rg.prototype.valueOf=rg.prototype.value=function(){return nN(this.__wrapped__,this.__actions__)},rg.prototype.first=rg.prototype.head,e2&&(rg.prototype[e2]=function(){return this}),rg}();e2?((e2.exports=tG)._=tG,e8._=tG):e5._=tG}).call(oJ)}(oY,oY.exports);var oZ=Object.defineProperty,oQ=Object.defineProperties,oX=Object.getOwnPropertyDescriptors,o0=Object.getOwnPropertySymbols,o1=Object.prototype.hasOwnProperty,o3=Object.prototype.propertyIsEnumerable,o5=(e,t,r)=>t in e?oZ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o8=(e,t)=>{for(var r in t||(t={}))o1.call(t,r)&&o5(e,r,t[r]);if(o0)for(var r of o0(t))o3.call(t,r)&&o5(e,r,t[r]);return e},o2=(e,t)=>oQ(e,oX(t));function o6(e,t,r){let n;let i=o4(e);return t.rpcMap&&(n=t.rpcMap[i]),n||(n=`https://rpc.walletconnect.com/v1?chainId=eip155:${i}&projectId=${r}`),n}function o4(e){return e.includes("eip155")?Number(e.split(":")[1]):Number(e)}function o9(e){return e.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function o7(e){var t,r,n,i;let s={};if(!n8(e))return s;for(let[o,a]of Object.entries(e)){let e=nZ(o)?[o]:a.chains,u=a.methods||[],c=a.events||[],l=a.rpcMap||{},h=nQ(o);s[h]=o2(o8(o8({},s[h]),a),{chains:nz(e,null==(t=s[h])?void 0:t.chains),methods:nz(u,null==(r=s[h])?void 0:r.methods),events:nz(c,null==(n=s[h])?void 0:n.events),rpcMap:o8(o8({},l),null==(i=s[h])?void 0:i.rpcMap)})}return s}function ae(e){return e.includes(":")?e.split(":")[2]:e}let at={},ar=e=>at[e],an=(e,t)=>{at[e]=t};class ai{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=ar("events"),this.client=ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||o6(`${this.name}:${e}`,this.namespace);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(oG.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e&&e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||o6(e,this.namespace);return typeof r>"u"?void 0:new iu.r(new oH.Z(r,ar("disableProviderPing")))}}class as{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=ar("events"),this.client=ar("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){let r=o4(e);if(!this.httpProviders[r]){let e=t||o6(`${this.name}:${r}`,this.namespace,this.client.core.projectId);if(!e)throw Error(`No RPC url provided for chainId: ${r}`);this.setHttpProvider(r,e)}this.chainId=r,this.events.emit(oG.DEFAULT_CHAIN_CHANGED,`${this.name}:${r}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){let r=t||o6(`${this.name}:${e}`,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new iu.r(new oH.k(r,ar("disableProviderPing")))}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;let n=o4(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){let e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let n=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;let i=parseInt(n,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`);else throw Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class ao{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=ar("events"),this.client=ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let r=t||o6(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(oG.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||o6(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new iu.r(new oH.Z(r,ar("disableProviderPing")))}}class aa{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=ar("events"),this.client=ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||o6(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(oG.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||o6(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new iu.r(new oH.Z(r,ar("disableProviderPing")))}}class au{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=ar("events"),this.client=ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){let r=t||this.getCardanoRPCUrl(e);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(oG.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{let r=this.getCardanoRPCUrl(t);e[t]=this.createHttpProvider(t,r)}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){let t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||this.getCardanoRPCUrl(e);return typeof r>"u"?void 0:new iu.r(new oH.Z(r,ar("disableProviderPing")))}}class ac{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=ar("events"),this.client=ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let r=t||o6(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(oG.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||o6(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new iu.r(new oH.Z(r,ar("disableProviderPing")))}}class al{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=ar("events"),this.client=ar("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){let r=t||o6(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(oG.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;let e=this.namespace.chains[0];if(!e)throw Error("ChainId not found");return e.split(":")[1]}getAccounts(){let e=this.namespace.accounts;return e?[...new Set(e.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){let e={};return this.namespace.chains.forEach(t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])}),e}getHttpProvider(){let e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){let r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){let r=t||o6(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new iu.r(new oH.Z(r,ar("disableProviderPing")))}}var ah=Object.defineProperty,af=Object.defineProperties,ap=Object.getOwnPropertyDescriptors,ad=Object.getOwnPropertySymbols,ag=Object.prototype.hasOwnProperty,ay=Object.prototype.propertyIsEnumerable,av=(e,t,r)=>t in e?ah(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,am=(e,t)=>{for(var r in t||(t={}))ag.call(t,r)&&av(e,r,t[r]);if(ad)for(var r of ad(t))ay.call(t,r)&&av(e,r,t[r]);return e},ab=(e,t)=>af(e,ap(t));class aD{constructor(e){this.events=new(R()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger="u">typeof e?.logger&&"string"!=typeof e?.logger?e.logger:(0,L.pino)((0,L.getDefaultLoggerOptions)({level:e?.logger||oK})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){let t=new aD(e);return await t.initialize(),t}async request(e,t){let[r,n]=this.validateChain(t);if(!this.session)throw Error("Please call connect() before request()");return await this.getProvider(r).request({request:am({},e),chainId:`${r}:${n}`,topic:this.session.topic})}sendAsync(e,t,r){this.request(e,r).then(e=>t(null,e)).catch(e=>t(e,void 0))}async enable(){if(!this.client)throw Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:n3("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let t=0;do{if(this.shouldAbortPairingAttempt)throw Error("Pairing aborted");if(t>=this.maxPairingAttempts)throw Error("Max auto pairing attempts reached");let{uri:r,approval:n}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});r&&(this.uri=r,this.events.emit("display_uri",r)),await n().then(e=>{this.session=e,this.namespaces||(this.namespaces=function(e){let t={};for(let[r,n]of Object.entries(e)){let e=n.methods||[],i=n.events||[],s=n.accounts||[],o=nZ(r)?[r]:n.chains?n.chains:o9(n.accounts);t[r]={chains:o,methods:e,events:i,accounts:s}}return t}(e.namespaces),this.persist("namespaces",this.namespaces))}).catch(e=>{if(e.message!==oS)throw e;t++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;let[r,n]=this.validateChain(e);this.getProvider(r).setDefaultChain(n,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");let t=this.client.pairing.getAll();if(n5(t)){for(let r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){let e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await oB.init({logger:this.providerOpts.logger||oK,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw Error("Sign Client not initialized");if(!this.session)throw Error("Session not initialized. Please call connect() before enable()");let e=[...new Set(Object.keys(this.session.namespaces).map(e=>nQ(e)))];an("client",this.client),an("events",this.events),an("disableProviderPing",this.disableProviderPing),e.forEach(e=>{if(!this.session)return;let t=function(e,t){let r=Object.keys(t.namespaces).filter(t=>t.includes(e));if(!r.length)return[];let n=[];return r.forEach(e=>{let r=t.namespaces[e].accounts;n.push(...r)}),n}(e,this.session),r=o9(t),n=function(e={},t={}){let r=o7(e),n=o7(t);return oY.exports.merge(r,n)}(this.namespaces,this.optionalNamespaces),i=ab(am({},n[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new as({namespace:i});break;case"solana":this.rpcProviders[e]=new ao({namespace:i});break;case"cosmos":this.rpcProviders[e]=new aa({namespace:i});break;case"polkadot":this.rpcProviders[e]=new ai({namespace:i});break;case"cip34":this.rpcProviders[e]=new au({namespace:i});break;case"elrond":this.rpcProviders[e]=new ac({namespace:i});break;case"multiversx":this.rpcProviders[e]=new al({namespace:i})}})}registerEventListeners(){if(typeof this.client>"u")throw Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{let{params:t}=e,{event:r}=t;if("accountsChanged"===r.name){let e=r.data;e&&n5(e)&&this.events.emit("accountsChanged",e.map(ae))}else"chainChanged"===r.name?this.onChainChanged(t.chainId):this.events.emit(r.name,r.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:t})=>{var r;let{namespaces:n}=t,i=null==(r=this.client)?void 0:r.session.get(e);this.session=ab(am({},i),{namespaces:n}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",ab(am({},n3("USER_DISCONNECTED")),{data:e.topic}))}),this.on(oG.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])})}setNamespaces(e){let{namespaces:t,optionalNamespaces:r,sessionProperties:n}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=n,this.persist("namespaces",t),this.persist("optionalNamespaces",r)}validateChain(e){let[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map(e=>nQ(e)).includes(t))throw Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];let n=nQ(Object.keys(this.namespaces)[0]),i=this.rpcProviders[n].getDefaultChain();return[n,i]}async requestAccounts(){let[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,t=!1){var r;if(!this.namespaces)return;let[n,i]=this.validateChain(e);t||this.getProvider(n).setDefaultChain(i),(null!=(r=this.namespaces[n])?r:this.namespaces[`${n}:${i}`]).defaultChain=i,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",i)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,t){this.client.core.storage.setItem(`${oW}/${e}`,t)}async getFromStore(e){return await this.client.core.storage.getItem(`${oW}/${e}`)}}let a_=["eth_sendTransaction","personal_sign"],aw=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],aE=["chainChanged","accountsChanged"],aI=["message","disconnect","connect"];var aC=Object.defineProperty,aS=Object.defineProperties,aP=Object.getOwnPropertyDescriptors,aO=Object.getOwnPropertySymbols,ax=Object.prototype.hasOwnProperty,aA=Object.prototype.propertyIsEnumerable,aN=(e,t,r)=>t in e?aC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aR=(e,t)=>{for(var r in t||(t={}))ax.call(t,r)&&aN(e,r,t[r]);if(aO)for(var r of aO(t))aA.call(t,r)&&aN(e,r,t[r]);return e},aT=(e,t)=>aS(e,aP(t));function aj(e){return Number(e[0].split(":")[1])}function aU(e){return`0x${e.toString(16)}`}class aL{constructor(){this.events=new N.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY="wc@2:ethereum_provider:",this.on=(e,t)=>(this.events.on(e,t),this),this.once=(e,t)=>(this.events.once(e,t),this),this.removeListener=(e,t)=>(this.events.removeListener(e,t),this),this.off=(e,t)=>(this.events.off(e,t),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){let t=new aL;return await t.initialize(e),t}async request(e){return await this.signer.request(e,this.formatChainId(this.chainId))}sendAsync(e,t){this.signer.sendAsync(e,t,this.formatChainId(this.chainId))}get connected(){return!!this.signer.client&&this.signer.client.core.relayer.connected}get connecting(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);let{required:t,optional:r}=function(e){let{chains:t,optionalChains:r,methods:n,optionalMethods:i,events:s,optionalEvents:o,rpcMap:a}=e;if(!(0,T.qt)(t))throw Error("Invalid chains");let u={chains:t,methods:n||a_,events:s||aE,rpcMap:aR({},t.length?{[aj(t)]:a[aj(t)]}:{})},c=s?.filter(e=>!aE.includes(e)),l=n?.filter(e=>!a_.includes(e));if(!r&&!o&&!i&&!(null!=c&&c.length)&&!(null!=l&&l.length))return{required:t.length?u:void 0};let h=c?.length&&l?.length||!r,f={chains:[...new Set(h?u.chains.concat(r||[]):r)],methods:[...new Set(u.methods.concat(null!=i&&i.length?i:aw))],events:[...new Set(u.events.concat(o||aI))],rpcMap:a};return{required:t.length?u:void 0,optional:r.length?f:void 0}}(this.rpc);try{let n=await new Promise(async(n,i)=>{var s;this.rpc.showQrModal&&(null==(s=this.modal)||s.subscribeModal(e=>{e.open||this.signer.session||(this.signer.abortPairingAttempt(),i(Error("Connection request reset. Please try again.")))})),await this.signer.connect(aT(aR({namespaces:aR({},t&&{[this.namespace]:t})},r&&{optionalNamespaces:{[this.namespace]:r}}),{pairingTopic:e?.pairingTopic})).then(e=>{n(e)}).catch(e=>{i(Error(e.message))})});if(!n)return;this.setChainIds(this.rpc.chains);let i=(0,T.gu)(n.namespaces,[this.namespace]);this.setAccounts(i),this.events.emit("connect",{chainId:aU(this.chainId)})}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{let{params:t}=e,{event:r}=t;"accountsChanged"===r.name?(this.accounts=this.parseAccounts(r.data),this.events.emit("accountsChanged",this.accounts)):"chainChanged"===r.name?this.setChainId(this.formatChainId(r.data)):this.events.emit(r.name,r.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{let t=parseInt(e);this.chainId=t,this.events.emit("chainChanged",aU(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",aT(aR({},(0,T.D6)("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var t,r;this.rpc.showQrModal&&(null==(t=this.modal)||t.closeModal(),null==(r=this.modal)||r.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return"string"==typeof e&&e.startsWith(`${this.namespace}:`)}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){let t=e.filter(e=>this.isCompatibleChainId(e)).map(e=>this.parseChainId(e));t.length&&(this.chainId=t[0],this.events.emit("chainChanged",aU(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){let t=this.parseChainId(e);this.chainId=t,this.switchEthereumChain(t)}}parseAccountId(e){let[t,r,n]=e.split(":");return{chainId:`${t}:${r}`,address:n}}setAccounts(e){this.accounts=e.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var t,r;let n=null!=(t=e?.chains)?t:[],i=null!=(r=e?.optionalChains)?r:[],s=n.concat(i);if(!s.length)throw Error("No chains specified in either `chains` or `optionalChains`");let o=n.length?e?.methods||a_:[],a=n.length?e?.events||aE:[],u=e?.optionalMethods||[],c=e?.optionalEvents||[],l=e?.rpcMap||this.buildRpcMap(s,e.projectId),h=e?.qrModalOptions||void 0;return{chains:n?.map(e=>this.formatChainId(e)),optionalChains:i.map(e=>this.formatChainId(e)),methods:o,events:a,optionalMethods:u,optionalEvents:c,rpcMap:l,showQrModal:!!(null!=e&&e.showQrModal),qrModalOptions:h,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,t){let r={};return e.forEach(e=>{r[e]=this.getRpcUrl(e,t)}),r}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?aj(this.rpc.chains):aj(this.rpc.optionalChains),this.signer=await aD.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{let{WalletConnectModal:t}=await r.e(9066).then(r.bind(r,99066));e=t}catch{throw Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(aR({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(e){throw this.signer.logger.error(e),Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;let{chains:t,optionalChains:r,rpcMap:n}=e;t&&(0,T.qt)(t)&&(this.rpc.chains=t.map(e=>this.formatChainId(e)),t.forEach(e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)})),r&&(0,T.qt)(r)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=r?.map(e=>this.formatChainId(e)),r.forEach(e=>{this.rpc.rpcMap[e]=n?.[e]||this.getRpcUrl(e)}))}getRpcUrl(e,t){var r;return(null==(r=this.rpc.rpcMap)?void 0:r[e])||`https://rpc.walletconnect.com/v1/?chainId=eip155:${e}&projectId=${t||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;let e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),t=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:t?.accounts),this.setAccounts(t?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return"string"==typeof e||e instanceof String?[this.parseAccount(e)]:e.map(e=>this.parseAccount(e))}}let ak=aL},38200:function(e,t,r){"use strict";r.d(t,{q:function(){return n}});class n{}},30997:function(e,t,r){"use strict";r.r(t),r.d(t,{IEvents:function(){return n.q}});var n=r(38200)},32568:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HEARTBEAT_EVENTS=t.HEARTBEAT_INTERVAL=void 0;let n=r(66736);t.HEARTBEAT_INTERVAL=n.FIVE_SECONDS,t.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},53401:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39653);n.__exportStar(r(32568),t)},38969:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeartBeat=void 0;let n=r(39653),i=r(17187),s=r(66736),o=r(1614),a=r(53401);class u extends o.IHeartBeat{constructor(e){super(e),this.events=new i.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=(null==e?void 0:e.interval)||a.HEARTBEAT_INTERVAL}static init(e){return n.__awaiter(this,void 0,void 0,function*(){let t=new u(e);return yield t.init(),t})}init(){return n.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}initialize(){return n.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),s.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}t.HeartBeat=u},90772:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39653);n.__exportStar(r(38969),t),n.__exportStar(r(1614),t),n.__exportStar(r(53401),t)},44174:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IHeartBeat=void 0;let n=r(30997);class i extends n.IEvents{constructor(e){super()}}t.IHeartBeat=i},1614:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(39653);n.__exportStar(r(44174),t)},39653:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return D},__asyncGenerator:function(){return b},__asyncValues:function(){return _},__await:function(){return m},__awaiter:function(){return l},__classPrivateFieldGet:function(){return C},__classPrivateFieldSet:function(){return S},__createBinding:function(){return f},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return i},__generator:function(){return h},__importDefault:function(){return I},__importStar:function(){return E},__makeTemplateObject:function(){return w},__metadata:function(){return c},__param:function(){return u},__read:function(){return g},__rest:function(){return o},__spread:function(){return y},__spreadArrays:function(){return v},__values:function(){return d}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function u(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function f(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=i[e](t)).value instanceof m?Promise.resolve(r.value.v).then(u,c):l(s[0][2],r)}catch(e){l(s[0][3],e)}}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function D(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=d(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},85150:function(e,t,r){"use strict";let n=r(33893),i=r(63954),s=n.__importDefault(r(30653)),o=r(59728);t.ZP=class{constructor(){this.localStorage=s.default}getKeys(){return n.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return n.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(o.parseEntry)})}getItem(e){return n.__awaiter(this,void 0,void 0,function*(){let t=this.localStorage.getItem(e);if(null!==t)return i.safeJsonParse(t)})}setItem(e,t){return n.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(e,i.safeJsonStringify(t))})}removeItem(e){return n.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(e)})}}},30653:function(e,t,r){"use strict";!function(){let t;function n(){}(t=n).prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},t.prototype.setItem=function(e,t){this[e]=String(t)},t.prototype.removeItem=function(e){delete this[e]},t.prototype.clear=function(){let e=this;Object.keys(e).forEach(function(t){e[t]=void 0,delete e[t]})},t.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},t.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),void 0!==r.g&&r.g.localStorage?e.exports=r.g.localStorage:"undefined"!=typeof window&&window.localStorage?e.exports=window.localStorage:e.exports=new n}()},59728:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let n=r(33893);n.__exportStar(r(39076),t),n.__exportStar(r(20496),t)},39076:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IKeyValueStorage=void 0,t.IKeyValueStorage=class{}},20496:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseEntry=void 0;let n=r(63954);t.parseEntry=function(e){var t;return[e[0],n.safeJsonParse(null!==(t=e[1])&&void 0!==t?t:"")]}},33893:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return D},__asyncGenerator:function(){return b},__asyncValues:function(){return _},__await:function(){return m},__awaiter:function(){return l},__classPrivateFieldGet:function(){return C},__classPrivateFieldSet:function(){return S},__createBinding:function(){return f},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return i},__generator:function(){return h},__importDefault:function(){return I},__importStar:function(){return E},__makeTemplateObject:function(){return w},__metadata:function(){return c},__param:function(){return u},__read:function(){return g},__rest:function(){return o},__spread:function(){return y},__spreadArrays:function(){return v},__values:function(){return d}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function u(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function f(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=i[e](t)).value instanceof m?Promise.resolve(r.value.v).then(u,c):l(s[0][2],r)}catch(e){l(s[0][3],e)}}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function D(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=d(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},65727:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PINO_CUSTOM_CONTEXT_KEY=t.PINO_LOGGER_DEFAULTS=void 0,t.PINO_LOGGER_DEFAULTS={level:"info"},t.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pino=void 0;let n=r(57121),i=n.__importDefault(r(36559));Object.defineProperty(t,"pino",{enumerable:!0,get:function(){return i.default}}),n.__exportStar(r(65727),t),n.__exportStar(r(58048),t)},58048:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateChildLogger=t.formatChildLoggerContext=t.getLoggerContext=t.setBrowserLoggerContext=t.getBrowserLoggerContext=t.getDefaultLoggerOptions=void 0;let n=r(65727);function i(e,t=n.PINO_CUSTOM_CONTEXT_KEY){return e[t]||""}function s(e,t,r=n.PINO_CUSTOM_CONTEXT_KEY){return e[r]=t,e}function o(e,t=n.PINO_CUSTOM_CONTEXT_KEY){return void 0===e.bindings?i(e,t):e.bindings().context||""}function a(e,t,r=n.PINO_CUSTOM_CONTEXT_KEY){let i=o(e,r),s=i.trim()?`${i}/${t}`:t;return s}t.getDefaultLoggerOptions=function(e){return Object.assign(Object.assign({},e),{level:(null==e?void 0:e.level)||n.PINO_LOGGER_DEFAULTS.level})},t.getBrowserLoggerContext=i,t.setBrowserLoggerContext=s,t.getLoggerContext=o,t.formatChildLoggerContext=a,t.generateChildLogger=function(e,t,r=n.PINO_CUSTOM_CONTEXT_KEY){let i=a(e,t,r),o=e.child({context:i});return s(o,i,r)}},57121:function(e,t,r){"use strict";r.r(t),r.d(t,{__assign:function(){return s},__asyncDelegator:function(){return D},__asyncGenerator:function(){return b},__asyncValues:function(){return _},__await:function(){return m},__awaiter:function(){return l},__classPrivateFieldGet:function(){return C},__classPrivateFieldSet:function(){return S},__createBinding:function(){return f},__decorate:function(){return a},__exportStar:function(){return p},__extends:function(){return i},__generator:function(){return h},__importDefault:function(){return I},__importStar:function(){return E},__makeTemplateObject:function(){return w},__metadata:function(){return c},__param:function(){return u},__read:function(){return g},__rest:function(){return o},__spread:function(){return y},__spreadArrays:function(){return v},__values:function(){return d}});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var n=function(e,t){return(n=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function u(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function f(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function y(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function m(e){return this instanceof m?(this.v=e,this):new m(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise(function(r,n){s.push([e,t,r,n])>1||a(e,t)})})}function a(e,t){try{var r;(r=i[e](t)).value instanceof m?Promise.resolve(r.value.v).then(u,c):l(s[0][2],r)}catch(e){l(s[0][3],e)}}function u(e){a("next",e)}function c(e){a("throw",e)}function l(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function D(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:m(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function _(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=d(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,i){!function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}(n,i,(t=e[r](t)).done,t.value)})}}}function w(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function I(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw TypeError("attempted to get private field on non-instance");return t.get(e)}function S(e,t,r){if(!t.has(e))throw TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},43014:function(){},3382:function(e,t){"use strict";function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){let t=r(e);if(!t)throw Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},99982:function(e,t,r){"use strict";t.D=void 0;let n=r(3382);t.D=function(){let e,t,r;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function i(...t){let r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){let n=r[e],i=["itemprop","property","name"].map(e=>n.getAttribute(e)).filter(e=>!!e&&t.includes(e));if(i.length&&i){let e=n.getAttribute("content");if(e)return e}}return""}let s=((r=i("name","og:site_name","og:title","twitter:title"))||(r=e.title),r),o=function(){let e=i("description","og:description","twitter:description","keywords");return e}(),a=t.origin,u=function(){let r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){let i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){let e=i.getAttribute("href");if(e){if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{let n=t.pathname.split("/");n.pop();let i=n.join("/");r+=i+"/"+e}n.push(r)}else if(0===e.indexOf("//")){let r=t.protocol+e;n.push(r)}else n.push(e)}}}return n}();return{description:o,url:a,icons:u,name:s}}},94543:function(e,t,r){"use strict";let n=r(70610),i=r(44020),s=r(80500),o=r(92806),a=e=>null==e,u=Symbol("encodeFragmentIdentifier");function c(e){if("string"!=typeof e||1!==e.length)throw TypeError("arrayFormatSeparator must be single character string")}function l(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function h(e,t){return t.decode?i(e):e}function f(e){let t=e.indexOf("#");return -1!==t&&(e=e.slice(0,t)),e}function p(e){e=f(e);let t=e.indexOf("?");return -1===t?"":e.slice(t+1)}function d(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function g(e,t){c((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,n)=>{if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t){n[e]=r;return}void 0===n[e]&&(n[e]={}),n[e][t[1]]=r};case"bracket":return(e,r,n)=>{if(t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),!t){n[e]=r;return}if(void 0===n[e]){n[e]=[r];return}n[e]=[].concat(n[e],r)};case"colon-list-separator":return(e,r,n)=>{if(t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),!t){n[e]=r;return}if(void 0===n[e]){n[e]=[r];return}n[e]=[].concat(n[e],r)};case"comma":case"separator":return(t,r,n)=>{let i="string"==typeof r&&r.includes(e.arrayFormatSeparator),s="string"==typeof r&&!i&&h(r,e).includes(e.arrayFormatSeparator);r=s?h(r,e):r;let o=i||s?r.split(e.arrayFormatSeparator).map(t=>h(t,e)):null===r?r:h(r,e);n[t]=o};case"bracket-separator":return(t,r,n)=>{let i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i){n[t]=r?h(r,e):r;return}let s=null===r?[]:r.split(e.arrayFormatSeparator).map(t=>h(t,e));if(void 0===n[t]){n[t]=s;return}n[t]=[].concat(n[t],s)};default:return(e,t,r)=>{if(void 0===r[e]){r[e]=t;return}r[e]=[].concat(r[e],t)}}}(t),n=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return n;for(let i of e.split("&")){if(""===i)continue;let[e,o]=s(t.decode?i.replace(/\+/g," "):i,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?o:h(o,t),r(h(e,t),o,n)}for(let e of Object.keys(n)){let r=n[e];if("object"==typeof r&&null!==r)for(let e of Object.keys(r))r[e]=d(r[e],t);else n[e]=d(r,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((e,t)=>{let r=n[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"==typeof t?e(Object.keys(t)).sort((e,t)=>Number(e)-Number(t)).map(e=>t[e]):t}(r):e[t]=r,e},Object.create(null))}t.extract=p,t.parse=g,t.stringify=(e,t)=>{if(!e)return"";c((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let r=r=>t.skipNull&&a(e[r])||t.skipEmptyString&&""===e[r],n=function(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let i=r.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[",i,"]"].join("")]:[...r,[l(t,e),"[",l(i,e),"]=",l(n,e)].join("")]};case"bracket":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),"[]"].join("")]:[...r,[l(t,e),"[]=",l(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,[l(t,e),":list="].join("")]:[...r,[l(t,e),":list=",l(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return r=>(n,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?n:(i=null===i?"":i,0===n.length)?[[l(r,e),t,l(i,e)].join("")]:[[n,l(i,e)].join(e.arrayFormatSeparator)]}default:return t=>(r,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?r:null===n?[...r,l(t,e)]:[...r,[l(t,e),"=",l(n,e)].join("")]}}(t),i={};for(let t of Object.keys(e))r(t)||(i[t]=e[t]);let s=Object.keys(i);return!1!==t.sort&&s.sort(t.sort),s.map(r=>{let i=e[r];return void 0===i?"":null===i?l(r,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?l(r,t)+"[]":i.reduce(n(r),[]).join("&"):l(r,t)+"="+l(i,t)}).filter(e=>e.length>0).join("&")},t.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=s(e,"#");return Object.assign({url:r.split("?")[0]||"",query:g(p(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:h(n,t)}:{})},t.stringifyUrl=(e,r)=>{r=Object.assign({encode:!0,strict:!0,[u]:!0},r);let n=f(e.url).split("?")[0]||"",i=t.extract(e.url),s=t.parse(i,{sort:!1}),o=Object.assign(s,e.query),a=t.stringify(o,r);a&&(a=`?${a}`);let c=function(e){let t="",r=e.indexOf("#");return -1!==r&&(t=e.slice(r)),t}(e.url);return e.fragmentIdentifier&&(c=`#${r[u]?l(e.fragmentIdentifier,r):e.fragmentIdentifier}`),`${n}${a}${c}`},t.pick=(e,r,n)=>{n=Object.assign({parseFragmentIdentifier:!0,[u]:!1},n);let{url:i,query:s,fragmentIdentifier:a}=t.parseUrl(e,n);return t.stringifyUrl({url:i,query:o(s,r),fragmentIdentifier:a},n)},t.exclude=(e,r,n)=>{let i=Array.isArray(r)?e=>!r.includes(e):(e,t)=>!r(e,t);return t.pick(e,i,n)}},72307:function(e,t,r){e=r.nmd(e);var n,i,s,o="__lodash_hash_undefined__",a="[object Arguments]",u="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",f="[object Function]",p="[object Map]",d="[object Number]",g="[object Object]",y="[object Promise]",v="[object RegExp]",m="[object Set]",b="[object String]",D="[object WeakMap]",_="[object ArrayBuffer]",w="[object DataView]",E=/^\[object .+?Constructor\]$/,I=/^(?:0|[1-9]\d*)$/,C={};C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C[a]=C[u]=C[_]=C[c]=C[w]=C[l]=C[h]=C[f]=C[p]=C[d]=C[g]=C[v]=C[m]=C[b]=C[D]=!1;var S="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,P="object"==typeof self&&self&&self.Object===Object&&self,O=S||P||Function("return this")(),x=t&&!t.nodeType&&t,A=x&&e&&!e.nodeType&&e,N=A&&A.exports===x,R=N&&S.process,T=function(){try{return R&&R.binding&&R.binding("util")}catch(e){}}(),j=T&&T.isTypedArray;function U(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}function L(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}var k=Array.prototype,$=Function.prototype,M=Object.prototype,z=O["__core-js_shared__"],q=$.toString,F=M.hasOwnProperty,V=(n=/[^.]+$/.exec(z&&z.keys&&z.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",B=M.toString,H=RegExp("^"+q.call(F).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),K=N?O.Buffer:void 0,W=O.Symbol,G=O.Uint8Array,J=M.propertyIsEnumerable,Y=k.splice,Z=W?W.toStringTag:void 0,Q=Object.getOwnPropertySymbols,X=K?K.isBuffer:void 0,ee=(i=Object.keys,s=Object,function(e){return i(s(e))}),et=eC(O,"DataView"),er=eC(O,"Map"),en=eC(O,"Promise"),ei=eC(O,"Set"),es=eC(O,"WeakMap"),eo=eC(Object,"create"),ea=eO(et),eu=eO(er),ec=eO(en),el=eO(ei),eh=eO(es),ef=W?W.prototype:void 0,ep=ef?ef.valueOf:void 0;function ed(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function eg(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ey(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ev(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ey;++t<r;)this.add(e[t])}function em(e){var t=this.__data__=new eg(e);this.size=t.size}function eb(e,t){for(var r=e.length;r--;)if(ex(e[r][0],t))return r;return -1}function eD(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Z&&Z in Object(e)?function(e){var t=F.call(e,Z),r=e[Z];try{e[Z]=void 0;var n=!0}catch(e){}var i=B.call(e);return n&&(t?e[Z]=r:delete e[Z]),i}(e):B.call(e)}function e_(e){return eL(e)&&eD(e)==a}function ew(e,t,r,n,i,s){var o=1&r,a=e.length,u=t.length;if(a!=u&&!(o&&u>a))return!1;var c=s.get(e);if(c&&s.get(t))return c==t;var l=-1,h=!0,f=2&r?new ev:void 0;for(s.set(e,t),s.set(t,e);++l<a;){var p=e[l],d=t[l];if(n)var g=o?n(d,p,l,t,e,s):n(p,d,l,e,t,s);if(void 0!==g){if(g)continue;h=!1;break}if(f){if(!function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}(t,function(e,t){if(!f.has(t)&&(p===e||i(p,e,r,n,s)))return f.push(t)})){h=!1;break}}else if(!(p===d||i(p,d,r,n,s))){h=!1;break}}return s.delete(e),s.delete(t),h}function eE(e){var t;return t=function(e){return null!=e&&ej(e.length)&&!eT(e)?function(e,t){var r,n,i=eN(e),s=!i&&eA(e),o=!i&&!s&&eR(e),a=!i&&!s&&!o&&ek(e),u=i||s||o||a,c=u?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=c.length;for(var h in e)F.call(e,h)&&!(u&&("length"==h||o&&("offset"==h||"parent"==h)||a&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||(r=h,(n=null==(n=l)?9007199254740991:n)&&("number"==typeof r||I.test(r))&&r>-1&&r%1==0&&r<n)))&&c.push(h);return c}(e):function(e){if(r="function"==typeof(t=e&&e.constructor)&&t.prototype||M,e!==r)return ee(e);var t,r,n=[];for(var i in Object(e))F.call(e,i)&&"constructor"!=i&&n.push(i);return n}(e)}(e),eN(e)?t:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(t,eS(e))}function eI(e,t){var r,n=e.__data__;return("string"==(r=typeof t)||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function eC(e,t){var r=null==e?void 0:e[t];return!(!eU(r)||V&&V in r)&&(eT(r)?H:E).test(eO(r))?r:void 0}ed.prototype.clear=function(){this.__data__=eo?eo(null):{},this.size=0},ed.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ed.prototype.get=function(e){var t=this.__data__;if(eo){var r=t[e];return r===o?void 0:r}return F.call(t,e)?t[e]:void 0},ed.prototype.has=function(e){var t=this.__data__;return eo?void 0!==t[e]:F.call(t,e)},ed.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=eo&&void 0===t?o:t,this},eg.prototype.clear=function(){this.__data__=[],this.size=0},eg.prototype.delete=function(e){var t=this.__data__,r=eb(t,e);return!(r<0)&&(r==t.length-1?t.pop():Y.call(t,r,1),--this.size,!0)},eg.prototype.get=function(e){var t=this.__data__,r=eb(t,e);return r<0?void 0:t[r][1]},eg.prototype.has=function(e){return eb(this.__data__,e)>-1},eg.prototype.set=function(e,t){var r=this.__data__,n=eb(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ey.prototype.clear=function(){this.size=0,this.__data__={hash:new ed,map:new(er||eg),string:new ed}},ey.prototype.delete=function(e){var t=eI(this,e).delete(e);return this.size-=t?1:0,t},ey.prototype.get=function(e){return eI(this,e).get(e)},ey.prototype.has=function(e){return eI(this,e).has(e)},ey.prototype.set=function(e,t){var r=eI(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ev.prototype.add=ev.prototype.push=function(e){return this.__data__.set(e,o),this},ev.prototype.has=function(e){return this.__data__.has(e)},em.prototype.clear=function(){this.__data__=new eg,this.size=0},em.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},em.prototype.get=function(e){return this.__data__.get(e)},em.prototype.has=function(e){return this.__data__.has(e)},em.prototype.set=function(e,t){var r=this.__data__;if(r instanceof eg){var n=r.__data__;if(!er||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ey(n)}return r.set(e,t),this.size=r.size,this};var eS=Q?function(e){return null==e?[]:function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}(Q(e=Object(e)),function(t){return J.call(e,t)})}:function(){return[]},eP=eD;function eO(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function ex(e,t){return e===t||e!=e&&t!=t}(et&&eP(new et(new ArrayBuffer(1)))!=w||er&&eP(new er)!=p||en&&eP(en.resolve())!=y||ei&&eP(new ei)!=m||es&&eP(new es)!=D)&&(eP=function(e){var t=eD(e),r=t==g?e.constructor:void 0,n=r?eO(r):"";if(n)switch(n){case ea:return w;case eu:return p;case ec:return y;case el:return m;case eh:return D}return t});var eA=e_(function(){return arguments}())?e_:function(e){return eL(e)&&F.call(e,"callee")&&!J.call(e,"callee")},eN=Array.isArray,eR=X||function(){return!1};function eT(e){if(!eU(e))return!1;var t=eD(e);return t==f||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ej(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function eU(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function eL(e){return null!=e&&"object"==typeof e}var ek=j?function(e){return j(e)}:function(e){return eL(e)&&ej(e.length)&&!!C[eD(e)]};e.exports=function(e,t){return function e(t,r,n,i,s){return t===r||(null!=t&&null!=r&&(eL(t)||eL(r))?function(e,t,r,n,i,s){var o=eN(e),f=eN(t),y=o?u:eP(e),D=f?u:eP(t);y=y==a?g:y,D=D==a?g:D;var E=y==g,I=D==g,C=y==D;if(C&&eR(e)){if(!eR(t))return!1;o=!0,E=!1}if(C&&!E)return s||(s=new em),o||ek(e)?ew(e,t,r,n,i,s):function(e,t,r,n,i,s,o){switch(r){case w:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case _:if(e.byteLength!=t.byteLength||!s(new G(e),new G(t)))break;return!0;case c:case l:case d:return ex(+e,+t);case h:return e.name==t.name&&e.message==t.message;case v:case b:return e==t+"";case p:var a=U;case m:var u=1&n;if(a||(a=L),e.size!=t.size&&!u)break;var f=o.get(e);if(f)return f==t;n|=2,o.set(e,t);var g=ew(a(e),a(t),n,i,s,o);return o.delete(e),g;case"[object Symbol]":if(ep)return ep.call(e)==ep.call(t)}return!1}(e,t,y,r,n,i,s);if(!(1&r)){var S=E&&F.call(e,"__wrapped__"),P=I&&F.call(t,"__wrapped__");if(S||P){var O=S?e.value():e,x=P?t.value():t;return s||(s=new em),i(O,x,r,n,s)}}return!!C&&(s||(s=new em),function(e,t,r,n,i,s){var o=1&r,a=eE(e),u=a.length;if(u!=eE(t).length&&!o)return!1;for(var c=u;c--;){var l=a[c];if(!(o?l in t:F.call(t,l)))return!1}var h=s.get(e);if(h&&s.get(t))return h==t;var f=!0;s.set(e,t),s.set(t,e);for(var p=o;++c<u;){var d=e[l=a[c]],g=t[l];if(n)var y=o?n(g,d,l,t,e,s):n(d,g,l,e,t,s);if(!(void 0===y?d===g||i(d,g,r,n,s):y)){f=!1;break}p||(p="constructor"==l)}if(f&&!p){var v=e.constructor,m=t.constructor;v!=m&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof m&&m instanceof m)&&(f=!1)}return s.delete(e),s.delete(t),f}(e,t,r,n,i,s))}(t,r,n,i,e,s):t!=t&&r!=r)}(e,t)}},85346:function(e){"use strict";function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=Array(s);o[0]=i(e);for(var a=1;a<s;a++)o[a]=i(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var u=r.length;if(0===u)return e;for(var c="",l=0,h=-1,f=e&&e.length||0,p=0;p<f;){if(37===e.charCodeAt(p)&&p+1<f){switch(h=h>-1?h:0,e.charCodeAt(p+1)){case 100:case 102:if(l>=u||null==r[l])break;h<p&&(c+=e.slice(h,p)),c+=Number(r[l]),h=p+2,p++;break;case 105:if(l>=u||null==r[l])break;h<p&&(c+=e.slice(h,p)),c+=Math.floor(Number(r[l])),h=p+2,p++;break;case 79:case 111:case 106:if(l>=u||void 0===r[l])break;h<p&&(c+=e.slice(h,p));var d=typeof r[l];if("string"===d){c+="'"+r[l]+"'",h=p+2,p++;break}if("function"===d){c+=r[l].name||"<anonymous>",h=p+2,p++;break}c+=i(r[l]),h=p+2,p++;break;case 115:if(l>=u)break;h<p&&(c+=e.slice(h,p)),c+=String(r[l]),h=p+2,p++;break;case 37:h<p&&(c+=e.slice(h,p)),c+="%",h=p+2,p++,l--}++l}++p}return -1===h?e:(h<f&&(c+=e.slice(h)),c)}},63954:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.safeJsonParse=function(e){if("string"!=typeof e)throw Error(`Cannot safe json parse value of type ${typeof e}`);try{return JSON.parse(e)}catch(t){return e}},t.safeJsonStringify=function(e){return"string"==typeof e?e:JSON.stringify(e,(e,t)=>void 0===t?null:t)}},36559:function(e,t,r){"use strict";let n=r(85346);e.exports=s;let i=function(){function e(e){return void 0!==e&&e}try{if("undefined"!=typeof globalThis)return globalThis;return Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{};function s(e){var t;(e=e||{}).browser=e.browser||{};let r=e.browser.transmit;if(r&&"function"!=typeof r.send)throw Error("pino: transmit option must have a send function");let n=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);let l=e.serializers||{},h=function(e,t){if(Array.isArray(e)){let t=e.filter(function(e){return"!stdSerializers.err"!==e});return t}return!0===e&&Object.keys(t)}(e.browser.serialize,l),g=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(g=!1),"function"==typeof n&&(n.error=n.fatal=n.warn=n.info=n.debug=n.trace=n),!1===e.enabled&&(e.level="silent");let y=e.level||"info",v=Object.create(n);v.log||(v.log=f),Object.defineProperty(v,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(v,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,o(m,v,"error","log"),o(m,v,"fatal","error"),o(m,v,"warn","error"),o(m,v,"info","log"),o(m,v,"debug","log"),o(m,v,"trace","log")}});let m={transmit:r,serialize:h,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:"function"==typeof(t=e).timestamp?t.timestamp:!1===t.timestamp?p:d};return v.levels=s.levels,v.level=y,v.setMaxListeners=v.getMaxListeners=v.emit=v.addListener=v.on=v.prependListener=v.once=v.prependOnceListener=v.removeListener=v.removeAllListeners=v.listeners=v.listenerCount=v.eventNames=v.write=v.flush=f,v.serializers=l,v._serialize=h,v._stdErrSerialize=g,v.child=function(t,n){if(!t)throw Error("missing bindings for child Pino");n=n||{},h&&t.serializers&&(n.serializers=t.serializers);let i=n.serializers;if(h&&i){var s=Object.assign({},l,i),o=!0===e.browser.serialize?Object.keys(s):h;delete t.serializers,a([t],o,s,this._stdErrSerialize)}function f(e){this._childLevel=(0|e._childLevel)+1,this.error=u(e,t,"error"),this.fatal=u(e,t,"fatal"),this.warn=u(e,t,"warn"),this.info=u(e,t,"info"),this.debug=u(e,t,"debug"),this.trace=u(e,t,"trace"),s&&(this.serializers=s,this._serialize=o),r&&(this._logEvent=c([].concat(e._logEvent.bindings,t)))}return f.prototype=this,new f(this)},r&&(v._logEvent=c()),v}function o(e,t,r,o){let u=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?f:u[r]?u[r]:i[r]||i[o]||f,function(e,t,r){if(e.transmit||t[r]!==f){var o;t[r]=(o=t[r],function(){let u=e.timestamp(),l=Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var f=0;f<l.length;f++)l[f]=arguments[f];if(e.serialize&&!e.asObject&&a(l,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?o.call(h,function(e,t,r,i){e._serialize&&a(r,e._serialize,e.serializers,e._stdErrSerialize);let o=r.slice(),u=o[0],c={};i&&(c.time=i),c.level=s.levels.values[t];let l=(0|e._childLevel)+1;if(l<1&&(l=1),null!==u&&"object"==typeof u){for(;l--&&"object"==typeof o[0];)Object.assign(c,o.shift());u=o.length?n(o.shift(),o):void 0}else"string"==typeof u&&(u=n(o.shift(),o));return void 0!==u&&(c.msg=u),c}(this,r,l,u)):o.apply(h,l),e.transmit){let n=e.transmit.level||t.level,i=s.levels.values[n],o=s.levels.values[r];if(o<i)return;(function(e,t,r){let n=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,u=t.val,l=e._logEvent.bindings;a(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter(function(e){return -1===l.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=o,n(s,e._logEvent,u),e._logEvent=c(l)})(this,{ts:u,methodLevel:r,methodValue:o,transmitLevel:n,transmitValue:s.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},l)}})}}(e,t,r)}function a(e,t,r,n){for(let i in e)if(n&&e[i]instanceof Error)e[i]=s.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(let n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function u(e,t,r){return function(){let n=Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function c(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function l(){return{}}function h(e){return e}function f(){}function p(){return!1}function d(){return Date.now()}s.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},s.stdSerializers={mapHttpRequest:l,mapHttpResponse:l,wrapRequestSerializer:h,wrapResponseSerializer:h,wrapErrorSerializer:h,req:l,res:l,err:function(e){let t={type:e.constructor.name,msg:e.message,stack:e.stack};for(let r in e)void 0===t[r]&&(t[r]=e[r]);return t}},s.stdTimeFunctions=Object.assign({},{nullTime:p,epochTime:d,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})}}]);